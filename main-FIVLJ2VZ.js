var mN=Object.create;var ch=Object.defineProperty,_N=Object.defineProperties,vN=Object.getOwnPropertyDescriptor,yN=Object.getOwnPropertyDescriptors,EN=Object.getOwnPropertyNames,Bv=Object.getOwnPropertySymbols,IN=Object.getPrototypeOf,$v=Object.prototype.hasOwnProperty,wN=Object.prototype.propertyIsEnumerable;var Hv=(e,t,n)=>t in e?ch(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,R=(e,t)=>{for(var n in t||={})$v.call(t,n)&&Hv(e,n,t[n]);if(Bv)for(var n of Bv(t))wN.call(t,n)&&Hv(e,n,t[n]);return e},ge=(e,t)=>_N(e,yN(t));var TN=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var bN=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of EN(t))!$v.call(e,o)&&o!==n&&ch(e,o,{get:()=>t[o],enumerable:!(r=vN(t,o))||r.enumerable});return e};var CN=(e,t,n)=>(n=e!=null?mN(IN(e)):{},bN(t||!e||!e.__esModule?ch(n,"default",{value:e,enumerable:!0}):n,e));var S=(e,t,n)=>new Promise((r,o)=>{var s=d=>{try{u(n.next(d))}catch(f){o(f)}},c=d=>{try{u(n.throw(d))}catch(f){o(f)}},u=d=>d.done?r(d.value):Promise.resolve(d.value).then(s,c);u((n=n.apply(e,t)).next())});var HS=TN((Cd,BS)=>{"use strict";(function(e,t){typeof Cd=="object"&&typeof BS<"u"?t(Cd):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.leaflet={}))})(Cd,function(e){"use strict";var t="1.9.4";function n(i){var a,l,h,p;for(l=1,h=arguments.length;l<h;l++){p=arguments[l];for(a in p)i[a]=p[a]}return i}var r=Object.create||(function(){function i(){}return function(a){return i.prototype=a,new i}})();function o(i,a){var l=Array.prototype.slice;if(i.bind)return i.bind.apply(i,l.call(arguments,1));var h=l.call(arguments,2);return function(){return i.apply(a,h.length?h.concat(l.call(arguments)):arguments)}}var s=0;function c(i){return"_leaflet_id"in i||(i._leaflet_id=++s),i._leaflet_id}function u(i,a,l){var h,p,g,E;return E=function(){h=!1,p&&(g.apply(l,p),p=!1)},g=function(){h?p=arguments:(i.apply(l,arguments),setTimeout(E,a),h=!0)},g}function d(i,a,l){var h=a[1],p=a[0],g=h-p;return i===h&&l?i:((i-p)%g+g)%g+p}function f(){return!1}function m(i,a){if(a===!1)return i;var l=Math.pow(10,a===void 0?6:a);return Math.round(i*l)/l}function _(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function v(i){return _(i).split(/\s+/)}function y(i,a){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?r(i.options):{});for(var l in a)i.options[l]=a[l];return i.options}function T(i,a,l){var h=[];for(var p in i)h.push(encodeURIComponent(l?p.toUpperCase():p)+"="+encodeURIComponent(i[p]));return(!a||a.indexOf("?")===-1?"?":"&")+h.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function P(i,a){return i.replace(N,function(l,h){var p=a[h];if(p===void 0)throw new Error("No value provided for variable "+l);return typeof p=="function"&&(p=p(a)),p})}var x=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function Fe(i,a){for(var l=0;l<i.length;l++)if(i[l]===a)return l;return-1}var Ce="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Jt(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var Wo=0;function yi(i){var a=+new Date,l=Math.max(0,16-(a-Wo));return Wo=a+l,window.setTimeout(i,l)}var Ei=window.requestAnimationFrame||Jt("RequestAnimationFrame")||yi,oc=window.cancelAnimationFrame||Jt("CancelAnimationFrame")||Jt("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function je(i,a,l){if(l&&Ei===yi)i.call(a);else return Ei.call(window,o(i,a))}function nt(i){i&&oc.call(window,i)}var zS={__proto__:null,extend:n,create:r,bind:o,get lastId(){return s},stamp:c,throttle:u,wrapNum:d,falseFn:f,formatNum:m,trim:_,splitWords:v,setOptions:y,getParamString:T,template:P,isArray:x,indexOf:Fe,emptyImageUrl:Ce,requestFn:Ei,cancelFn:oc,requestAnimFrame:je,cancelAnimFrame:nt};function yn(){}yn.extend=function(i){var a=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=a.__super__=this.prototype,h=r(l);h.constructor=a,a.prototype=h;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(a[p]=this[p]);return i.statics&&n(a,i.statics),i.includes&&(WS(i.includes),n.apply(null,[h].concat(i.includes))),n(h,i),delete h.statics,delete h.includes,h.options&&(h.options=l.options?r(l.options):{},n(h.options,i.options)),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var g=0,E=h._initHooks.length;g<E;g++)h._initHooks[g].call(this)}},a},yn.include=function(i){var a=this.prototype.options;return n(this.prototype,i),i.options&&(this.prototype.options=a,this.mergeOptions(i.options)),this},yn.mergeOptions=function(i){return n(this.prototype.options,i),this},yn.addInitHook=function(i){var a=Array.prototype.slice.call(arguments,1),l=typeof i=="function"?i:function(){this[i].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function WS(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=x(i)?i:[i];for(var a=0;a<i.length;a++)i[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var vt={on:function(i,a,l){if(typeof i=="object")for(var h in i)this._on(h,i[h],a);else{i=v(i);for(var p=0,g=i.length;p<g;p++)this._on(i[p],a,l)}return this},off:function(i,a,l){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var h in i)this._off(h,i[h],a);else{i=v(i);for(var p=arguments.length===1,g=0,E=i.length;g<E;g++)p?this._off(i[g]):this._off(i[g],a,l)}return this},_on:function(i,a,l,h){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(i,a,l)===!1){l===this&&(l=void 0);var p={fn:a,ctx:l};h&&(p.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(p)}},_off:function(i,a,l){var h,p,g;if(this._events&&(h=this._events[i],!!h)){if(arguments.length===1){if(this._firingCount)for(p=0,g=h.length;p<g;p++)h[p].fn=f;delete this._events[i];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var E=this._listens(i,a,l);if(E!==!1){var I=h[E];this._firingCount&&(I.fn=f,this._events[i]=h=h.slice()),h.splice(E,1)}}},fire:function(i,a,l){if(!this.listens(i,l))return this;var h=n({},a,{type:i,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var p=this._events[i];if(p){this._firingCount=this._firingCount+1||1;for(var g=0,E=p.length;g<E;g++){var I=p[g],w=I.fn;I.once&&this.off(i,w,I.ctx),w.call(I.ctx||this,h)}this._firingCount--}}return l&&this._propagateEvent(h),this},listens:function(i,a,l,h){typeof i!="string"&&console.warn('"string" type argument expected');var p=a;typeof a!="function"&&(h=!!a,p=void 0,l=void 0);var g=this._events&&this._events[i];if(g&&g.length&&this._listens(i,p,l)!==!1)return!0;if(h){for(var E in this._eventParents)if(this._eventParents[E].listens(i,a,l,h))return!0}return!1},_listens:function(i,a,l){if(!this._events)return!1;var h=this._events[i]||[];if(!a)return!!h.length;l===this&&(l=void 0);for(var p=0,g=h.length;p<g;p++)if(h[p].fn===a&&h[p].ctx===l)return p;return!1},once:function(i,a,l){if(typeof i=="object")for(var h in i)this._on(h,i[h],a,!0);else{i=v(i);for(var p=0,g=i.length;p<g;p++)this._on(i[p],a,l,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[c(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[c(i)],this},_propagateEvent:function(i){for(var a in this._eventParents)this._eventParents[a].fire(i.type,n({layer:i.target,propagatedFrom:i.target},i),!0)}};vt.addEventListener=vt.on,vt.removeEventListener=vt.clearAllEventListeners=vt.off,vt.addOneTimeEventListener=vt.once,vt.fireEvent=vt.fire,vt.hasEventListeners=vt.listens;var qo=yn.extend(vt);function $(i,a,l){this.x=l?Math.round(i):i,this.y=l?Math.round(a):a}var R_=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(i){return this.clone()._add(V(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(V(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new $(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new $(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=R_(this.x),this.y=R_(this.y),this},distanceTo:function(i){i=V(i);var a=i.x-this.x,l=i.y-this.y;return Math.sqrt(a*a+l*l)},equals:function(i){return i=V(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=V(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function V(i,a,l){return i instanceof $?i:x(i)?new $(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new $(i.x,i.y):new $(i,a,l)}function Ie(i,a){if(i)for(var l=a?[i,a]:i,h=0,p=l.length;h<p;h++)this.extend(l[h])}Ie.prototype={extend:function(i){var a,l;if(!i)return this;if(i instanceof $||typeof i[0]=="number"||"x"in i)a=l=V(i);else if(i=rt(i),a=i.min,l=i.max,!a||!l)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=l.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(l.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(l.y,this.max.y)),this},getCenter:function(i){return V((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return V(this.min.x,this.max.y)},getTopRight:function(){return V(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var a,l;return typeof i[0]=="number"||i instanceof $?i=V(i):i=rt(i),i instanceof Ie?(a=i.min,l=i.max):a=l=i,a.x>=this.min.x&&l.x<=this.max.x&&a.y>=this.min.y&&l.y<=this.max.y},intersects:function(i){i=rt(i);var a=this.min,l=this.max,h=i.min,p=i.max,g=p.x>=a.x&&h.x<=l.x,E=p.y>=a.y&&h.y<=l.y;return g&&E},overlaps:function(i){i=rt(i);var a=this.min,l=this.max,h=i.min,p=i.max,g=p.x>a.x&&h.x<l.x,E=p.y>a.y&&h.y<l.y;return g&&E},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var a=this.min,l=this.max,h=Math.abs(a.x-l.x)*i,p=Math.abs(a.y-l.y)*i;return rt(V(a.x-h,a.y-p),V(l.x+h,l.y+p))},equals:function(i){return i?(i=rt(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function rt(i,a){return!i||i instanceof Ie?i:new Ie(i,a)}function it(i,a){if(i)for(var l=a?[i,a]:i,h=0,p=l.length;h<p;h++)this.extend(l[h])}it.prototype={extend:function(i){var a=this._southWest,l=this._northEast,h,p;if(i instanceof pe)h=i,p=i;else if(i instanceof it){if(h=i._southWest,p=i._northEast,!h||!p)return this}else return i?this.extend(ne(i)||Ne(i)):this;return!a&&!l?(this._southWest=new pe(h.lat,h.lng),this._northEast=new pe(p.lat,p.lng)):(a.lat=Math.min(h.lat,a.lat),a.lng=Math.min(h.lng,a.lng),l.lat=Math.max(p.lat,l.lat),l.lng=Math.max(p.lng,l.lng)),this},pad:function(i){var a=this._southWest,l=this._northEast,h=Math.abs(a.lat-l.lat)*i,p=Math.abs(a.lng-l.lng)*i;return new it(new pe(a.lat-h,a.lng-p),new pe(l.lat+h,l.lng+p))},getCenter:function(){return new pe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new pe(this.getNorth(),this.getWest())},getSouthEast:function(){return new pe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof pe||"lat"in i?i=ne(i):i=Ne(i);var a=this._southWest,l=this._northEast,h,p;return i instanceof it?(h=i.getSouthWest(),p=i.getNorthEast()):h=p=i,h.lat>=a.lat&&p.lat<=l.lat&&h.lng>=a.lng&&p.lng<=l.lng},intersects:function(i){i=Ne(i);var a=this._southWest,l=this._northEast,h=i.getSouthWest(),p=i.getNorthEast(),g=p.lat>=a.lat&&h.lat<=l.lat,E=p.lng>=a.lng&&h.lng<=l.lng;return g&&E},overlaps:function(i){i=Ne(i);var a=this._southWest,l=this._northEast,h=i.getSouthWest(),p=i.getNorthEast(),g=p.lat>a.lat&&h.lat<l.lat,E=p.lng>a.lng&&h.lng<l.lng;return g&&E},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,a){return i?(i=Ne(i),this._southWest.equals(i.getSouthWest(),a)&&this._northEast.equals(i.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ne(i,a){return i instanceof it?i:new it(i,a)}function pe(i,a,l){if(isNaN(i)||isNaN(a))throw new Error("Invalid LatLng object: ("+i+", "+a+")");this.lat=+i,this.lng=+a,l!==void 0&&(this.alt=+l)}pe.prototype={equals:function(i,a){if(!i)return!1;i=ne(i);var l=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return l<=(a===void 0?1e-9:a)},toString:function(i){return"LatLng("+m(this.lat,i)+", "+m(this.lng,i)+")"},distanceTo:function(i){return Wn.distance(this,ne(i))},wrap:function(){return Wn.wrapLatLng(this)},toBounds:function(i){var a=180*i/40075017,l=a/Math.cos(Math.PI/180*this.lat);return Ne([this.lat-a,this.lng-l],[this.lat+a,this.lng+l])},clone:function(){return new pe(this.lat,this.lng,this.alt)}};function ne(i,a,l){return i instanceof pe?i:x(i)&&typeof i[0]!="object"?i.length===3?new pe(i[0],i[1],i[2]):i.length===2?new pe(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new pe(i.lat,"lng"in i?i.lng:i.lon,i.alt):a===void 0?null:new pe(i,a,l)}var En={latLngToPoint:function(i,a){var l=this.projection.project(i),h=this.scale(a);return this.transformation._transform(l,h)},pointToLatLng:function(i,a){var l=this.scale(a),h=this.transformation.untransform(i,l);return this.projection.unproject(h)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var a=this.projection.bounds,l=this.scale(i),h=this.transformation.transform(a.min,l),p=this.transformation.transform(a.max,l);return new Ie(h,p)},infinite:!1,wrapLatLng:function(i){var a=this.wrapLng?d(i.lng,this.wrapLng,!0):i.lng,l=this.wrapLat?d(i.lat,this.wrapLat,!0):i.lat,h=i.alt;return new pe(l,a,h)},wrapLatLngBounds:function(i){var a=i.getCenter(),l=this.wrapLatLng(a),h=a.lat-l.lat,p=a.lng-l.lng;if(h===0&&p===0)return i;var g=i.getSouthWest(),E=i.getNorthEast(),I=new pe(g.lat-h,g.lng-p),w=new pe(E.lat-h,E.lng-p);return new it(I,w)}},Wn=n({},En,{wrapLng:[-180,180],R:6371e3,distance:function(i,a){var l=Math.PI/180,h=i.lat*l,p=a.lat*l,g=Math.sin((a.lat-i.lat)*l/2),E=Math.sin((a.lng-i.lng)*l/2),I=g*g+Math.cos(h)*Math.cos(p)*E*E,w=2*Math.atan2(Math.sqrt(I),Math.sqrt(1-I));return this.R*w}}),M_=6378137,Nd={R:M_,MAX_LATITUDE:85.0511287798,project:function(i){var a=Math.PI/180,l=this.MAX_LATITUDE,h=Math.max(Math.min(l,i.lat),-l),p=Math.sin(h*a);return new $(this.R*i.lng*a,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(i){var a=180/Math.PI;return new pe((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*a,i.x*a/this.R)},bounds:(function(){var i=M_*Math.PI;return new Ie([-i,-i],[i,i])})()};function Ad(i,a,l,h){if(x(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=a,this._c=l,this._d=h}Ad.prototype={transform:function(i,a){return this._transform(i.clone(),a)},_transform:function(i,a){return a=a||1,i.x=a*(this._a*i.x+this._b),i.y=a*(this._c*i.y+this._d),i},untransform:function(i,a){return a=a||1,new $((i.x/a-this._b)/this._a,(i.y/a-this._d)/this._c)}};function Go(i,a,l,h){return new Ad(i,a,l,h)}var Rd=n({},Wn,{code:"EPSG:3857",projection:Nd,transformation:(function(){var i=.5/(Math.PI*Nd.R);return Go(i,.5,-i,.5)})()}),qS=n({},Rd,{code:"EPSG:900913"});function P_(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function x_(i,a){var l="",h,p,g,E,I,w;for(h=0,g=i.length;h<g;h++){for(I=i[h],p=0,E=I.length;p<E;p++)w=I[p],l+=(p?"L":"M")+w.x+" "+w.y;l+=a?M.svg?"z":"x":""}return l||"M0 0"}var Md=document.documentElement.style,sc="ActiveXObject"in window,GS=sc&&!document.addEventListener,k_="msLaunchUri"in navigator&&!("documentMode"in document),Pd=Xt("webkit"),O_=Xt("android"),L_=Xt("android 2")||Xt("android 3"),ZS=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),KS=O_&&Xt("Google")&&ZS<537&&!("AudioNode"in window),xd=!!window.opera,F_=!k_&&Xt("chrome"),j_=Xt("gecko")&&!Pd&&!xd&&!sc,YS=!F_&&Xt("safari"),U_=Xt("phantom"),V_="OTransition"in Md,QS=navigator.platform.indexOf("Win")===0,B_=sc&&"transition"in Md,kd="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!L_,H_="MozPerspective"in Md,JS=!window.L_DISABLE_3D&&(B_||kd||H_)&&!V_&&!U_,Zo=typeof orientation<"u"||Xt("mobile"),XS=Zo&&Pd,eD=Zo&&kd,$_=!window.PointerEvent&&window.MSPointerEvent,z_=!!(window.PointerEvent||$_),W_="ontouchstart"in window||!!window.TouchEvent,tD=!window.L_NO_TOUCH&&(W_||z_),nD=Zo&&xd,rD=Zo&&j_,iD=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,oD=(function(){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",f,a),window.removeEventListener("testPassiveEventSupport",f,a)}catch{}return i})(),sD=(function(){return!!document.createElement("canvas").getContext})(),Od=!!(document.createElementNS&&P_("svg").createSVGRect),aD=!!Od&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),cD=!Od&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var a=i.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}})(),lD=navigator.platform.indexOf("Mac")===0,uD=navigator.platform.indexOf("Linux")===0;function Xt(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var M={ie:sc,ielt9:GS,edge:k_,webkit:Pd,android:O_,android23:L_,androidStock:KS,opera:xd,chrome:F_,gecko:j_,safari:YS,phantom:U_,opera12:V_,win:QS,ie3d:B_,webkit3d:kd,gecko3d:H_,any3d:JS,mobile:Zo,mobileWebkit:XS,mobileWebkit3d:eD,msPointer:$_,pointer:z_,touch:tD,touchNative:W_,mobileOpera:nD,mobileGecko:rD,retina:iD,passiveEvents:oD,canvas:sD,svg:Od,vml:cD,inlineSvg:aD,mac:lD,linux:uD},q_=M.msPointer?"MSPointerDown":"pointerdown",G_=M.msPointer?"MSPointerMove":"pointermove",Z_=M.msPointer?"MSPointerUp":"pointerup",K_=M.msPointer?"MSPointerCancel":"pointercancel",Ld={touchstart:q_,touchmove:G_,touchend:Z_,touchcancel:K_},Y_={touchstart:mD,touchmove:ac,touchend:ac,touchcancel:ac},Ii={},Q_=!1;function dD(i,a,l){return a==="touchstart"&&gD(),Y_[a]?(l=Y_[a].bind(this,l),i.addEventListener(Ld[a],l,!1),l):(console.warn("wrong event specified:",a),f)}function hD(i,a,l){if(!Ld[a]){console.warn("wrong event specified:",a);return}i.removeEventListener(Ld[a],l,!1)}function fD(i){Ii[i.pointerId]=i}function pD(i){Ii[i.pointerId]&&(Ii[i.pointerId]=i)}function J_(i){delete Ii[i.pointerId]}function gD(){Q_||(document.addEventListener(q_,fD,!0),document.addEventListener(G_,pD,!0),document.addEventListener(Z_,J_,!0),document.addEventListener(K_,J_,!0),Q_=!0)}function ac(i,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var l in Ii)a.touches.push(Ii[l]);a.changedTouches=[a],i(a)}}function mD(i,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&$e(a),ac(i,a)}function _D(i){var a={},l,h;for(h in i)l=i[h],a[h]=l&&l.bind?l.bind(i):l;return i=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var vD=200;function yD(i,a){i.addEventListener("dblclick",a);var l=0,h;function p(g){if(g.detail!==1){h=g.detail;return}if(!(g.pointerType==="mouse"||g.sourceCapabilities&&!g.sourceCapabilities.firesTouchEvents)){var E=rv(g);if(!(E.some(function(w){return w instanceof HTMLLabelElement&&w.attributes.for})&&!E.some(function(w){return w instanceof HTMLInputElement||w instanceof HTMLSelectElement}))){var I=Date.now();I-l<=vD?(h++,h===2&&a(_D(g))):h=1,l=I}}}return i.addEventListener("click",p),{dblclick:a,simDblclick:p}}function ED(i,a){i.removeEventListener("dblclick",a.dblclick),i.removeEventListener("click",a.simDblclick)}var Fd=uc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ko=uc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),X_=Ko==="webkitTransition"||Ko==="OTransition"?Ko+"End":"transitionend";function ev(i){return typeof i=="string"?document.getElementById(i):i}function Yo(i,a){var l=i.style[a]||i.currentStyle&&i.currentStyle[a];if((!l||l==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(i,null);l=h?h[a]:null}return l==="auto"?null:l}function ae(i,a,l){var h=document.createElement(i);return h.className=a||"",l&&l.appendChild(h),h}function we(i){var a=i.parentNode;a&&a.removeChild(i)}function cc(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function wi(i){var a=i.parentNode;a&&a.lastChild!==i&&a.appendChild(i)}function Ti(i){var a=i.parentNode;a&&a.firstChild!==i&&a.insertBefore(i,a.firstChild)}function jd(i,a){if(i.classList!==void 0)return i.classList.contains(a);var l=lc(i);return l.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(l)}function G(i,a){if(i.classList!==void 0)for(var l=v(a),h=0,p=l.length;h<p;h++)i.classList.add(l[h]);else if(!jd(i,a)){var g=lc(i);Ud(i,(g?g+" ":"")+a)}}function Se(i,a){i.classList!==void 0?i.classList.remove(a):Ud(i,_((" "+lc(i)+" ").replace(" "+a+" "," ")))}function Ud(i,a){i.className.baseVal===void 0?i.className=a:i.className.baseVal=a}function lc(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Ct(i,a){"opacity"in i.style?i.style.opacity=a:"filter"in i.style&&ID(i,a)}function ID(i,a){var l=!1,h="DXImageTransform.Microsoft.Alpha";try{l=i.filters.item(h)}catch{if(a===1)return}a=Math.round(a*100),l?(l.Enabled=a!==100,l.Opacity=a):i.style.filter+=" progid:"+h+"(opacity="+a+")"}function uc(i){for(var a=document.documentElement.style,l=0;l<i.length;l++)if(i[l]in a)return i[l];return!1}function yr(i,a,l){var h=a||new $(0,0);i.style[Fd]=(M.ie3d?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(l?" scale("+l+")":"")}function Ae(i,a){i._leaflet_pos=a,M.any3d?yr(i,a):(i.style.left=a.x+"px",i.style.top=a.y+"px")}function Er(i){return i._leaflet_pos||new $(0,0)}var Qo,Jo,Vd;if("onselectstart"in document)Qo=function(){z(window,"selectstart",$e)},Jo=function(){ve(window,"selectstart",$e)};else{var Xo=uc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Qo=function(){if(Xo){var i=document.documentElement.style;Vd=i[Xo],i[Xo]="none"}},Jo=function(){Xo&&(document.documentElement.style[Xo]=Vd,Vd=void 0)}}function Bd(){z(window,"dragstart",$e)}function Hd(){ve(window,"dragstart",$e)}var dc,$d;function zd(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(hc(),dc=i,$d=i.style.outlineStyle,i.style.outlineStyle="none",z(window,"keydown",hc))}function hc(){dc&&(dc.style.outlineStyle=$d,dc=void 0,$d=void 0,ve(window,"keydown",hc))}function tv(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Wd(i){var a=i.getBoundingClientRect();return{x:a.width/i.offsetWidth||1,y:a.height/i.offsetHeight||1,boundingClientRect:a}}var wD={__proto__:null,TRANSFORM:Fd,TRANSITION:Ko,TRANSITION_END:X_,get:ev,getStyle:Yo,create:ae,remove:we,empty:cc,toFront:wi,toBack:Ti,hasClass:jd,addClass:G,removeClass:Se,setClass:Ud,getClass:lc,setOpacity:Ct,testProp:uc,setTransform:yr,setPosition:Ae,getPosition:Er,get disableTextSelection(){return Qo},get enableTextSelection(){return Jo},disableImageDrag:Bd,enableImageDrag:Hd,preventOutline:zd,restoreOutline:hc,getSizedParentNode:tv,getScale:Wd};function z(i,a,l,h){if(a&&typeof a=="object")for(var p in a)Gd(i,p,a[p],l);else{a=v(a);for(var g=0,E=a.length;g<E;g++)Gd(i,a[g],l,h)}return this}var en="_leaflet_events";function ve(i,a,l,h){if(arguments.length===1)nv(i),delete i[en];else if(a&&typeof a=="object")for(var p in a)Zd(i,p,a[p],l);else if(a=v(a),arguments.length===2)nv(i,function(I){return Fe(a,I)!==-1});else for(var g=0,E=a.length;g<E;g++)Zd(i,a[g],l,h);return this}function nv(i,a){for(var l in i[en]){var h=l.split(/\d/)[0];(!a||a(h))&&Zd(i,h,null,null,l)}}var qd={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Gd(i,a,l,h){var p=a+c(l)+(h?"_"+c(h):"");if(i[en]&&i[en][p])return this;var g=function(I){return l.call(h||i,I||window.event)},E=g;!M.touchNative&&M.pointer&&a.indexOf("touch")===0?g=dD(i,a,g):M.touch&&a==="dblclick"?g=yD(i,g):"addEventListener"in i?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?i.addEventListener(qd[a]||a,g,M.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(g=function(I){I=I||window.event,Yd(i,I)&&E(I)},i.addEventListener(qd[a],g,!1)):i.addEventListener(a,E,!1):i.attachEvent("on"+a,g),i[en]=i[en]||{},i[en][p]=g}function Zd(i,a,l,h,p){p=p||a+c(l)+(h?"_"+c(h):"");var g=i[en]&&i[en][p];if(!g)return this;!M.touchNative&&M.pointer&&a.indexOf("touch")===0?hD(i,a,g):M.touch&&a==="dblclick"?ED(i,g):"removeEventListener"in i?i.removeEventListener(qd[a]||a,g,!1):i.detachEvent("on"+a,g),i[en][p]=null}function Ir(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Kd(i){return Gd(i,"wheel",Ir),this}function es(i){return z(i,"mousedown touchstart dblclick contextmenu",Ir),i._leaflet_disable_click=!0,this}function $e(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function wr(i){return $e(i),Ir(i),this}function rv(i){if(i.composedPath)return i.composedPath();for(var a=[],l=i.target;l;)a.push(l),l=l.parentNode;return a}function iv(i,a){if(!a)return new $(i.clientX,i.clientY);var l=Wd(a),h=l.boundingClientRect;return new $((i.clientX-h.left)/l.x-a.clientLeft,(i.clientY-h.top)/l.y-a.clientTop)}var TD=M.linux&&M.chrome?window.devicePixelRatio:M.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ov(i){return M.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/TD:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Yd(i,a){var l=a.relatedTarget;if(!l)return!0;try{for(;l&&l!==i;)l=l.parentNode}catch{return!1}return l!==i}var bD={__proto__:null,on:z,off:ve,stopPropagation:Ir,disableScrollPropagation:Kd,disableClickPropagation:es,preventDefault:$e,stop:wr,getPropagationPath:rv,getMousePosition:iv,getWheelDelta:ov,isExternalTarget:Yd,addListener:z,removeListener:ve},sv=qo.extend({run:function(i,a,l,h){this.stop(),this._el=i,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=Er(i),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=je(this._animate,this),this._step()},_step:function(i){var a=+new Date-this._startTime,l=this._duration*1e3;a<l?this._runFrame(this._easeOut(a/l),i):(this._runFrame(1),this._complete())},_runFrame:function(i,a){var l=this._startPos.add(this._offset.multiplyBy(i));a&&l._round(),Ae(this._el,l),this.fire("step")},_complete:function(){nt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),re=qo.extend({options:{crs:Rd,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,a){a=y(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(ne(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ko&&M.any3d&&!M.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),z(this._proxy,X_,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,a,l){if(a=a===void 0?this._zoom:this._limitZoom(a),i=this._limitCenter(ne(i),a,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=n({animate:l.animate},l.zoom),l.pan=n({animate:l.animate,duration:l.duration},l.pan));var h=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,a,l.zoom):this._tryAnimatedPan(i,l.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(i,a,l.pan&&l.pan.noMoveStart),this},setZoom:function(i,a){return this._loaded?this.setView(this.getCenter(),i,{zoom:a}):(this._zoom=i,this)},zoomIn:function(i,a){return i=i||(M.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,a)},zoomOut:function(i,a){return i=i||(M.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,a)},setZoomAround:function(i,a,l){var h=this.getZoomScale(a),p=this.getSize().divideBy(2),g=i instanceof $?i:this.latLngToContainerPoint(i),E=g.subtract(p).multiplyBy(1-1/h),I=this.containerPointToLatLng(p.add(E));return this.setView(I,a,{zoom:l})},_getBoundsCenterZoom:function(i,a){a=a||{},i=i.getBounds?i.getBounds():Ne(i);var l=V(a.paddingTopLeft||a.padding||[0,0]),h=V(a.paddingBottomRight||a.padding||[0,0]),p=this.getBoundsZoom(i,!1,l.add(h));if(p=typeof a.maxZoom=="number"?Math.min(a.maxZoom,p):p,p===1/0)return{center:i.getCenter(),zoom:p};var g=h.subtract(l).divideBy(2),E=this.project(i.getSouthWest(),p),I=this.project(i.getNorthEast(),p),w=this.unproject(E.add(I).divideBy(2).add(g),p);return{center:w,zoom:p}},fitBounds:function(i,a){if(i=Ne(i),!i.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(i,a);return this.setView(l.center,l.zoom,a)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,a){return this.setView(i,this._zoom,{pan:a})},panBy:function(i,a){if(i=V(i).round(),a=a||{},!i.x&&!i.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new sv,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){G(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,l,a.duration||.25,a.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,a,l){if(l=l||{},l.animate===!1||!M.any3d)return this.setView(i,a,l);this._stop();var h=this.project(this.getCenter()),p=this.project(i),g=this.getSize(),E=this._zoom;i=ne(i),a=a===void 0?E:a;var I=Math.max(g.x,g.y),w=I*this.getZoomScale(E,a),b=p.distanceTo(h)||1,A=1.42,j=A*A;function Q(Re){var bc=Re?-1:1,hN=Re?w:I,fN=w*w-I*I+bc*j*j*b*b,pN=2*hN*j*b,ah=fN/pN,Vv=Math.sqrt(ah*ah+1)-ah,gN=Vv<1e-9?-18:Math.log(Vv);return gN}function Je(Re){return(Math.exp(Re)-Math.exp(-Re))/2}function Ue(Re){return(Math.exp(Re)+Math.exp(-Re))/2}function Dt(Re){return Je(Re)/Ue(Re)}var ot=Q(0);function Ai(Re){return I*(Ue(ot)/Ue(ot+A*Re))}function cN(Re){return I*(Ue(ot)*Dt(ot+A*Re)-Je(ot))/j}function lN(Re){return 1-Math.pow(1-Re,1.5)}var uN=Date.now(),jv=(Q(1)-ot)/A,dN=l.duration?1e3*l.duration:1e3*jv*.8;function Uv(){var Re=(Date.now()-uN)/dN,bc=lN(Re)*jv;Re<=1?(this._flyToFrame=je(Uv,this),this._move(this.unproject(h.add(p.subtract(h).multiplyBy(cN(bc)/b)),E),this.getScaleZoom(I/Ai(bc),E),{flyTo:!0})):this._move(i,a)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),Uv.call(this),this},flyToBounds:function(i,a){var l=this._getBoundsCenterZoom(i,a);return this.flyTo(l.center,l.zoom,a)},setMaxBounds:function(i){return i=Ne(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var a=this.options.minZoom;return this.options.minZoom=i,this._loaded&&a!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var a=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&a!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,a){this._enforcingBounds=!0;var l=this.getCenter(),h=this._limitCenter(l,this._zoom,Ne(i));return l.equals(h)||this.panTo(h,a),this._enforcingBounds=!1,this},panInside:function(i,a){a=a||{};var l=V(a.paddingTopLeft||a.padding||[0,0]),h=V(a.paddingBottomRight||a.padding||[0,0]),p=this.project(this.getCenter()),g=this.project(i),E=this.getPixelBounds(),I=rt([E.min.add(l),E.max.subtract(h)]),w=I.getSize();if(!I.contains(g)){this._enforcingBounds=!0;var b=g.subtract(I.getCenter()),A=I.extend(g).getSize().subtract(w);p.x+=b.x<0?-A.x:A.x,p.y+=b.y<0?-A.y:A.y,this.panTo(this.unproject(p),a),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=n({animate:!1,pan:!0},i===!0?{animate:!0}:i);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),h=a.divideBy(2).round(),p=l.divideBy(2).round(),g=h.subtract(p);return!g.x&&!g.y?this:(i.animate&&i.pan?this.panBy(g):(i.pan&&this._rawPanBy(g),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=n({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=o(this._handleGeolocationResponse,this),l=o(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,l,i):navigator.geolocation.getCurrentPosition(a,l,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var a=i.code,l=i.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+l+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var a=i.coords.latitude,l=i.coords.longitude,h=new pe(a,l),p=h.toBounds(i.coords.accuracy*2),g=this._locateOptions;if(g.setView){var E=this.getBoundsZoom(p);this.setView(h,g.maxZoom?Math.min(E,g.maxZoom):E)}var I={latlng:h,bounds:p,timestamp:i.timestamp};for(var w in i.coords)typeof i.coords[w]=="number"&&(I[w]=i.coords[w]);this.fire("locationfound",I)}},addHandler:function(i,a){if(!a)return this;var l=this[i]=new a(this);return this._handlers.push(l),this.options[i]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),we(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(nt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)we(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,a){var l="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),h=ae("div",l,a||this._mapPane);return i&&(this._panes[i]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),a=this.unproject(i.getBottomLeft()),l=this.unproject(i.getTopRight());return new it(a,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,a,l){i=Ne(i),l=V(l||[0,0]);var h=this.getZoom()||0,p=this.getMinZoom(),g=this.getMaxZoom(),E=i.getNorthWest(),I=i.getSouthEast(),w=this.getSize().subtract(l),b=rt(this.project(I,h),this.project(E,h)).getSize(),A=M.any3d?this.options.zoomSnap:1,j=w.x/b.x,Q=w.y/b.y,Je=a?Math.max(j,Q):Math.min(j,Q);return h=this.getScaleZoom(Je,h),A&&(h=Math.round(h/(A/100))*(A/100),h=a?Math.ceil(h/A)*A:Math.floor(h/A)*A),Math.max(p,Math.min(g,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new $(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,a){var l=this._getTopLeftPoint(i,a);return new Ie(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,a){var l=this.options.crs;return a=a===void 0?this._zoom:a,l.scale(i)/l.scale(a)},getScaleZoom:function(i,a){var l=this.options.crs;a=a===void 0?this._zoom:a;var h=l.zoom(i*l.scale(a));return isNaN(h)?1/0:h},project:function(i,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(ne(i),a)},unproject:function(i,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(V(i),a)},layerPointToLatLng:function(i){var a=V(i).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(i){var a=this.project(ne(i))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(ne(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(Ne(i))},distance:function(i,a){return this.options.crs.distance(ne(i),ne(a))},containerPointToLayerPoint:function(i){return V(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return V(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var a=this.containerPointToLayerPoint(V(i));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ne(i)))},mouseEventToContainerPoint:function(i){return iv(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var a=this._container=ev(i);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");z(a,"scroll",this._onScroll,this),this._containerId=c(a)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&M.any3d,G(i,"leaflet-container"+(M.touch?" leaflet-touch":"")+(M.retina?" leaflet-retina":"")+(M.ielt9?" leaflet-oldie":"")+(M.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Yo(i,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ae(this._mapPane,new $(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(G(i.markerPane,"leaflet-zoom-hide"),G(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,a,l){Ae(this._mapPane,new $(0,0));var h=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var p=this._zoom!==a;this._moveStart(p,l)._move(i,a)._moveEnd(p),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(i,a){return i&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(i,a,l,h){a===void 0&&(a=this._zoom);var p=this._zoom!==a;return this._zoom=a,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),h?l&&l.pinch&&this.fire("zoom",l):((p||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return nt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){Ae(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[c(this._container)]=this;var a=i?ve:z;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),M.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){nt(this._resizeRequest),this._resizeRequest=je(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,a){for(var l=[],h,p=a==="mouseout"||a==="mouseover",g=i.target||i.srcElement,E=!1;g;){if(h=this._targets[c(g)],h&&(a==="click"||a==="preclick")&&this._draggableMoved(h)){E=!0;break}if(h&&h.listens(a,!0)&&(p&&!Yd(g,i)||(l.push(h),p))||g===this._container)break;g=g.parentNode}return!l.length&&!E&&!p&&this.listens(a,!0)&&(l=[this]),l},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var a=i.target||i.srcElement;if(!(!this._loaded||a._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(a))){var l=i.type;l==="mousedown"&&zd(a),this._fireDOMEvent(i,l)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,a,l){if(i.type==="click"){var h=n({},i);h.type="preclick",this._fireDOMEvent(h,h.type,l)}var p=this._findEventTargets(i,a);if(l){for(var g=[],E=0;E<l.length;E++)l[E].listens(a,!0)&&g.push(l[E]);p=g.concat(p)}if(p.length){a==="contextmenu"&&$e(i);var I=p[0],w={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var b=I.getLatLng&&(!I._radius||I._radius<=10);w.containerPoint=b?this.latLngToContainerPoint(I.getLatLng()):this.mouseEventToContainerPoint(i),w.layerPoint=this.containerPointToLayerPoint(w.containerPoint),w.latlng=b?I.getLatLng():this.layerPointToLatLng(w.layerPoint)}for(E=0;E<p.length;E++)if(p[E].fire(a,w,!0),w.originalEvent._stopped||p[E].options.bubblingMouseEvents===!1&&Fe(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,a=this._handlers.length;i<a;i++)this._handlers[i].disable()},whenReady:function(i,a){return this._loaded?i.call(a||this,{target:this}):this.on("load",i,a),this},_getMapPanePos:function(){return Er(this._mapPane)||new $(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,a){var l=i&&a!==void 0?this._getNewPixelOrigin(i,a):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,a){var l=this.getSize()._divideBy(2);return this.project(i,a)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,a,l){var h=this._getNewPixelOrigin(l,a);return this.project(i,a)._subtract(h)},_latLngBoundsToNewLayerBounds:function(i,a,l){var h=this._getNewPixelOrigin(l,a);return rt([this.project(i.getSouthWest(),a)._subtract(h),this.project(i.getNorthWest(),a)._subtract(h),this.project(i.getSouthEast(),a)._subtract(h),this.project(i.getNorthEast(),a)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,a,l){if(!l)return i;var h=this.project(i,a),p=this.getSize().divideBy(2),g=new Ie(h.subtract(p),h.add(p)),E=this._getBoundsOffset(g,l,a);return Math.abs(E.x)<=1&&Math.abs(E.y)<=1?i:this.unproject(h.add(E),a)},_limitOffset:function(i,a){if(!a)return i;var l=this.getPixelBounds(),h=new Ie(l.min.add(i),l.max.add(i));return i.add(this._getBoundsOffset(h,a))},_getBoundsOffset:function(i,a,l){var h=rt(this.project(a.getNorthEast(),l),this.project(a.getSouthWest(),l)),p=h.min.subtract(i.min),g=h.max.subtract(i.max),E=this._rebound(p.x,-g.x),I=this._rebound(p.y,-g.y);return new $(E,I)},_rebound:function(i,a){return i+a>0?Math.round(i-a)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(a))},_limitZoom:function(i){var a=this.getMinZoom(),l=this.getMaxZoom(),h=M.any3d?this.options.zoomSnap:1;return h&&(i=Math.round(i/h)*h),Math.max(a,Math.min(l,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Se(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,a){var l=this._getCenterOffset(i)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,a),!0)},_createAnimProxy:function(){var i=this._proxy=ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(a){var l=Fd,h=this._proxy.style[l];yr(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),h===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){we(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),a=this.getZoom();yr(this._proxy,this.project(i,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,a,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(a),p=this._getCenterOffset(i)._divideBy(1-1/h);return l.animate!==!0&&!this.getSize().contains(p)?!1:(je(function(){this._moveStart(!0,l.noMoveStart||!1)._animateZoom(i,a,!0)},this),!0)},_animateZoom:function(i,a,l,h){this._mapPane&&(l&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=a,G(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:a,noUpdate:h}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Se(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function CD(i,a){return new re(i,a)}var Ot=yn.extend({options:{position:"topright"},initialize:function(i){y(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var a=this._map;return a&&a.removeControl(this),this.options.position=i,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var a=this._container=this.onAdd(i),l=this.getPosition(),h=i._controlCorners[l];return G(a,"leaflet-control"),l.indexOf("bottom")!==-1?h.insertBefore(a,h.firstChild):h.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(we(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),ts=function(i){return new Ot(i)};re.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},a="leaflet-",l=this._controlContainer=ae("div",a+"control-container",this._container);function h(p,g){var E=a+p+" "+a+g;i[p+g]=ae("div",E,l)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)we(this._controlCorners[i]);we(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var av=Ot.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,a,l,h){return l<h?-1:h<l?1:0}},initialize:function(i,a,l){y(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var h in i)this._addLayer(i[h],h);for(h in a)this._addLayer(a[h],h,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Ot.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,a){return this._addLayer(i,a),this._map?this._update():this},addOverlay:function(i,a){return this._addLayer(i,a,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var a=this._getLayer(c(i));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){G(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(G(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):Se(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Se(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",a=this._container=ae("div",i),l=this.options.collapsed;a.setAttribute("aria-haspopup",!0),es(a),Kd(a);var h=this._section=ae("section",i+"-list");l&&(this._map.on("click",this.collapse,this),z(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=ae("a",i+"-toggle",a);p.href="#",p.title="Layers",p.setAttribute("role","button"),z(p,{keydown:function(g){g.keyCode===13&&this._expandSafely()},click:function(g){$e(g),this._expandSafely()}},this),l||this.expand(),this._baseLayersList=ae("div",i+"-base",h),this._separator=ae("div",i+"-separator",h),this._overlaysList=ae("div",i+"-overlays",h),a.appendChild(h)},_getLayer:function(i){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&c(this._layers[a].layer)===i)return this._layers[a]},_addLayer:function(i,a,l){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:a,overlay:l}),this.options.sortLayers&&this._layers.sort(o(function(h,p){return this.options.sortFunction(h.layer,p.layer,h.name,p.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;cc(this._baseLayersList),cc(this._overlaysList),this._layerControlInputs=[];var i,a,l,h,p=0;for(l=0;l<this._layers.length;l++)h=this._layers[l],this._addItem(h),a=a||h.overlay,i=i||!h.overlay,p+=h.overlay?0:1;return this.options.hideSingleBase&&(i=i&&p>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=a&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var a=this._getLayer(c(i.target)),l=a.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;l&&this._map.fire(l,a)},_createRadioElement:function(i,a){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(a?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=l,h.firstChild},_addItem:function(i){var a=document.createElement("label"),l=this._map.hasLayer(i.layer),h;i.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=l):h=this._createRadioElement("leaflet-base-layers_"+c(this),l),this._layerControlInputs.push(h),h.layerId=c(i.layer),z(h,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+i.name;var g=document.createElement("span");a.appendChild(g),g.appendChild(h),g.appendChild(p);var E=i.overlay?this._overlaysList:this._baseLayersList;return E.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,a,l,h=[],p=[];this._handlingClick=!0;for(var g=i.length-1;g>=0;g--)a=i[g],l=this._getLayer(a.layerId).layer,a.checked?h.push(l):a.checked||p.push(l);for(g=0;g<p.length;g++)this._map.hasLayer(p[g])&&this._map.removeLayer(p[g]);for(g=0;g<h.length;g++)this._map.hasLayer(h[g])||this._map.addLayer(h[g]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,a,l,h=this._map.getZoom(),p=i.length-1;p>=0;p--)a=i[p],l=this._getLayer(a.layerId).layer,a.disabled=l.options.minZoom!==void 0&&h<l.options.minZoom||l.options.maxZoom!==void 0&&h>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,z(i,"click",$e),this.expand();var a=this;setTimeout(function(){ve(i,"click",$e),a._preventClick=!1})}}),SD=function(i,a,l){return new av(i,a,l)},Qd=Ot.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var a="leaflet-control-zoom",l=ae("div",a+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,a+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,a+"-out",l,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,a,l,h,p){var g=ae("a",l,h);return g.innerHTML=i,g.href="#",g.title=a,g.setAttribute("role","button"),g.setAttribute("aria-label",a),es(g),z(g,"click",wr),z(g,"click",p,this),z(g,"click",this._refocusOnMap,this),g},_updateDisabled:function(){var i=this._map,a="leaflet-disabled";Se(this._zoomInButton,a),Se(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(G(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(G(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});re.mergeOptions({zoomControl:!0}),re.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qd,this.addControl(this.zoomControl))});var DD=function(i){return new Qd(i)},cv=Ot.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var a="leaflet-control-scale",l=ae("div",a),h=this.options;return this._addScales(h,a+"-line",l),i.on(h.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),l},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,a,l){i.metric&&(this._mScale=ae("div",a,l)),i.imperial&&(this._iScale=ae("div",a,l))},_update:function(){var i=this._map,a=i.getSize().y/2,l=i.distance(i.containerPointToLatLng([0,a]),i.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(l)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var a=this._getRoundNum(i),l=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,l,a/i)},_updateImperial:function(i){var a=i*3.2808399,l,h,p;a>5280?(l=a/5280,h=this._getRoundNum(l),this._updateScale(this._iScale,h+" mi",h/l)):(p=this._getRoundNum(a),this._updateScale(this._iScale,p+" ft",p/a))},_updateScale:function(i,a,l){i.style.width=Math.round(this.options.maxWidth*l)+"px",i.innerHTML=a},_getRoundNum:function(i){var a=Math.pow(10,(Math.floor(i)+"").length-1),l=i/a;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,a*l}}),ND=function(i){return new cv(i)},AD='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Jd=Ot.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(M.inlineSvg?AD+" ":"")+"Leaflet</a>"},initialize:function(i){y(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=ae("div","leaflet-control-attribution"),es(this._container);for(var a in i._layers)i._layers[a].getAttribution&&this.addAttribution(i._layers[a].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var a in this._attributions)this._attributions[a]&&i.push(a);var l=[];this.options.prefix&&l.push(this.options.prefix),i.length&&l.push(i.join(", ")),this._container.innerHTML=l.join(' <span aria-hidden="true">|</span> ')}}});re.mergeOptions({attributionControl:!0}),re.addInitHook(function(){this.options.attributionControl&&new Jd().addTo(this)});var RD=function(i){return new Jd(i)};Ot.Layers=av,Ot.Zoom=Qd,Ot.Scale=cv,Ot.Attribution=Jd,ts.layers=SD,ts.zoom=DD,ts.scale=ND,ts.attribution=RD;var tn=yn.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});tn.addTo=function(i,a){return i.addHandler(a,this),this};var MD={Events:vt},lv=M.touch?"touchstart mousedown":"mousedown",qn=qo.extend({options:{clickTolerance:3},initialize:function(i,a,l,h){y(this,h),this._element=i,this._dragStartTarget=a||i,this._preventOutline=l},enable:function(){this._enabled||(z(this._dragStartTarget,lv,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(qn._dragging===this&&this.finishDrag(!0),ve(this._dragStartTarget,lv,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!jd(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){qn._dragging===this&&this.finishDrag();return}if(!(qn._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(qn._dragging=this,this._preventOutline&&zd(this._element),Bd(),Qo(),!this._moving)){this.fire("down");var a=i.touches?i.touches[0]:i,l=tv(this._element);this._startPoint=new $(a.clientX,a.clientY),this._startPos=Er(this._element),this._parentScale=Wd(l);var h=i.type==="mousedown";z(document,h?"mousemove":"touchmove",this._onMove,this),z(document,h?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var a=i.touches&&i.touches.length===1?i.touches[0]:i,l=new $(a.clientX,a.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,$e(i),this._moved||(this.fire("dragstart"),this._moved=!0,G(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),G(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),Ae(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){Se(document.body,"leaflet-dragging"),this._lastTarget&&(Se(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ve(document,"mousemove touchmove",this._onMove,this),ve(document,"mouseup touchend touchcancel",this._onUp,this),Hd(),Jo();var a=this._moved&&this._moving;this._moving=!1,qn._dragging=!1,a&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function uv(i,a,l){var h,p=[1,4,2,8],g,E,I,w,b,A,j,Q;for(g=0,A=i.length;g<A;g++)i[g]._code=Tr(i[g],a);for(I=0;I<4;I++){for(j=p[I],h=[],g=0,A=i.length,E=A-1;g<A;E=g++)w=i[g],b=i[E],w._code&j?b._code&j||(Q=fc(b,w,j,a,l),Q._code=Tr(Q,a),h.push(Q)):(b._code&j&&(Q=fc(b,w,j,a,l),Q._code=Tr(Q,a),h.push(Q)),h.push(w));i=h}return i}function dv(i,a){var l,h,p,g,E,I,w,b,A;if(!i||i.length===0)throw new Error("latlngs not passed");St(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var j=ne([0,0]),Q=Ne(i),Je=Q.getNorthWest().distanceTo(Q.getSouthWest())*Q.getNorthEast().distanceTo(Q.getNorthWest());Je<1700&&(j=Xd(i));var Ue=i.length,Dt=[];for(l=0;l<Ue;l++){var ot=ne(i[l]);Dt.push(a.project(ne([ot.lat-j.lat,ot.lng-j.lng])))}for(I=w=b=0,l=0,h=Ue-1;l<Ue;h=l++)p=Dt[l],g=Dt[h],E=p.y*g.x-g.y*p.x,w+=(p.x+g.x)*E,b+=(p.y+g.y)*E,I+=E*3;I===0?A=Dt[0]:A=[w/I,b/I];var Ai=a.unproject(V(A));return ne([Ai.lat+j.lat,Ai.lng+j.lng])}function Xd(i){for(var a=0,l=0,h=0,p=0;p<i.length;p++){var g=ne(i[p]);a+=g.lat,l+=g.lng,h++}return ne([a/h,l/h])}var PD={__proto__:null,clipPolygon:uv,polygonCenter:dv,centroid:Xd};function hv(i,a){if(!a||!i.length)return i.slice();var l=a*a;return i=OD(i,l),i=kD(i,l),i}function fv(i,a,l){return Math.sqrt(ns(i,a,l,!0))}function xD(i,a,l){return ns(i,a,l)}function kD(i,a){var l=i.length,h=typeof Uint8Array<"u"?Uint8Array:Array,p=new h(l);p[0]=p[l-1]=1,eh(i,p,a,0,l-1);var g,E=[];for(g=0;g<l;g++)p[g]&&E.push(i[g]);return E}function eh(i,a,l,h,p){var g=0,E,I,w;for(I=h+1;I<=p-1;I++)w=ns(i[I],i[h],i[p],!0),w>g&&(E=I,g=w);g>l&&(a[E]=1,eh(i,a,l,h,E),eh(i,a,l,E,p))}function OD(i,a){for(var l=[i[0]],h=1,p=0,g=i.length;h<g;h++)LD(i[h],i[p])>a&&(l.push(i[h]),p=h);return p<g-1&&l.push(i[g-1]),l}var pv;function gv(i,a,l,h,p){var g=h?pv:Tr(i,l),E=Tr(a,l),I,w,b;for(pv=E;;){if(!(g|E))return[i,a];if(g&E)return!1;I=g||E,w=fc(i,a,I,l,p),b=Tr(w,l),I===g?(i=w,g=b):(a=w,E=b)}}function fc(i,a,l,h,p){var g=a.x-i.x,E=a.y-i.y,I=h.min,w=h.max,b,A;return l&8?(b=i.x+g*(w.y-i.y)/E,A=w.y):l&4?(b=i.x+g*(I.y-i.y)/E,A=I.y):l&2?(b=w.x,A=i.y+E*(w.x-i.x)/g):l&1&&(b=I.x,A=i.y+E*(I.x-i.x)/g),new $(b,A,p)}function Tr(i,a){var l=0;return i.x<a.min.x?l|=1:i.x>a.max.x&&(l|=2),i.y<a.min.y?l|=4:i.y>a.max.y&&(l|=8),l}function LD(i,a){var l=a.x-i.x,h=a.y-i.y;return l*l+h*h}function ns(i,a,l,h){var p=a.x,g=a.y,E=l.x-p,I=l.y-g,w=E*E+I*I,b;return w>0&&(b=((i.x-p)*E+(i.y-g)*I)/w,b>1?(p=l.x,g=l.y):b>0&&(p+=E*b,g+=I*b)),E=i.x-p,I=i.y-g,h?E*E+I*I:new $(p,g)}function St(i){return!x(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function mv(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),St(i)}function _v(i,a){var l,h,p,g,E,I,w,b;if(!i||i.length===0)throw new Error("latlngs not passed");St(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var A=ne([0,0]),j=Ne(i),Q=j.getNorthWest().distanceTo(j.getSouthWest())*j.getNorthEast().distanceTo(j.getNorthWest());Q<1700&&(A=Xd(i));var Je=i.length,Ue=[];for(l=0;l<Je;l++){var Dt=ne(i[l]);Ue.push(a.project(ne([Dt.lat-A.lat,Dt.lng-A.lng])))}for(l=0,h=0;l<Je-1;l++)h+=Ue[l].distanceTo(Ue[l+1])/2;if(h===0)b=Ue[0];else for(l=0,g=0;l<Je-1;l++)if(E=Ue[l],I=Ue[l+1],p=E.distanceTo(I),g+=p,g>h){w=(g-h)/p,b=[I.x-w*(I.x-E.x),I.y-w*(I.y-E.y)];break}var ot=a.unproject(V(b));return ne([ot.lat+A.lat,ot.lng+A.lng])}var FD={__proto__:null,simplify:hv,pointToSegmentDistance:fv,closestPointOnSegment:xD,clipSegment:gv,_getEdgeIntersection:fc,_getBitCode:Tr,_sqClosestPointOnSegment:ns,isFlat:St,_flat:mv,polylineCenter:_v},th={project:function(i){return new $(i.lng,i.lat)},unproject:function(i){return new pe(i.y,i.x)},bounds:new Ie([-180,-90],[180,90])},nh={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var a=Math.PI/180,l=this.R,h=i.lat*a,p=this.R_MINOR/l,g=Math.sqrt(1-p*p),E=g*Math.sin(h),I=Math.tan(Math.PI/4-h/2)/Math.pow((1-E)/(1+E),g/2);return h=-l*Math.log(Math.max(I,1e-10)),new $(i.lng*a*l,h)},unproject:function(i){for(var a=180/Math.PI,l=this.R,h=this.R_MINOR/l,p=Math.sqrt(1-h*h),g=Math.exp(-i.y/l),E=Math.PI/2-2*Math.atan(g),I=0,w=.1,b;I<15&&Math.abs(w)>1e-7;I++)b=p*Math.sin(E),b=Math.pow((1-b)/(1+b),p/2),w=Math.PI/2-2*Math.atan(g*b)-E,E+=w;return new pe(E*a,i.x*a/l)}},jD={__proto__:null,LonLat:th,Mercator:nh,SphericalMercator:Nd},UD=n({},Wn,{code:"EPSG:3395",projection:nh,transformation:(function(){var i=.5/(Math.PI*nh.R);return Go(i,.5,-i,.5)})()}),vv=n({},Wn,{code:"EPSG:4326",projection:th,transformation:Go(1/180,1,-1/180,.5)}),VD=n({},En,{projection:th,transformation:Go(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,a){var l=a.lng-i.lng,h=a.lat-i.lat;return Math.sqrt(l*l+h*h)},infinite:!0});En.Earth=Wn,En.EPSG3395=UD,En.EPSG3857=Rd,En.EPSG900913=qS,En.EPSG4326=vv,En.Simple=VD;var Lt=qo.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[c(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[c(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var a=i.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var l=this.getEvents();a.on(l,this),this.once("remove",function(){a.off(l,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});re.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var a=c(i);return this._layers[a]?this:(this._layers[a]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var a=c(i);return this._layers[a]?(this._loaded&&i.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return c(i)in this._layers},eachLayer:function(i,a){for(var l in this._layers)i.call(a,this._layers[l]);return this},_addLayers:function(i){i=i?x(i)?i:[i]:[];for(var a=0,l=i.length;a<l;a++)this.addLayer(i[a])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[c(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var a=c(i);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,a=-1/0,l=this._getZoomSpan();for(var h in this._zoomBoundLayers){var p=this._zoomBoundLayers[h].options;i=p.minZoom===void 0?i:Math.min(i,p.minZoom),a=p.maxZoom===void 0?a:Math.max(a,p.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=i===1/0?void 0:i,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var bi=Lt.extend({initialize:function(i,a){y(this,a),this._layers={};var l,h;if(i)for(l=0,h=i.length;l<h;l++)this.addLayer(i[l])},addLayer:function(i){var a=this.getLayerId(i);return this._layers[a]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var a=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(i){var a=typeof i=="number"?i:this.getLayerId(i);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var a=Array.prototype.slice.call(arguments,1),l,h;for(l in this._layers)h=this._layers[l],h[i]&&h[i].apply(h,a);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,a){for(var l in this._layers)i.call(a,this._layers[l]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return c(i)}}),BD=function(i,a){return new bi(i,a)},In=bi.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),bi.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),bi.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new it;for(var a in this._layers){var l=this._layers[a];i.extend(l.getBounds?l.getBounds():l.getLatLng())}return i}}),HD=function(i,a){return new In(i,a)},Ci=yn.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){y(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,a){var l=this._getIconUrl(i);if(!l){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(l,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(h,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),h},_setIconStyles:function(i,a){var l=this.options,h=l[a+"Size"];typeof h=="number"&&(h=[h,h]);var p=V(h),g=V(a==="shadow"&&l.shadowAnchor||l.iconAnchor||p&&p.divideBy(2,!0));i.className="leaflet-marker-"+a+" "+(l.className||""),g&&(i.style.marginLeft=-g.x+"px",i.style.marginTop=-g.y+"px"),p&&(i.style.width=p.x+"px",i.style.height=p.y+"px")},_createImg:function(i,a){return a=a||document.createElement("img"),a.src=i,a},_getIconUrl:function(i){return M.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function $D(i){return new Ci(i)}var rs=Ci.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof rs.imagePath!="string"&&(rs.imagePath=this._detectIconPath()),(this.options.imagePath||rs.imagePath)+Ci.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var a=function(l,h,p){var g=h.exec(l);return g&&g[p]};return i=a(i,/^url\((['"])?(.+)\1\)$/,2),i&&a(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=ae("div","leaflet-default-icon-path",document.body),a=Yo(i,"background-image")||Yo(i,"backgroundImage");if(document.body.removeChild(i),a=this._stripUrl(a),a)return a;var l=document.querySelector('link[href$="leaflet.css"]');return l?l.href.substring(0,l.href.length-11-1):""}}),yv=tn.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new qn(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),G(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Se(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var a=this._marker,l=a._map,h=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,g=Er(a._icon),E=l.getPixelBounds(),I=l.getPixelOrigin(),w=rt(E.min._subtract(I).add(p),E.max._subtract(I).subtract(p));if(!w.contains(g)){var b=V((Math.max(w.max.x,g.x)-w.max.x)/(E.max.x-w.max.x)-(Math.min(w.min.x,g.x)-w.min.x)/(E.min.x-w.min.x),(Math.max(w.max.y,g.y)-w.max.y)/(E.max.y-w.max.y)-(Math.min(w.min.y,g.y)-w.min.y)/(E.min.y-w.min.y)).multiplyBy(h);l.panBy(b,{animate:!1}),this._draggable._newPos._add(b),this._draggable._startPos._add(b),Ae(a._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=je(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(nt(this._panRequest),this._panRequest=je(this._adjustPan.bind(this,i)))},_onDrag:function(i){var a=this._marker,l=a._shadow,h=Er(a._icon),p=a._map.layerPointToLatLng(h);l&&Ae(l,h),a._latlng=p,i.latlng=p,i.oldLatLng=this._oldLatLng,a.fire("move",i).fire("drag",i)},_onDragEnd:function(i){nt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),pc=Lt.extend({options:{icon:new rs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,a){y(this,a),this._latlng=ne(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var a=this._latlng;return this._latlng=ne(i),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=i.icon.createIcon(this._icon),h=!1;l!==this._icon&&(this._icon&&this._removeIcon(),h=!0,i.title&&(l.title=i.title),l.tagName==="IMG"&&(l.alt=i.alt||"")),G(l,a),i.keyboard&&(l.tabIndex="0",l.setAttribute("role","button")),this._icon=l,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&z(l,"focus",this._panOnFocus,this);var p=i.icon.createShadow(this._shadow),g=!1;p!==this._shadow&&(this._removeShadow(),g=!0),p&&(G(p,a),p.alt=""),this._shadow=p,i.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&g&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ve(this._icon,"focus",this._panOnFocus,this),we(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&we(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&Ae(this._icon,i),this._shadow&&Ae(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(G(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),yv)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new yv(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Ct(this._icon,i),this._shadow&&Ct(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var a=this.options.icon.options,l=a.iconSize?V(a.iconSize):V(0,0),h=a.iconAnchor?V(a.iconAnchor):V(0,0);i.panInside(this._latlng,{paddingTopLeft:h,paddingBottomRight:l.subtract(h)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function zD(i,a){return new pc(i,a)}var Gn=Lt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return y(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),gc=Gn.extend({options:{fill:!0,radius:10},initialize:function(i,a){y(this,a),this._latlng=ne(i),this._radius=this.options.radius},setLatLng:function(i){var a=this._latlng;return this._latlng=ne(i),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var a=i&&i.radius||this._radius;return Gn.prototype.setStyle.call(this,i),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,a=this._radiusY||i,l=this._clickTolerance(),h=[i+l,a+l];this._pxBounds=new Ie(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function WD(i,a){return new gc(i,a)}var rh=gc.extend({initialize:function(i,a,l){if(typeof a=="number"&&(a=n({},l,{radius:a})),y(this,a),this._latlng=ne(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new it(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Gn.prototype.setStyle,_project:function(){var i=this._latlng.lng,a=this._latlng.lat,l=this._map,h=l.options.crs;if(h.distance===Wn.distance){var p=Math.PI/180,g=this._mRadius/Wn.R/p,E=l.project([a+g,i]),I=l.project([a-g,i]),w=E.add(I).divideBy(2),b=l.unproject(w).lat,A=Math.acos((Math.cos(g*p)-Math.sin(a*p)*Math.sin(b*p))/(Math.cos(a*p)*Math.cos(b*p)))/p;(isNaN(A)||A===0)&&(A=g/Math.cos(Math.PI/180*a)),this._point=w.subtract(l.getPixelOrigin()),this._radius=isNaN(A)?0:w.x-l.project([b,i-A]).x,this._radiusY=w.y-E.y}else{var j=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(j).x}this._updateBounds()}});function qD(i,a,l){return new rh(i,a,l)}var wn=Gn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,a){y(this,a),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var a=1/0,l=null,h=ns,p,g,E=0,I=this._parts.length;E<I;E++)for(var w=this._parts[E],b=1,A=w.length;b<A;b++){p=w[b-1],g=w[b];var j=h(i,p,g,!0);j<a&&(a=j,l=h(i,p,g))}return l&&(l.distance=Math.sqrt(a)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _v(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,a){return a=a||this._defaultShape(),i=ne(i),a.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new it,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return St(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var a=[],l=St(i),h=0,p=i.length;h<p;h++)l?(a[h]=ne(i[h]),this._bounds.extend(a[h])):a[h]=this._convertLatLngs(i[h]);return a},_project:function(){var i=new Ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),a=new $(i,i);this._rawPxBounds&&(this._pxBounds=new Ie([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(i,a,l){var h=i[0]instanceof pe,p=i.length,g,E;if(h){for(E=[],g=0;g<p;g++)E[g]=this._map.latLngToLayerPoint(i[g]),l.extend(E[g]);a.push(E)}else for(g=0;g<p;g++)this._projectLatlngs(i[g],a,l)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,l,h,p,g,E,I,w;for(l=0,p=0,g=this._rings.length;l<g;l++)for(w=this._rings[l],h=0,E=w.length;h<E-1;h++)I=gv(w[h],w[h+1],i,h,!0),I&&(a[p]=a[p]||[],a[p].push(I[0]),(I[1]!==w[h+1]||h===E-2)&&(a[p].push(I[1]),p++))}},_simplifyPoints:function(){for(var i=this._parts,a=this.options.smoothFactor,l=0,h=i.length;l<h;l++)i[l]=hv(i[l],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,a){var l,h,p,g,E,I,w=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(l=0,g=this._parts.length;l<g;l++)for(I=this._parts[l],h=0,E=I.length,p=E-1;h<E;p=h++)if(!(!a&&h===0)&&fv(i,I[p],I[h])<=w)return!0;return!1}});function GD(i,a){return new wn(i,a)}wn._flat=mv;var Si=wn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return dv(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var a=wn.prototype._convertLatLngs.call(this,i),l=a.length;return l>=2&&a[0]instanceof pe&&a[0].equals(a[l-1])&&a.pop(),a},_setLatLngs:function(i){wn.prototype._setLatLngs.call(this,i),St(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return St(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,a=this.options.weight,l=new $(a,a);if(i=new Ie(i.min.subtract(l),i.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,p=this._rings.length,g;h<p;h++)g=uv(this._rings[h],i,!0),g.length&&this._parts.push(g)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var a=!1,l,h,p,g,E,I,w,b;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(g=0,w=this._parts.length;g<w;g++)for(l=this._parts[g],E=0,b=l.length,I=b-1;E<b;I=E++)h=l[E],p=l[I],h.y>i.y!=p.y>i.y&&i.x<(p.x-h.x)*(i.y-h.y)/(p.y-h.y)+h.x&&(a=!a);return a||wn.prototype._containsPoint.call(this,i,!0)}});function ZD(i,a){return new Si(i,a)}var Tn=In.extend({initialize:function(i,a){y(this,a),this._layers={},i&&this.addData(i)},addData:function(i){var a=x(i)?i:i.features,l,h,p;if(a){for(l=0,h=a.length;l<h;l++)p=a[l],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var g=this.options;if(g.filter&&!g.filter(i))return this;var E=mc(i,g);return E?(E.feature=yc(i),E.defaultOptions=E.options,this.resetStyle(E),g.onEachFeature&&g.onEachFeature(i,E),this.addLayer(E)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=n({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(a){this._setLayerStyle(a,i)},this)},_setLayerStyle:function(i,a){i.setStyle&&(typeof a=="function"&&(a=a(i.feature)),i.setStyle(a))}});function mc(i,a){var l=i.type==="Feature"?i.geometry:i,h=l?l.coordinates:null,p=[],g=a&&a.pointToLayer,E=a&&a.coordsToLatLng||ih,I,w,b,A;if(!h&&!l)return null;switch(l.type){case"Point":return I=E(h),Ev(g,i,I,a);case"MultiPoint":for(b=0,A=h.length;b<A;b++)I=E(h[b]),p.push(Ev(g,i,I,a));return new In(p);case"LineString":case"MultiLineString":return w=_c(h,l.type==="LineString"?0:1,E),new wn(w,a);case"Polygon":case"MultiPolygon":return w=_c(h,l.type==="Polygon"?1:2,E),new Si(w,a);case"GeometryCollection":for(b=0,A=l.geometries.length;b<A;b++){var j=mc({geometry:l.geometries[b],type:"Feature",properties:i.properties},a);j&&p.push(j)}return new In(p);case"FeatureCollection":for(b=0,A=l.features.length;b<A;b++){var Q=mc(l.features[b],a);Q&&p.push(Q)}return new In(p);default:throw new Error("Invalid GeoJSON object.")}}function Ev(i,a,l,h){return i?i(a,l):new pc(l,h&&h.markersInheritOptions&&h)}function ih(i){return new pe(i[1],i[0],i[2])}function _c(i,a,l){for(var h=[],p=0,g=i.length,E;p<g;p++)E=a?_c(i[p],a-1,l):(l||ih)(i[p]),h.push(E);return h}function oh(i,a){return i=ne(i),i.alt!==void 0?[m(i.lng,a),m(i.lat,a),m(i.alt,a)]:[m(i.lng,a),m(i.lat,a)]}function vc(i,a,l,h){for(var p=[],g=0,E=i.length;g<E;g++)p.push(a?vc(i[g],St(i[g])?0:a-1,l,h):oh(i[g],h));return!a&&l&&p.length>0&&p.push(p[0].slice()),p}function Di(i,a){return i.feature?n({},i.feature,{geometry:a}):yc(a)}function yc(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var sh={toGeoJSON:function(i){return Di(this,{type:"Point",coordinates:oh(this.getLatLng(),i)})}};pc.include(sh),rh.include(sh),gc.include(sh),wn.include({toGeoJSON:function(i){var a=!St(this._latlngs),l=vc(this._latlngs,a?1:0,!1,i);return Di(this,{type:(a?"Multi":"")+"LineString",coordinates:l})}}),Si.include({toGeoJSON:function(i){var a=!St(this._latlngs),l=a&&!St(this._latlngs[0]),h=vc(this._latlngs,l?2:a?1:0,!0,i);return a||(h=[h]),Di(this,{type:(l?"Multi":"")+"Polygon",coordinates:h})}}),bi.include({toMultiPoint:function(i){var a=[];return this.eachLayer(function(l){a.push(l.toGeoJSON(i).geometry.coordinates)}),Di(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(i){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(i);var l=a==="GeometryCollection",h=[];return this.eachLayer(function(p){if(p.toGeoJSON){var g=p.toGeoJSON(i);if(l)h.push(g.geometry);else{var E=yc(g);E.type==="FeatureCollection"?h.push.apply(h,E.features):h.push(E)}}}),l?Di(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function Iv(i,a){return new Tn(i,a)}var KD=Iv,Ec=Lt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,a,l){this._url=i,this._bounds=Ne(a),y(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(G(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){we(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&wi(this._image),this},bringToBack:function(){return this._map&&Ti(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=Ne(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",a=this._image=i?this._url:ae("img");if(G(a,"leaflet-image-layer"),this._zoomAnimated&&G(a,"leaflet-zoom-animated"),this.options.className&&G(a,this.options.className),a.onselectstart=f,a.onmousemove=f,a.onload=o(this.fire,this,"load"),a.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(i){var a=this._map.getZoomScale(i.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;yr(this._image,l,a)},_reset:function(){var i=this._image,a=new Ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=a.getSize();Ae(i,a.min),i.style.width=l.x+"px",i.style.height=l.y+"px"},_updateOpacity:function(){Ct(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),YD=function(i,a,l){return new Ec(i,a,l)},wv=Ec.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",a=this._image=i?this._url:ae("video");if(G(a,"leaflet-image-layer"),this._zoomAnimated&&G(a,"leaflet-zoom-animated"),this.options.className&&G(a,this.options.className),a.onselectstart=f,a.onmousemove=f,a.onloadeddata=o(this.fire,this,"load"),i){for(var l=a.getElementsByTagName("source"),h=[],p=0;p<l.length;p++)h.push(l[p].src);this._url=l.length>0?h:[a.src];return}x(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var g=0;g<this._url.length;g++){var E=ae("source");E.src=this._url[g],a.appendChild(E)}}});function QD(i,a,l){return new wv(i,a,l)}var Tv=Ec.extend({_initImage:function(){var i=this._image=this._url;G(i,"leaflet-image-layer"),this._zoomAnimated&&G(i,"leaflet-zoom-animated"),this.options.className&&G(i,this.options.className),i.onselectstart=f,i.onmousemove=f}});function JD(i,a,l){return new Tv(i,a,l)}var nn=Lt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,a){i&&(i instanceof pe||x(i))?(this._latlng=ne(i),y(this,a)):(y(this,i),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Ct(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Ct(this._container,1),this.bringToFront(),this.options.interactive&&(G(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Ct(this._container,0),this._removeTimeout=setTimeout(o(we,void 0,this._container),200)):we(this._container),this.options.interactive&&(Se(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=ne(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&wi(this._container),this},bringToBack:function(){return this._map&&Ti(this._container),this},_prepareOpen:function(i){var a=this._source;if(!a._map)return!1;if(a instanceof In){a=null;var l=this._source._layers;for(var h in l)if(l[h]._map){a=l[h];break}if(!a)return!1;this._source=a}if(!i)if(a.getCenter)i=a.getCenter();else if(a.getLatLng)i=a.getLatLng();else if(a.getBounds)i=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")i.innerHTML=a;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),a=V(this.options.offset),l=this._getAnchor();this._zoomAnimated?Ae(this._container,i.add(l)):a=a.add(i).add(l);var h=this._containerBottom=-a.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=h+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});re.include({_initOverlay:function(i,a,l,h){var p=a;return p instanceof i||(p=new i(h).setContent(a)),l&&p.setLatLng(l),p}}),Lt.include({_initOverlay:function(i,a,l,h){var p=l;return p instanceof i?(y(p,h),p._source=this):(p=a&&!h?a:new i(h,this),p.setContent(l)),p}});var Ic=nn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,nn.prototype.openOn.call(this,i)},onAdd:function(i){nn.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Gn||this._source.on("preclick",Ir))},onRemove:function(i){nn.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Gn||this._source.off("preclick",Ir))},getEvents:function(){var i=nn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",a=this._container=ae("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=ae("div",i+"-content-wrapper",a);if(this._contentNode=ae("div",i+"-content",l),es(a),Kd(this._contentNode),z(a,"contextmenu",Ir),this._tipContainer=ae("div",i+"-tip-container",a),this._tip=ae("div",i+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=ae("a",i+"-close-button",a);h.setAttribute("role","button"),h.setAttribute("aria-label","Close popup"),h.href="#close",h.innerHTML='<span aria-hidden="true">&#215;</span>',z(h,"click",function(p){$e(p),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,a=i.style;a.width="",a.whiteSpace="nowrap";var l=i.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),a.width=l+1+"px",a.whiteSpace="",a.height="";var h=i.offsetHeight,p=this.options.maxHeight,g="leaflet-popup-scrolled";p&&h>p?(a.height=p+"px",G(i,g)):Se(i,g),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),l=this._getAnchor();Ae(this._container,a.add(l))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,a=parseInt(Yo(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+a,h=this._containerWidth,p=new $(this._containerLeft,-l-this._containerBottom);p._add(Er(this._container));var g=i.layerPointToContainerPoint(p),E=V(this.options.autoPanPadding),I=V(this.options.autoPanPaddingTopLeft||E),w=V(this.options.autoPanPaddingBottomRight||E),b=i.getSize(),A=0,j=0;g.x+h+w.x>b.x&&(A=g.x+h-b.x+w.x),g.x-A-I.x<0&&(A=g.x-I.x),g.y+l+w.y>b.y&&(j=g.y+l-b.y+w.y),g.y-j-I.y<0&&(j=g.y-I.y),(A||j)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([A,j]))}},_getAnchor:function(){return V(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),XD=function(i,a){return new Ic(i,a)};re.mergeOptions({closePopupOnClick:!0}),re.include({openPopup:function(i,a,l){return this._initOverlay(Ic,i,a,l).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Lt.include({bindPopup:function(i,a){return this._popup=this._initOverlay(Ic,this._popup,i,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof In||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){wr(i);var a=i.layer||i.target;if(this._popup._source===a&&!(a instanceof Gn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=a,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var wc=nn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){nn.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){nn.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=nn.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",a=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ae("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var a,l,h=this._map,p=this._container,g=h.latLngToContainerPoint(h.getCenter()),E=h.layerPointToContainerPoint(i),I=this.options.direction,w=p.offsetWidth,b=p.offsetHeight,A=V(this.options.offset),j=this._getAnchor();I==="top"?(a=w/2,l=b):I==="bottom"?(a=w/2,l=0):I==="center"?(a=w/2,l=b/2):I==="right"?(a=0,l=b/2):I==="left"?(a=w,l=b/2):E.x<g.x?(I="right",a=0,l=b/2):(I="left",a=w+(A.x+j.x)*2,l=b/2),i=i.subtract(V(a,l,!0)).add(A).add(j),Se(p,"leaflet-tooltip-right"),Se(p,"leaflet-tooltip-left"),Se(p,"leaflet-tooltip-top"),Se(p,"leaflet-tooltip-bottom"),G(p,"leaflet-tooltip-"+I),Ae(p,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Ct(this._container,i)},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(a)},_getAnchor:function(){return V(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),eN=function(i,a){return new wc(i,a)};re.include({openTooltip:function(i,a,l){return this._initOverlay(wc,i,a,l).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Lt.include({bindTooltip:function(i,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(wc,this._tooltip,i,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var a=i?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,l.click=this._openTooltip,this._map?this._addFocusListeners():l.add=this._addFocusListeners),this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),this[a](l),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof In||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var a=typeof i.getElement=="function"&&i.getElement();a&&(z(a,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),z(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var a=typeof i.getElement=="function"&&i.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var a=i.latlng,l,h;this._tooltip.options.sticky&&i.originalEvent&&(l=this._map.mouseEventToContainerPoint(i.originalEvent),h=this._map.containerPointToLayerPoint(l),a=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(a)}});var bv=Ci.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var a=i&&i.tagName==="DIV"?i:document.createElement("div"),l=this.options;if(l.html instanceof Element?(cc(a),a.appendChild(l.html)):a.innerHTML=l.html!==!1?l.html:"",l.bgPos){var h=V(l.bgPos);a.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function tN(i){return new bv(i)}Ci.Default=rs;var is=Lt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:M.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){y(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),we(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(wi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ti(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof $?i:new $(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var a=this.getPane().children,l=-i(-1/0,1/0),h=0,p=a.length,g;h<p;h++)g=a[h].style.zIndex,a[h]!==this._container&&g&&(l=i(l,+g));isFinite(l)&&(this.options.zIndex=l+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!M.ielt9){Ct(this._container,this.options.opacity);var i=+new Date,a=!1,l=!1;for(var h in this._tiles){var p=this._tiles[h];if(!(!p.current||!p.loaded)){var g=Math.min(1,(i-p.loaded)/200);Ct(p.el,g),g<1?a=!0:(p.active?l=!0:this._onOpaqueTile(p),p.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),a&&(nt(this._fadeFrame),this._fadeFrame=je(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,a=this.options.maxZoom;if(i!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===i?(this._levels[l].el.style.zIndex=a-Math.abs(i-l),this._onUpdateLevel(l)):(we(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var h=this._levels[i],p=this._map;return h||(h=this._levels[i]={},h.el=ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=a,h.origin=p.project(p.unproject(p.getPixelOrigin()),i).round(),h.zoom=i,this._setZoomTransform(h,p.getCenter(),p.getZoom()),f(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var i,a,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)a=this._tiles[i],a.retain=a.current;for(i in this._tiles)if(a=this._tiles[i],a.current&&!a.active){var h=a.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var a in this._tiles)this._tiles[a].coords.z===i&&this._removeTile(a)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)we(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,a,l,h){var p=Math.floor(i/2),g=Math.floor(a/2),E=l-1,I=new $(+p,+g);I.z=+E;var w=this._tileCoordsToKey(I),b=this._tiles[w];return b&&b.active?(b.retain=!0,!0):(b&&b.loaded&&(b.retain=!0),E>h?this._retainParent(p,g,E,h):!1)},_retainChildren:function(i,a,l,h){for(var p=2*i;p<2*i+2;p++)for(var g=2*a;g<2*a+2;g++){var E=new $(p,g);E.z=l+1;var I=this._tileCoordsToKey(E),w=this._tiles[I];if(w&&w.active){w.retain=!0;continue}else w&&w.loaded&&(w.retain=!0);l+1<h&&this._retainChildren(p,g,l+1,h)}},_resetView:function(i){var a=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var a=this.options;return a.minNativeZoom!==void 0&&i<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<i?a.maxNativeZoom:i},_setView:function(i,a,l,h){var p=Math.round(a);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var g=this.options.updateWhenZooming&&p!==this._tileZoom;(!h||g)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(i),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(i,a)},_setZoomTransforms:function(i,a){for(var l in this._levels)this._setZoomTransform(this._levels[l],i,a)},_setZoomTransform:function(i,a,l){var h=this._map.getZoomScale(l,i.zoom),p=i.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(a,l)).round();M.any3d?yr(i.el,p,h):Ae(i.el,p)},_resetGrid:function(){var i=this._map,a=i.options.crs,l=this._tileSize=this.getTileSize(),h=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,a.wrapLng[0]],h).x/l.x),Math.ceil(i.project([0,a.wrapLng[1]],h).x/l.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([a.wrapLat[0],0],h).y/l.x),Math.ceil(i.project([a.wrapLat[1],0],h).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var a=this._map,l=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),h=a.getZoomScale(l,this._tileZoom),p=a.project(i,this._tileZoom).floor(),g=a.getSize().divideBy(h*2);return new Ie(p.subtract(g),p.add(g))},_update:function(i){var a=this._map;if(a){var l=this._clampZoom(a.getZoom());if(i===void 0&&(i=a.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(i),p=this._pxBoundsToTileRange(h),g=p.getCenter(),E=[],I=this.options.keepBuffer,w=new Ie(p.getBottomLeft().subtract([I,-I]),p.getTopRight().add([I,-I]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var b in this._tiles){var A=this._tiles[b].coords;(A.z!==this._tileZoom||!w.contains(new $(A.x,A.y)))&&(this._tiles[b].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(i,l);return}for(var j=p.min.y;j<=p.max.y;j++)for(var Q=p.min.x;Q<=p.max.x;Q++){var Je=new $(Q,j);if(Je.z=this._tileZoom,!!this._isValidTile(Je)){var Ue=this._tiles[this._tileCoordsToKey(Je)];Ue?Ue.current=!0:E.push(Je)}}if(E.sort(function(ot,Ai){return ot.distanceTo(g)-Ai.distanceTo(g)}),E.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Dt=document.createDocumentFragment();for(Q=0;Q<E.length;Q++)this._addTile(E[Q],Dt);this._level.el.appendChild(Dt)}}}},_isValidTile:function(i){var a=this._map.options.crs;if(!a.infinite){var l=this._globalTileRange;if(!a.wrapLng&&(i.x<l.min.x||i.x>l.max.x)||!a.wrapLat&&(i.y<l.min.y||i.y>l.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(i);return Ne(this.options.bounds).overlaps(h)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var a=this._map,l=this.getTileSize(),h=i.scaleBy(l),p=h.add(l),g=a.unproject(h,i.z),E=a.unproject(p,i.z);return[g,E]},_tileCoordsToBounds:function(i){var a=this._tileCoordsToNwSe(i),l=new it(a[0],a[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var a=i.split(":"),l=new $(+a[0],+a[1]);return l.z=+a[2],l},_removeTile:function(i){var a=this._tiles[i];a&&(we(a.el),delete this._tiles[i],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){G(i,"leaflet-tile");var a=this.getTileSize();i.style.width=a.x+"px",i.style.height=a.y+"px",i.onselectstart=f,i.onmousemove=f,M.ielt9&&this.options.opacity<1&&Ct(i,this.options.opacity)},_addTile:function(i,a){var l=this._getTilePos(i),h=this._tileCoordsToKey(i),p=this.createTile(this._wrapCoords(i),o(this._tileReady,this,i));this._initTile(p),this.createTile.length<2&&je(o(this._tileReady,this,i,null,p)),Ae(p,l),this._tiles[h]={el:p,coords:i,current:!0},a.appendChild(p),this.fire("tileloadstart",{tile:p,coords:i})},_tileReady:function(i,a,l){a&&this.fire("tileerror",{error:a,tile:l,coords:i});var h=this._tileCoordsToKey(i);l=this._tiles[h],l&&(l.loaded=+new Date,this._map._fadeAnimated?(Ct(l.el,0),nt(this._fadeFrame),this._fadeFrame=je(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),a||(G(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),M.ielt9||!this._map._fadeAnimated?je(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var a=new $(this._wrapX?d(i.x,this._wrapX):i.x,this._wrapY?d(i.y,this._wrapY):i.y);return a.z=i.z,a},_pxBoundsToTileRange:function(i){var a=this.getTileSize();return new Ie(i.min.unscaleBy(a).floor(),i.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function nN(i){return new is(i)}var Ni=is.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,a){this._url=i,a=y(this,a),a.detectRetina&&M.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,a){return this._url===i&&a===void 0&&(a=!0),this._url=i,a||this.redraw(),this},createTile:function(i,a){var l=document.createElement("img");return z(l,"load",o(this._tileOnLoad,this,a,l)),z(l,"error",o(this._tileOnError,this,a,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(l.referrerPolicy=this.options.referrerPolicy),l.alt="",l.src=this.getTileUrl(i),l},getTileUrl:function(i){var a={r:M.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-i.y;this.options.tms&&(a.y=l),a["-y"]=l}return P(this._url,n(a,this.options))},_tileOnLoad:function(i,a){M.ielt9?setTimeout(o(i,this,null,a),0):i(null,a)},_tileOnError:function(i,a,l){var h=this.options.errorTileUrl;h&&a.getAttribute("src")!==h&&(a.src=h),i(l,a)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,a=this.options.maxZoom,l=this.options.zoomReverse,h=this.options.zoomOffset;return l&&(i=a-i),i+h},_getSubdomain:function(i){var a=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var i,a;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(a=this._tiles[i].el,a.onload=f,a.onerror=f,!a.complete)){a.src=Ce;var l=this._tiles[i].coords;we(a),delete this._tiles[i],this.fire("tileabort",{tile:a,coords:l})}},_removeTile:function(i){var a=this._tiles[i];if(a)return a.el.setAttribute("src",Ce),is.prototype._removeTile.call(this,i)},_tileReady:function(i,a,l){if(!(!this._map||l&&l.getAttribute("src")===Ce))return is.prototype._tileReady.call(this,i,a,l)}});function Cv(i,a){return new Ni(i,a)}var Sv=Ni.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,a){this._url=i;var l=n({},this.defaultWmsParams);for(var h in a)h in this.options||(l[h]=a[h]);a=y(this,a);var p=a.detectRetina&&M.retina?2:1,g=this.getTileSize();l.width=g.x*p,l.height=g.y*p,this.wmsParams=l},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,Ni.prototype.onAdd.call(this,i)},getTileUrl:function(i){var a=this._tileCoordsToNwSe(i),l=this._crs,h=rt(l.project(a[0]),l.project(a[1])),p=h.min,g=h.max,E=(this._wmsVersion>=1.3&&this._crs===vv?[p.y,p.x,g.y,g.x]:[p.x,p.y,g.x,g.y]).join(","),I=Ni.prototype.getTileUrl.call(this,i);return I+T(this.wmsParams,I,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+E},setParams:function(i,a){return n(this.wmsParams,i),a||this.redraw(),this}});function rN(i,a){return new Sv(i,a)}Ni.WMS=Sv,Cv.wms=rN;var bn=Lt.extend({options:{padding:.1},initialize:function(i){y(this,i),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),G(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,a){var l=this._map.getZoomScale(a,this._zoom),h=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,a),g=h.multiplyBy(-l).add(p).subtract(this._map._getNewPixelOrigin(i,a));M.any3d?yr(this._container,g,l):Ae(this._container,g)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,a=this._map.getSize(),l=this._map.containerPointToLayerPoint(a.multiplyBy(-i)).round();this._bounds=new Ie(l,l.add(a.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Dv=bn.extend({options:{tolerance:0},getEvents:function(){var i=bn.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){bn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");z(i,"mousemove",this._onMouseMove,this),z(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),z(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){nt(this._redrawRequest),delete this._ctx,we(this._container),ve(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var a in this._layers)i=this._layers[a],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){bn.prototype._update.call(this);var i=this._bounds,a=this._container,l=i.getSize(),h=M.retina?2:1;Ae(a,i.min),a.width=h*l.x,a.height=h*l.y,a.style.width=l.x+"px",a.style.height=l.y+"px",M.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){bn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[c(i)]=i;var a=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var a=i._order,l=a.next,h=a.prev;l?l.prev=h:this._drawLast=h,h?h.next=l:this._drawFirst=l,delete i._order,delete this._layers[c(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var a=i.options.dashArray.split(/[, ]+/),l=[],h,p;for(p=0;p<a.length;p++){if(h=Number(a[p]),isNaN(h))return;l.push(h)}i.options._dashArray=l}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||je(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var a=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ie,this._redrawBounds.extend(i._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(i._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var a=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,a=this._redrawBounds;if(this._ctx.save(),a){var l=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)i=h.layer,(!a||i._pxBounds&&i._pxBounds.intersects(a))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,a){if(this._drawing){var l,h,p,g,E=i._parts,I=E.length,w=this._ctx;if(I){for(w.beginPath(),l=0;l<I;l++){for(h=0,p=E[l].length;h<p;h++)g=E[l][h],w[h?"lineTo":"moveTo"](g.x,g.y);a&&w.closePath()}this._fillStroke(w,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var a=i._point,l=this._ctx,h=Math.max(Math.round(i._radius),1),p=(Math.max(Math.round(i._radiusY),1)||h)/h;p!==1&&(l.save(),l.scale(1,p)),l.beginPath(),l.arc(a.x,a.y/p,h,0,Math.PI*2,!1),p!==1&&l.restore(),this._fillStroke(l,i)}},_fillStroke:function(i,a){var l=a.options;l.fill&&(i.globalAlpha=l.fillOpacity,i.fillStyle=l.fillColor||l.color,i.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(i.setLineDash&&i.setLineDash(a.options&&a.options._dashArray||[]),i.globalAlpha=l.opacity,i.lineWidth=l.weight,i.strokeStyle=l.color,i.lineCap=l.lineCap,i.lineJoin=l.lineJoin,i.stroke())},_onClick:function(i){for(var a=this._map.mouseEventToLayerPoint(i),l,h,p=this._drawFirst;p;p=p.next)l=p.layer,l.options.interactive&&l._containsPoint(a)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(l))&&(h=l);this._fireEvent(h?[h]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,a)}},_handleMouseOut:function(i){var a=this._hoveredLayer;a&&(Se(this._container,"leaflet-interactive"),this._fireEvent([a],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,a){if(!this._mouseHoverThrottled){for(var l,h,p=this._drawFirst;p;p=p.next)l=p.layer,l.options.interactive&&l._containsPoint(a)&&(h=l);h!==this._hoveredLayer&&(this._handleMouseOut(i),h&&(G(this._container,"leaflet-interactive"),this._fireEvent([h],i,"mouseover"),this._hoveredLayer=h)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,a,l){this._map._fireDOMEvent(a,l||a.type,i)},_bringToFront:function(i){var a=i._order;if(a){var l=a.next,h=a.prev;if(l)l.prev=h;else return;h?h.next=l:l&&(this._drawFirst=l),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(i)}},_bringToBack:function(i){var a=i._order;if(a){var l=a.next,h=a.prev;if(h)h.next=l;else return;l?l.prev=h:h&&(this._drawLast=h),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(i)}}});function Nv(i){return M.canvas?new Dv(i):null}var os=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),iN={_initContainer:function(){this._container=ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(bn.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var a=i._container=os("shape");G(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",i._path=os("path"),a.appendChild(i._path),this._updateStyle(i),this._layers[c(i)]=i},_addPath:function(i){var a=i._container;this._container.appendChild(a),i.options.interactive&&i.addInteractiveTarget(a)},_removePath:function(i){var a=i._container;we(a),i.removeInteractiveTarget(a),delete this._layers[c(i)]},_updateStyle:function(i){var a=i._stroke,l=i._fill,h=i.options,p=i._container;p.stroked=!!h.stroke,p.filled=!!h.fill,h.stroke?(a||(a=i._stroke=os("stroke")),p.appendChild(a),a.weight=h.weight+"px",a.color=h.color,a.opacity=h.opacity,h.dashArray?a.dashStyle=x(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=h.lineCap.replace("butt","flat"),a.joinstyle=h.lineJoin):a&&(p.removeChild(a),i._stroke=null),h.fill?(l||(l=i._fill=os("fill")),p.appendChild(l),l.color=h.fillColor||h.color,l.opacity=h.fillOpacity):l&&(p.removeChild(l),i._fill=null)},_updateCircle:function(i){var a=i._point.round(),l=Math.round(i._radius),h=Math.round(i._radiusY||l);this._setPath(i,i._empty()?"M0 0":"AL "+a.x+","+a.y+" "+l+","+h+" 0,"+65535*360)},_setPath:function(i,a){i._path.v=a},_bringToFront:function(i){wi(i._container)},_bringToBack:function(i){Ti(i._container)}},Tc=M.vml?os:P_,ss=bn.extend({_initContainer:function(){this._container=Tc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Tc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){we(this._container),ve(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){bn.prototype._update.call(this);var i=this._bounds,a=i.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,l.setAttribute("width",a.x),l.setAttribute("height",a.y)),Ae(l,i.min),l.setAttribute("viewBox",[i.min.x,i.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(i){var a=i._path=Tc("path");i.options.className&&G(a,i.options.className),i.options.interactive&&G(a,"leaflet-interactive"),this._updateStyle(i),this._layers[c(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){we(i._path),i.removeInteractiveTarget(i._path),delete this._layers[c(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var a=i._path,l=i.options;a&&(l.stroke?(a.setAttribute("stroke",l.color),a.setAttribute("stroke-opacity",l.opacity),a.setAttribute("stroke-width",l.weight),a.setAttribute("stroke-linecap",l.lineCap),a.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?a.setAttribute("stroke-dasharray",l.dashArray):a.removeAttribute("stroke-dasharray"),l.dashOffset?a.setAttribute("stroke-dashoffset",l.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),l.fill?(a.setAttribute("fill",l.fillColor||l.color),a.setAttribute("fill-opacity",l.fillOpacity),a.setAttribute("fill-rule",l.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(i,a){this._setPath(i,x_(i._parts,a))},_updateCircle:function(i){var a=i._point,l=Math.max(Math.round(i._radius),1),h=Math.max(Math.round(i._radiusY),1)||l,p="a"+l+","+h+" 0 1,0 ",g=i._empty()?"M0 0":"M"+(a.x-l)+","+a.y+p+l*2+",0 "+p+-l*2+",0 ";this._setPath(i,g)},_setPath:function(i,a){i._path.setAttribute("d",a)},_bringToFront:function(i){wi(i._path)},_bringToBack:function(i){Ti(i._path)}});M.vml&&ss.include(iN);function Av(i){return M.svg||M.vml?new ss(i):null}re.include({getRenderer:function(i){var a=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var a=this._paneRenderers[i];return a===void 0&&(a=this._createRenderer({pane:i}),this._paneRenderers[i]=a),a},_createRenderer:function(i){return this.options.preferCanvas&&Nv(i)||Av(i)}});var Rv=Si.extend({initialize:function(i,a){Si.prototype.initialize.call(this,this._boundsToLatLngs(i),a)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=Ne(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function oN(i,a){return new Rv(i,a)}ss.create=Tc,ss.pointsToPath=x_,Tn.geometryToLayer=mc,Tn.coordsToLatLng=ih,Tn.coordsToLatLngs=_c,Tn.latLngToCoords=oh,Tn.latLngsToCoords=vc,Tn.getFeature=Di,Tn.asFeature=yc,re.mergeOptions({boxZoom:!0});var Mv=tn.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){z(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ve(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){we(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Qo(),Bd(),this._startPoint=this._map.mouseEventToContainerPoint(i),z(document,{contextmenu:wr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=ae("div","leaflet-zoom-box",this._container),G(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var a=new Ie(this._point,this._startPoint),l=a.getSize();Ae(this._box,a.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(we(this._box),Se(this._container,"leaflet-crosshair")),Jo(),Hd(),ve(document,{contextmenu:wr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var a=new it(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});re.addInitHook("addHandler","boxZoom",Mv),re.mergeOptions({doubleClickZoom:!0});var Pv=tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var a=this._map,l=a.getZoom(),h=a.options.zoomDelta,p=i.originalEvent.shiftKey?l-h:l+h;a.options.doubleClickZoom==="center"?a.setZoom(p):a.setZoomAround(i.containerPoint,p)}});re.addInitHook("addHandler","doubleClickZoom",Pv),re.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var xv=tn.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new qn(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}G(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Se(this._map._container,"leaflet-grab"),Se(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Ne(this._map.options.maxBounds);this._offsetLimit=rt(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var a=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(a),this._prunePositions(a)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,a){return i-(i-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;i.x<a.min.x&&(i.x=this._viscousLimit(i.x,a.min.x)),i.y<a.min.y&&(i.y=this._viscousLimit(i.y,a.min.y)),i.x>a.max.x&&(i.x=this._viscousLimit(i.x,a.max.x)),i.y>a.max.y&&(i.y=this._viscousLimit(i.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,a=Math.round(i/2),l=this._initialWorldOffset,h=this._draggable._newPos.x,p=(h-a+l)%i+a-l,g=(h+a+l)%i-a-l,E=Math.abs(p+l)<Math.abs(g+l)?p:g;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=E},_onDragEnd:function(i){var a=this._map,l=a.options,h=!l.inertia||i.noInertia||this._times.length<2;if(a.fire("dragend",i),h)a.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),g=(this._lastTime-this._times[0])/1e3,E=l.easeLinearity,I=p.multiplyBy(E/g),w=I.distanceTo([0,0]),b=Math.min(l.inertiaMaxSpeed,w),A=I.multiplyBy(b/w),j=b/(l.inertiaDeceleration*E),Q=A.multiplyBy(-j/2).round();!Q.x&&!Q.y?a.fire("moveend"):(Q=a._limitOffset(Q,a.options.maxBounds),je(function(){a.panBy(Q,{duration:j,easeLinearity:E,noMoveStart:!0,animate:!0})}))}}});re.addInitHook("addHandler","dragging",xv),re.mergeOptions({keyboard:!0,keyboardPanDelta:80});var kv=tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),z(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ve(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,a=document.documentElement,l=i.scrollTop||a.scrollTop,h=i.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(h,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var a=this._panKeys={},l=this.keyCodes,h,p;for(h=0,p=l.left.length;h<p;h++)a[l.left[h]]=[-1*i,0];for(h=0,p=l.right.length;h<p;h++)a[l.right[h]]=[i,0];for(h=0,p=l.down.length;h<p;h++)a[l.down[h]]=[0,i];for(h=0,p=l.up.length;h<p;h++)a[l.up[h]]=[0,-1*i]},_setZoomDelta:function(i){var a=this._zoomKeys={},l=this.keyCodes,h,p;for(h=0,p=l.zoomIn.length;h<p;h++)a[l.zoomIn[h]]=i;for(h=0,p=l.zoomOut.length;h<p;h++)a[l.zoomOut[h]]=-i},_addHooks:function(){z(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ve(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var a=i.keyCode,l=this._map,h;if(a in this._panKeys){if(!l._panAnim||!l._panAnim._inProgress)if(h=this._panKeys[a],i.shiftKey&&(h=V(h).multiplyBy(3)),l.options.maxBounds&&(h=l._limitOffset(V(h),l.options.maxBounds)),l.options.worldCopyJump){var p=l.wrapLatLng(l.unproject(l.project(l.getCenter()).add(h)));l.panTo(p)}else l.panBy(h)}else if(a in this._zoomKeys)l.setZoom(l.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;wr(i)}}});re.addInitHook("addHandler","keyboard",kv),re.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ov=tn.extend({addHooks:function(){z(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ve(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var a=ov(i),l=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var h=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),h),wr(i)},_performZoom:function(){var i=this._map,a=i.getZoom(),l=this._map.options.zoomSnap||0;i._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,g=l?Math.ceil(p/l)*l:p,E=i._limitZoom(a+(this._delta>0?g:-g))-a;this._delta=0,this._startTime=null,E&&(i.options.scrollWheelZoom==="center"?i.setZoom(a+E):i.setZoomAround(this._lastMousePos,a+E))}});re.addInitHook("addHandler","scrollWheelZoom",Ov);var sN=600;re.mergeOptions({tapHold:M.touchNative&&M.safari&&M.mobile,tapTolerance:15});var Lv=tn.extend({addHooks:function(){z(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ve(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var a=i.touches[0];this._startPos=this._newPos=new $(a.clientX,a.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(z(document,"touchend",$e),z(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),sN),z(document,"touchend touchcancel contextmenu",this._cancel,this),z(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){ve(document,"touchend",$e),ve(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),ve(document,"touchend touchcancel contextmenu",this._cancel,this),ve(document,"touchmove",this._onMove,this)},_onMove:function(i){var a=i.touches[0];this._newPos=new $(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,a){var l=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});l._simulated=!0,a.target.dispatchEvent(l)}});re.addInitHook("addHandler","tapHold",Lv),re.mergeOptions({touchZoom:M.touch,bounceAtZoomLimits:!0});var Fv=tn.extend({addHooks:function(){G(this._map._container,"leaflet-touch-zoom"),z(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Se(this._map._container,"leaflet-touch-zoom"),ve(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var a=this._map;if(!(!i.touches||i.touches.length!==2||a._animatingZoom||this._zooming)){var l=a.mouseEventToContainerPoint(i.touches[0]),h=a.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(l.add(h)._divideBy(2))),this._startDist=l.distanceTo(h),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),z(document,"touchmove",this._onTouchMove,this),z(document,"touchend touchcancel",this._onTouchEnd,this),$e(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var a=this._map,l=a.mouseEventToContainerPoint(i.touches[0]),h=a.mouseEventToContainerPoint(i.touches[1]),p=l.distanceTo(h)/this._startDist;if(this._zoom=a.getScaleZoom(p,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&p<1||this._zoom>a.getMaxZoom()&&p>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var g=l._add(h)._divideBy(2)._subtract(this._centerPoint);if(p===1&&g.x===0&&g.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(g),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),nt(this._animRequest);var E=o(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=je(E,this,!0),$e(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,nt(this._animRequest),ve(document,"touchmove",this._onTouchMove,this),ve(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});re.addInitHook("addHandler","touchZoom",Fv),re.BoxZoom=Mv,re.DoubleClickZoom=Pv,re.Drag=xv,re.Keyboard=kv,re.ScrollWheelZoom=Ov,re.TapHold=Lv,re.TouchZoom=Fv,e.Bounds=Ie,e.Browser=M,e.CRS=En,e.Canvas=Dv,e.Circle=rh,e.CircleMarker=gc,e.Class=yn,e.Control=Ot,e.DivIcon=bv,e.DivOverlay=nn,e.DomEvent=bD,e.DomUtil=wD,e.Draggable=qn,e.Evented=qo,e.FeatureGroup=In,e.GeoJSON=Tn,e.GridLayer=is,e.Handler=tn,e.Icon=Ci,e.ImageOverlay=Ec,e.LatLng=pe,e.LatLngBounds=it,e.Layer=Lt,e.LayerGroup=bi,e.LineUtil=FD,e.Map=re,e.Marker=pc,e.Mixin=MD,e.Path=Gn,e.Point=$,e.PolyUtil=PD,e.Polygon=Si,e.Polyline=wn,e.Popup=Ic,e.PosAnimation=sv,e.Projection=jD,e.Rectangle=Rv,e.Renderer=bn,e.SVG=ss,e.SVGOverlay=Tv,e.TileLayer=Ni,e.Tooltip=wc,e.Transformation=Ad,e.Util=zS,e.VideoOverlay=wv,e.bind=o,e.bounds=rt,e.canvas=Nv,e.circle=qD,e.circleMarker=WD,e.control=ts,e.divIcon=tN,e.extend=n,e.featureGroup=HD,e.geoJSON=Iv,e.geoJson=KD,e.gridLayer=nN,e.icon=$D,e.imageOverlay=YD,e.latLng=ne,e.latLngBounds=Ne,e.layerGroup=BD,e.map=CD,e.marker=zD,e.point=V,e.polygon=ZD,e.polyline=GD,e.popup=XD,e.rectangle=oN,e.setOptions=y,e.stamp=c,e.svg=Av,e.svgOverlay=JD,e.tileLayer=Cv,e.tooltip=eN,e.transformation=Go,e.version=t,e.videoOverlay=QD;var aN=window.L;e.noConflict=function(){return window.L=aN,this},window.L=e})});var lh;function Cc(){return lh}function rn(e){let t=lh;return lh=e,t}var zv=Symbol("NotFound");function Ri(e){return e===zv||e?.name==="\u0275NotFound"}var Ze=null,Sc=!1,uh=1,SN=null,st=Symbol("SIGNAL");function J(e){let t=Ze;return Ze=e,t}function Nc(){return Ze}var as={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function cs(e){if(Sc)throw new Error("");if(Ze===null)return;Ze.consumerOnSignalRead(e);let t=Ze.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=Ze.recomputing;if(r&&(n=t!==void 0?t.nextProducer:Ze.producers,n!==void 0&&n.producer===e)){Ze.producersTail=n,n.lastReadVersion=e.version;return}let o=e.consumersTail;if(o!==void 0&&o.consumer===Ze&&(!r||NN(o,Ze)))return;let s=Mi(Ze),c={producer:e,consumer:Ze,nextProducer:n,prevConsumer:o,lastReadVersion:e.version,nextConsumer:void 0};Ze.producersTail=c,t!==void 0?t.nextProducer=c:Ze.producers=c,s&&Zv(e,c)}function Wv(){uh++}function dh(e){if(!(Mi(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===uh)){if(!e.producerMustRecompute(e)&&!us(e)){Dc(e);return}e.producerRecomputeValue(e),Dc(e)}}function hh(e){if(e.consumers===void 0)return;let t=Sc;Sc=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||DN(r)}}finally{Sc=t}}function fh(){return Ze?.consumerAllowSignalWrites!==!1}function DN(e){e.dirty=!0,hh(e),e.consumerMarkedDirty?.(e)}function Dc(e){e.dirty=!1,e.lastCleanEpoch=uh}function ls(e){return e&&qv(e),J(e)}function qv(e){e.producersTail=void 0,e.recomputing=!0}function Ac(e,t){J(t),e&&Gv(e)}function Gv(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(Mi(e))do n=ph(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function us(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(dh(n),r!==n.version))return!0}return!1}function ds(e){if(Mi(e)){let t=e.producers;for(;t!==void 0;)t=ph(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function Zv(e,t){let n=e.consumersTail,r=Mi(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let o=e.producers;o!==void 0;o=o.nextProducer)Zv(o.producer,o)}function ph(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,o=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=o:t.consumersTail=o,o!==void 0)o.nextConsumer=r;else if(t.consumers=r,!Mi(t)){let s=t.producers;for(;s!==void 0;)s=ph(s)}return n}function Mi(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function gh(e){SN?.(e)}function NN(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function mh(e,t){return Object.is(e,t)}function AN(){throw new Error}var Kv=AN;function Yv(e){Kv(e)}function _h(e){Kv=e}var RN=null;function vh(e,t){let n=Object.create(Rc);n.value=e,t!==void 0&&(n.equal=t);let r=()=>Qv(n);return r[st]=n,gh(n),[r,c=>Pi(n,c),c=>yh(n,c)]}function Qv(e){return cs(e),e.value}function Pi(e,t){fh()||Yv(e),e.equal(e.value,t)||(e.value=t,MN(e))}function yh(e,t){fh()||Yv(e),Pi(e,t(e.value))}var Rc=ge(R({},as),{equal:mh,value:void 0,kind:"signal"});function MN(e){e.version++,Wv(),hh(e),RN?.(e)}function H(e){return typeof e=="function"}function xi(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Mc=xi(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function br(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Te=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(H(r))try{r()}catch(s){t=s instanceof Mc?s.errors:[s]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let s of o)try{Jv(s)}catch(c){t=t??[],c instanceof Mc?t=[...t,...c.errors]:t.push(c)}}if(t)throw new Mc(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Jv(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&br(n,t)}remove(t){let{_finalizers:n}=this;n&&br(n,t),t instanceof e&&t._removeParent(this)}};Te.EMPTY=(()=>{let e=new Te;return e.closed=!0,e})();var Eh=Te.EMPTY;function Pc(e){return e instanceof Te||e&&"closed"in e&&H(e.remove)&&H(e.add)&&H(e.unsubscribe)}function Jv(e){H(e)?e():e.unsubscribe()}var Ft={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ki={setTimeout(e,t,...n){let{delegate:r}=ki;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=ki;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function xc(e){ki.setTimeout(()=>{let{onUnhandledError:t}=Ft;if(t)t(e);else throw e})}function hs(){}var Xv=Ih("C",void 0,void 0);function ey(e){return Ih("E",void 0,e)}function ty(e){return Ih("N",e,void 0)}function Ih(e,t,n){return{kind:e,value:t,error:n}}var Cr=null;function Oi(e){if(Ft.useDeprecatedSynchronousErrorHandling){let t=!Cr;if(t&&(Cr={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Cr;if(Cr=null,n)throw r}}else e()}function ny(e){Ft.useDeprecatedSynchronousErrorHandling&&Cr&&(Cr.errorThrown=!0,Cr.error=e)}var Sr=class extends Te{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Pc(t)&&t.add(this)):this.destination=kN}static create(t,n,r){return new Li(t,n,r)}next(t){this.isStopped?Th(ty(t),this):this._next(t)}error(t){this.isStopped?Th(ey(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Th(Xv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},PN=Function.prototype.bind;function wh(e,t){return PN.call(e,t)}var bh=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){kc(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){kc(r)}else kc(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){kc(n)}}},Li=class extends Sr{constructor(t,n,r){super();let o;if(H(t)||!t)o={next:t??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ft.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&wh(t.next,s),error:t.error&&wh(t.error,s),complete:t.complete&&wh(t.complete,s)}):o=t}this.destination=new bh(o)}};function kc(e){Ft.useDeprecatedSynchronousErrorHandling?ny(e):xc(e)}function xN(e){throw e}function Th(e,t){let{onStoppedNotification:n}=Ft;n&&ki.setTimeout(()=>n(e,t))}var kN={closed:!0,next:hs,error:xN,complete:hs};var Fi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function yt(e){return e}function Ch(...e){return Sh(e)}function Sh(e){return e.length===0?yt:e.length===1?e[0]:function(n){return e.reduce((r,o)=>o(r),n)}}var Z=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,o){let s=LN(n)?n:new Li(n,r,o);return Oi(()=>{let{operator:c,source:u}=this;s.add(c?c.call(s,u):u?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=ry(r),new r((o,s)=>{let c=new Li({next:u=>{try{n(u)}catch(d){s(d),c.unsubscribe()}},error:s,complete:o});this.subscribe(c)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Fi](){return this}pipe(...n){return Sh(n)(this)}toPromise(n){return n=ry(n),new n((r,o)=>{let s;this.subscribe(c=>s=c,c=>o(c),()=>r(s))})}}return e.create=t=>new e(t),e})();function ry(e){var t;return(t=e??Ft.Promise)!==null&&t!==void 0?t:Promise}function ON(e){return e&&H(e.next)&&H(e.error)&&H(e.complete)}function LN(e){return e&&e instanceof Sr||ON(e)&&Pc(e)}function Dh(e){return H(e?.lift)}function ie(e){return t=>{if(Dh(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(e,t,n,r,o){return new Nh(e,t,n,r,o)}var Nh=class extends Sr{constructor(t,n,r,o,s,c){super(t),this.onFinalize=s,this.shouldUnsubscribe=c,this._next=n?function(u){try{n(u)}catch(d){t.error(d)}}:super._next,this._error=o?function(u){try{o(u)}catch(d){t.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function ji(){return ie((e,t)=>{let n=null;e._refCount++;let r=oe(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let o=e._connection,s=n;n=null,o&&(!s||o===s)&&o.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Ui=class extends Z{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Dh(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Te;let n=this.getSubject();t.add(this.source.subscribe(oe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Te.EMPTY)}return t}refCount(){return ji()(this)}};var iy=xi(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class e extends Z{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Oc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new iy}next(n){Oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Oi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:s}=this;return r||o?Eh:(this.currentObservers=null,s.push(n),new Te(()=>{this.currentObservers=null,br(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:s}=this;r?n.error(o):s&&n.complete()}asObservable(){let n=new Z;return n.source=this,n}}return e.create=(t,n)=>new Oc(t,n),e})(),Oc=class extends ze{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Eh}};var We=class extends ze{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Ah={now(){return(Ah.delegate||Date).now()},delegate:void 0};var Lc=class extends Te{constructor(t,n){super()}schedule(t,n=0){return this}};var fs={setInterval(e,t,...n){let{delegate:r}=fs;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=fs;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Vi=class extends Lc{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;let o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(t,n,r=0){return fs.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&fs.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let r=!1,o;try{this.work(t)}catch(s){r=!0,o=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,br(r,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var Bi=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}};Bi.now=Ah.now;var Hi=class extends Bi{constructor(t,n=Bi.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}};var Rh=new Hi(Vi);var Fc=class extends Vi{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}schedule(t,n=0){return n>0?super.schedule(t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}execute(t,n){return n>0||this.closed?super.execute(t,n):this._execute(t,n)}requestAsyncId(t,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(t,n,r):(t.flush(this),0)}};var jc=class extends Hi{};var Mh=new jc(Fc);var at=new Z(e=>e.complete());function oy(e){return e&&H(e.schedule)}function sy(e){return e[e.length-1]}function ay(e){return H(sy(e))?e.pop():void 0}function Zn(e){return oy(sy(e))?e.pop():void 0}function Ph(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function ly(e,t,n,r){function o(s){return s instanceof n?s:new n(function(c){c(s)})}return new(n||(n=Promise))(function(s,c){function u(m){try{f(r.next(m))}catch(_){c(_)}}function d(m){try{f(r.throw(m))}catch(_){c(_)}}function f(m){m.done?s(m.value):o(m.value).then(u,d)}f((r=r.apply(e,t||[])).next())})}function cy(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dr(e){return this instanceof Dr?(this.v=e,this):new Dr(e)}function uy(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(y){return function(T){return Promise.resolve(T).then(y,_)}}function u(y,T){r[y]&&(o[y]=function(N){return new Promise(function(P,x){s.push([y,N,P,x])>1||d(y,N)})},T&&(o[y]=T(o[y])))}function d(y,T){try{f(r[y](T))}catch(N){v(s[0][3],N)}}function f(y){y.value instanceof Dr?Promise.resolve(y.value.v).then(m,_):v(s[0][2],y)}function m(y){d("next",y)}function _(y){d("throw",y)}function v(y,T){y(T),s.shift(),s.length&&d(s[0][0],s[0][1])}}function dy(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof cy=="function"?cy(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(c){return new Promise(function(u,d){c=e[s](c),o(u,d,c.done,c.value)})}}function o(s,c,u,d){Promise.resolve(d).then(function(f){s({value:f,done:u})},c)}}var Uc=e=>e&&typeof e.length=="number"&&typeof e!="function";function Vc(e){return H(e?.then)}function Bc(e){return H(e[Fi])}function Hc(e){return Symbol.asyncIterator&&H(e?.[Symbol.asyncIterator])}function $c(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function FN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zc=FN();function Wc(e){return H(e?.[zc])}function qc(e){return uy(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:o}=yield Dr(n.read());if(o)return yield Dr(void 0);yield yield Dr(r)}}finally{n.releaseLock()}})}function Gc(e){return H(e?.getReader)}function Ve(e){if(e instanceof Z)return e;if(e!=null){if(Bc(e))return jN(e);if(Uc(e))return UN(e);if(Vc(e))return VN(e);if(Hc(e))return hy(e);if(Wc(e))return BN(e);if(Gc(e))return HN(e)}throw $c(e)}function jN(e){return new Z(t=>{let n=e[Fi]();if(H(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function UN(e){return new Z(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function VN(e){return new Z(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,xc)})}function BN(e){return new Z(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function hy(e){return new Z(t=>{$N(e,t).catch(n=>t.error(n))})}function HN(e){return hy(qc(e))}function $N(e,t){var n,r,o,s;return ly(this,void 0,void 0,function*(){try{for(n=dy(e);r=yield n.next(),!r.done;){let c=r.value;if(t.next(c),t.closed)return}}catch(c){o={error:c}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(o)throw o.error}}t.complete()})}function ct(e,t,n,r=0,o=!1){let s=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!o)return s}function Kn(e,t=0){return ie((n,r)=>{n.subscribe(oe(r,o=>ct(r,e,()=>r.next(o),t),()=>ct(r,e,()=>r.complete(),t),o=>ct(r,e,()=>r.error(o),t)))})}function Yn(e,t=0){return ie((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function fy(e,t){return Ve(e).pipe(Yn(t),Kn(t))}function py(e,t){return Ve(e).pipe(Yn(t),Kn(t))}function gy(e,t){return new Z(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function my(e,t){return new Z(n=>{let r;return ct(n,t,()=>{r=e[zc](),ct(n,t,()=>{let o,s;try{({value:o,done:s}=r.next())}catch(c){n.error(c);return}s?n.complete():n.next(o)},0,!0)}),()=>H(r?.return)&&r.return()})}function Zc(e,t){if(!e)throw new Error("Iterable cannot be null");return new Z(n=>{ct(n,t,()=>{let r=e[Symbol.asyncIterator]();ct(n,t,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function _y(e,t){return Zc(qc(e),t)}function vy(e,t){if(e!=null){if(Bc(e))return fy(e,t);if(Uc(e))return gy(e,t);if(Vc(e))return py(e,t);if(Hc(e))return Zc(e,t);if(Wc(e))return my(e,t);if(Gc(e))return _y(e,t)}throw $c(e)}function Me(e,t){return t?vy(e,t):Ve(e)}function U(...e){let t=Zn(e);return Me(e,t)}function $i(e,t){let n=H(e)?e:()=>e,r=o=>o.error(n());return new Z(t?o=>t.schedule(r,0,o):r)}function xh(e){return!!e&&(e instanceof Z||H(e.lift)&&H(e.subscribe))}var Cn=xi(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function se(e,t){return ie((n,r)=>{let o=0;n.subscribe(oe(r,s=>{r.next(e.call(t,s,o++))}))})}var{isArray:zN}=Array;function WN(e,t){return zN(t)?e(...t):e(t)}function yy(e){return se(t=>WN(e,t))}var{isArray:qN}=Array,{getPrototypeOf:GN,prototype:ZN,keys:KN}=Object;function Ey(e){if(e.length===1){let t=e[0];if(qN(t))return{args:t,keys:null};if(YN(t)){let n=KN(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function YN(e){return e&&typeof e=="object"&&GN(e)===ZN}function Iy(e,t){return e.reduce((n,r,o)=>(n[r]=t[o],n),{})}function Kc(...e){let t=Zn(e),n=ay(e),{args:r,keys:o}=Ey(e);if(r.length===0)return Me([],t);let s=new Z(QN(r,t,o?c=>Iy(o,c):yt));return n?s.pipe(yy(n)):s}function QN(e,t,n=yt){return r=>{wy(t,()=>{let{length:o}=e,s=new Array(o),c=o,u=o;for(let d=0;d<o;d++)wy(t,()=>{let f=Me(e[d],t),m=!1;f.subscribe(oe(r,_=>{s[d]=_,m||(m=!0,u--),u||r.next(n(s.slice()))},()=>{--c||r.complete()}))},r)},r)}}function wy(e,t,n){e?ct(n,e,t):t()}function Ty(e,t,n,r,o,s,c,u){let d=[],f=0,m=0,_=!1,v=()=>{_&&!d.length&&!f&&t.complete()},y=N=>f<r?T(N):d.push(N),T=N=>{s&&t.next(N),f++;let P=!1;Ve(n(N,m++)).subscribe(oe(t,x=>{o?.(x),s?y(x):t.next(x)},()=>{P=!0},void 0,()=>{if(P)try{for(f--;d.length&&f<r;){let x=d.shift();c?ct(t,c,()=>T(x)):T(x)}v()}catch(x){t.error(x)}}))};return e.subscribe(oe(t,y,()=>{_=!0,v()})),()=>{u?.()}}function Pe(e,t,n=1/0){return H(t)?Pe((r,o)=>se((s,c)=>t(r,s,o,c))(Ve(e(r,o))),n):(typeof t=="number"&&(n=t),ie((r,o)=>Ty(r,o,e,n)))}function by(e=1/0){return Pe(yt,e)}function Cy(){return by(1)}function zi(...e){return Cy()(Me(e,Zn(e)))}function ps(e){return new Z(t=>{Ve(e()).subscribe(t)})}function Nt(e,t){return ie((n,r)=>{let o=0;n.subscribe(oe(r,s=>e.call(t,s,o++)&&r.next(s)))})}function Qn(e){return ie((t,n)=>{let r=null,o=!1,s;r=t.subscribe(oe(n,void 0,void 0,c=>{s=Ve(e(c,Qn(e)(t))),r?(r.unsubscribe(),r=null,s.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Sy(e,t,n,r,o){return(s,c)=>{let u=n,d=t,f=0;s.subscribe(oe(c,m=>{let _=f++;d=u?e(d,m,_):(u=!0,m),r&&c.next(d)},o&&(()=>{u&&c.next(d),c.complete()})))}}function Wi(e,t){return H(t)?Pe(e,t,1):Pe(e,1)}function Jn(e){return ie((t,n)=>{let r=!1;t.subscribe(oe(n,o=>{r=!0,n.next(o)},()=>{r||n.next(e),n.complete()}))})}function Sn(e){return e<=0?()=>at:ie((t,n)=>{let r=0;t.subscribe(oe(n,o=>{++r<=e&&(n.next(o),e<=r&&n.complete())}))})}function Yc(e=JN){return ie((t,n)=>{let r=!1;t.subscribe(oe(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(e())))})}function JN(){return new Cn}function gs(e){return ie((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Dn(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Nt((o,s)=>e(o,s,r)):yt,Sn(1),n?Jn(t):Yc(()=>new Cn))}function qi(e){return e<=0?()=>at:ie((t,n)=>{let r=[];t.subscribe(oe(n,o=>{r.push(o),e<r.length&&r.shift()},()=>{for(let o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function kh(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Nt((o,s)=>e(o,s,r)):yt,qi(1),n?Jn(t):Yc(()=>new Cn))}function Oh(e,t){return ie(Sy(e,t,arguments.length>=2,!0))}function Lh(...e){let t=Zn(e);return ie((n,r)=>{(t?zi(e,n,t):zi(e,n)).subscribe(r)})}function lt(e,t){return ie((n,r)=>{let o=null,s=0,c=!1,u=()=>c&&!o&&r.complete();n.subscribe(oe(r,d=>{o?.unsubscribe();let f=0,m=s++;Ve(e(d,m)).subscribe(o=oe(r,_=>r.next(t?t(d,_,m,f++):_),()=>{o=null,u()}))},()=>{c=!0,u()}))})}function Qc(e){return ie((t,n)=>{Ve(e).subscribe(oe(n,()=>n.complete(),hs)),!n.closed&&t.subscribe(n)})}function Be(e,t,n){let r=H(e)||t||n?{next:e,error:t,complete:n}:e;return r?ie((o,s)=>{var c;(c=r.subscribe)===null||c===void 0||c.call(r);let u=!0;o.subscribe(oe(s,d=>{var f;(f=r.next)===null||f===void 0||f.call(r,d),s.next(d)},()=>{var d;u=!1,(d=r.complete)===null||d===void 0||d.call(r),s.complete()},d=>{var f;u=!1,(f=r.error)===null||f===void 0||f.call(r,d),s.error(d)},()=>{var d,f;u&&((d=r.unsubscribe)===null||d===void 0||d.call(r)),(f=r.finalize)===null||f===void 0||f.call(r)}))}):yt}function Dy(e){let t=J(null);try{return e()}finally{J(t)}}var Zi=class{full;major;minor;patch;constructor(t){this.full=t;let n=t.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Kh=new Zi("20.3.12");var k=class extends Error{code;constructor(t,n){super(ys(t,n)),this.code=t}};function XN(e){return`NG0${Math.abs(e)}`}function ys(e,t){return`${XN(e)}${t?": "+t:""}`}function de(e){for(let t in e)if(e[t]===de)return t;throw Error("")}function Xn(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(Xn).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Yh(e,t){return e?t?`${e} ${t}`:e:t||""}var eA=de({__forward_ref__:de});function nl(e){return e.__forward_ref__=nl,e.toString=function(){return Xn(this())},e}function ut(e){return Qh(e)?e():e}function Qh(e){return typeof e=="function"&&e.hasOwnProperty(eA)&&e.__forward_ref__===nl}function O(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Es(e){return tA(e,rl)}function Jh(e){return Es(e)!==null}function tA(e,t){return e.hasOwnProperty(t)&&e[t]||null}function nA(e){let t=e?.[rl]??null;return t||null}function jh(e){return e&&e.hasOwnProperty(Xc)?e[Xc]:null}var rl=de({\u0275prov:de}),Xc=de({\u0275inj:de}),F=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=O({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Xh(e){return e&&!!e.\u0275providers}var ef=de({\u0275cmp:de}),tf=de({\u0275dir:de}),nf=de({\u0275pipe:de}),rf=de({\u0275mod:de}),_s=de({\u0275fac:de}),xr=de({__NG_ELEMENT_ID__:de}),Ay=de({__NG_ENV_ID__:de});function My(e){return typeof e=="string"?e:e==null?"":String(e)}function Py(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():My(e)}var xy=de({ngErrorCode:de}),rA=de({ngErrorMessage:de}),iA=de({ngTokenPath:de});function of(e,t){return ky("",-200,t)}function il(e,t){throw new k(-201,!1)}function ky(e,t,n){let r=new k(t,e);return r[xy]=t,r[rA]=e,n&&(r[iA]=n),r}function oA(e){return e[xy]}var Uh;function Oy(){return Uh}function Et(e){let t=Uh;return Uh=e,t}function sf(e,t,n){let r=Es(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;il(e,"Injector")}var sA={},Nr=sA,Vh="__NG_DI_FLAG__",Bh=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=Ar(n)||0;try{return this.injector.get(t,r&8?null:Nr,r)}catch(o){if(Ri(o))return o;throw o}}};function aA(e,t=0){let n=Cc();if(n===void 0)throw new k(-203,!1);if(n===null)return sf(e,void 0,t);{let r=cA(t),o=n.retrieve(e,r);if(Ri(o)){if(r.optional)return null;throw o}return o}}function W(e,t=0){return(Oy()||aA)(ut(e),t)}function C(e,t){return W(e,Ar(t))}function Ar(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function cA(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function Hh(e){let t=[];for(let n=0;n<e.length;n++){let r=ut(e[n]);if(Array.isArray(r)){if(r.length===0)throw new k(900,!1);let o,s=0;for(let c=0;c<r.length;c++){let u=r[c],d=lA(u);typeof d=="number"?d===-1?o=u.token:s|=d:o=u}t.push(W(o,s))}else t.push(W(r))}return t}function Ly(e,t){return e[Vh]=t,e.prototype[Vh]=t,e}function lA(e){return e[Vh]}function Rr(e,t){let n=e.hasOwnProperty(_s);return n?e[_s]:null}function ol(e,t){e.forEach(n=>Array.isArray(n)?ol(n,t):t(n))}function af(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Is(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}var kr={},Mr=[],nr=new F(""),cf=new F("",-1),lf=new F(""),vs=class{get(t,n=Nr){if(n===Nr){let o=ky("",-201);throw o.name="\u0275NotFound",o}return n}};function uf(e){return e[rf]||null}function rr(e){return e[ef]||null}function df(e){return e[tf]||null}function Fy(e){return e[nf]||null}function ir(e){return{\u0275providers:e}}function jy(...e){return{\u0275providers:hf(!0,e),\u0275fromNgModule:!0}}function hf(e,...t){let n=[],r=new Set,o,s=c=>{n.push(c)};return ol(t,c=>{let u=c;el(u,s,[],r)&&(o||=[],o.push(u))}),o!==void 0&&Uy(o,s),n}function Uy(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:o}=e[n];ff(o,s=>{t(s,r)})}}function el(e,t,n,r){if(e=ut(e),!e)return!1;let o=null,s=jh(e),c=!s&&rr(e);if(!s&&!c){let d=e.ngModule;if(s=jh(d),s)o=d;else return!1}else{if(c&&!c.standalone)return!1;o=e}let u=r.has(o);if(c){if(u)return!1;if(r.add(o),c.dependencies){let d=typeof c.dependencies=="function"?c.dependencies():c.dependencies;for(let f of d)el(f,t,n,r)}}else if(s){if(s.imports!=null&&!u){r.add(o);let f;try{ol(s.imports,m=>{el(m,t,n,r)&&(f||=[],f.push(m))})}finally{}f!==void 0&&Uy(f,t)}if(!u){let f=Rr(o)||(()=>new o);t({provide:o,useFactory:f,deps:Mr},o),t({provide:lf,useValue:o,multi:!0},o),t({provide:nr,useValue:()=>W(o),multi:!0},o)}let d=s.providers;if(d!=null&&!u){let f=e;ff(d,m=>{t(m,f)})}}else return!1;return o!==e&&e.providers!==void 0}function ff(e,t){for(let n of e)Xh(n)&&(n=n.\u0275providers),Array.isArray(n)?ff(n,t):t(n)}var uA=de({provide:String,useValue:de});function Vy(e){return e!==null&&typeof e=="object"&&uA in e}function dA(e){return!!(e&&e.useExisting)}function hA(e){return!!(e&&e.useFactory)}function tl(e){return typeof e=="function"}var ws=new F(""),Jc={},Ry={},Fh;function Ts(){return Fh===void 0&&(Fh=new vs),Fh}var xe=class{},Pr=class extends xe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,zh(t,c=>this.processProvider(c)),this.records.set(cf,Gi(void 0,this)),o.has("environment")&&this.records.set(xe,Gi(void 0,this));let s=this.records.get(ws);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(lf,Mr,{self:!0}))}retrieve(t,n){let r=Ar(n)||0;try{return this.get(t,Nr,r)}catch(o){if(Ri(o))return o;throw o}}destroy(){ms(this),this._destroyed=!0;let t=J(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(t)}}onDestroy(t){return ms(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){ms(this);let n=rn(this),r=Et(void 0),o;try{return t()}finally{rn(n),Et(r)}}get(t,n=Nr,r){if(ms(this),t.hasOwnProperty(Ay))return t[Ay](this);let o=Ar(r),s,c=rn(this),u=Et(void 0);try{if(!(o&4)){let f=this.records.get(t);if(f===void 0){let m=_A(t)&&Es(t);m&&this.injectableDefInScope(m)?f=Gi($h(t),Jc):f=null,this.records.set(t,f)}if(f!=null)return this.hydrate(t,f,o)}let d=o&2?Ts():this.parent;return n=o&8&&n===Nr?null:n,d.get(t,n)}catch(d){let f=oA(d);throw f===-200||f===-201?new k(f,null):d}finally{Et(u),rn(c)}}resolveInjectorInitializers(){let t=J(null),n=rn(this),r=Et(void 0),o;try{let s=this.get(nr,Mr,{self:!0});for(let c of s)c()}finally{rn(n),Et(r),J(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Xn(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=ut(t);let n=tl(t)?t:ut(t&&t.provide),r=pA(t);if(!tl(t)&&t.multi===!0){let o=this.records.get(n);o||(o=Gi(void 0,Jc,!0),o.factory=()=>Hh(o.multi),this.records.set(n,o)),n=t,o.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let o=J(null);try{if(n.value===Ry)throw of(Xn(t));return n.value===Jc&&(n.value=Ry,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&mA(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{J(o)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=ut(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function $h(e){let t=Es(e),n=t!==null?t.factory:Rr(e);if(n!==null)return n;if(e instanceof F)throw new k(204,!1);if(e instanceof Function)return fA(e);throw new k(204,!1)}function fA(e){if(e.length>0)throw new k(204,!1);let n=nA(e);return n!==null?()=>n.factory(e):()=>new e}function pA(e){if(Vy(e))return Gi(void 0,e.useValue);{let t=By(e);return Gi(t,Jc)}}function By(e,t,n){let r;if(tl(e)){let o=ut(e);return Rr(o)||$h(o)}else if(Vy(e))r=()=>ut(e.useValue);else if(hA(e))r=()=>e.useFactory(...Hh(e.deps||[]));else if(dA(e))r=(o,s)=>W(ut(e.useExisting),s!==void 0&&s&8?8:void 0);else{let o=ut(e&&(e.useClass||e.provide));if(gA(e))r=()=>new o(...Hh(e.deps));else return Rr(o)||$h(o)}return r}function ms(e){if(e.destroyed)throw new k(205,!1)}function Gi(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function gA(e){return!!e.deps}function mA(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function _A(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function zh(e,t){for(let n of e)Array.isArray(n)?zh(n,t):n&&Xh(n)?zh(n.\u0275providers,t):t(n)}function ke(e,t){let n;e instanceof Pr?(ms(e),n=e):n=new Bh(e);let r,o=rn(n),s=Et(void 0);try{return t()}finally{rn(o),Et(s)}}function Hy(){return Oy()!==void 0||Cc()!=null}var jt=0,Y=1,K=2,qe=3,At=4,Rt=5,bs=6,Ki=7,dt=8,or=9,An=10,ht=11,Yi=12,pf=13,Qi=14,Mt=15,Ji=16,Or=17,Cs=18,Ss=19,gf=20,Nn=21,sl=22,Ds=23,It=24,al=25,Ns=26,Pt=27,$y=1;var sr=7,As=8,Rs=9,ft=10;function Rn(e){return Array.isArray(e)&&typeof e[$y]=="object"}function Ut(e){return Array.isArray(e)&&e[$y]===!0}function mf(e){return(e.flags&4)!==0}function Lr(e){return e.componentOffset>-1}function cl(e){return(e.flags&1)===1}function Fr(e){return!!e.template}function Xi(e){return(e[K]&512)!==0}function jr(e){return(e[K]&256)===256}var zy="svg",Wy="math";function Vt(e){for(;Array.isArray(e);)e=e[jt];return e}function Mn(e,t){return Vt(t[e.index])}function _f(e,t){return e.data[t]}function sn(e,t){let n=t[e];return Rn(n)?n:n[jt]}function ll(e){return(e[K]&128)===128}function qy(e){return Ut(e[qe])}function Ms(e,t){return t==null?null:e[t]}function vf(e){e[Or]=0}function yf(e){e[K]&1024||(e[K]|=1024,ll(e)&&xs(e))}function Ps(e){return!!(e[K]&9216||e[It]?.dirty)}function ul(e){e[An].changeDetectionScheduler?.notify(8),e[K]&64&&(e[K]|=1024),Ps(e)&&xs(e)}function xs(e){e[An].changeDetectionScheduler?.notify(0);let t=er(e);for(;t!==null&&!(t[K]&8192||(t[K]|=8192,!ll(t)));)t=er(t)}function Ef(e,t){if(jr(e))throw new k(911,!1);e[Nn]===null&&(e[Nn]=[]),e[Nn].push(t)}function Gy(e,t){if(e[Nn]===null)return;let n=e[Nn].indexOf(t);n!==-1&&e[Nn].splice(n,1)}function er(e){let t=e[qe];return Ut(t)?t[qe]:t}function Zy(e){return e[Ki]??=[]}function Ky(e){return e.cleanup??=[]}var me={lFrame:aE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Wh=!1;function Yy(){return me.lFrame.elementDepthCount}function Qy(){me.lFrame.elementDepthCount++}function If(){me.lFrame.elementDepthCount--}function Jy(){return me.bindingsEnabled}function Xy(){return me.skipHydrationRootTNode!==null}function wf(e){return me.skipHydrationRootTNode===e}function Tf(){me.skipHydrationRootTNode=null}function pt(){return me.lFrame.lView}function dl(){return me.lFrame.tView}function Bt(){let e=bf();for(;e!==null&&e.type===64;)e=e.parent;return e}function bf(){return me.lFrame.currentTNode}function eE(){let e=me.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function ks(e,t){let n=me.lFrame;n.currentTNode=e,n.isParent=t}function Cf(){return me.lFrame.isParent}function tE(){me.lFrame.isParent=!1}function Sf(){return Wh}function Df(e){let t=Wh;return Wh=e,t}function nE(e){return me.lFrame.bindingIndex=e}function rE(){return me.lFrame.inI18n}function iE(e,t){let n=me.lFrame;n.bindingIndex=n.bindingRootIndex=e,hl(t)}function oE(){return me.lFrame.currentDirectiveIndex}function hl(e){me.lFrame.currentDirectiveIndex=e}function Nf(e){me.lFrame.currentQueryIndex=e}function vA(e){let t=e[Y];return t.type===2?t.declTNode:t.type===1?e[Rt]:null}function Af(e,t,n){if(n&4){let o=t,s=e;for(;o=o.parent,o===null&&!(n&1);)if(o=vA(s),o===null||(s=s[Qi],o.type&10))break;if(o===null)return!1;t=o,e=s}let r=me.lFrame=sE();return r.currentTNode=t,r.lView=e,!0}function fl(e){let t=sE(),n=e[Y];me.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function sE(){let e=me.lFrame,t=e===null?null:e.child;return t===null?aE(e):t}function aE(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function cE(){let e=me.lFrame;return me.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Rf=cE;function pl(){let e=cE();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function lE(){return me.lFrame.selectedIndex}function ar(e){me.lFrame.selectedIndex=e}function uE(){return me.lFrame.currentNamespace}var dE=!0;function Mf(){return dE}function Pf(e){dE=e}function qh(e,t=null,n=null,r){let o=xf(e,t,n,r);return o.resolveInjectorInitializers(),o}function xf(e,t=null,n=null,r,o=new Set){let s=[n||Mr,jy(e)];return r=r||(typeof e=="object"?void 0:Xn(e)),new Pr(s,t||Ts(),r||null,o)}var Ke=class e{static THROW_IF_NOT_FOUND=Nr;static NULL=new vs;static create(t,n){if(Array.isArray(t))return qh({name:""},n,t,"");{let r=t.name??"";return qh({name:r},t.parent,t.providers,r)}}static \u0275prov=O({token:e,providedIn:"any",factory:()=>W(cf)});static __NG_ELEMENT_ID__=-1},Ge=new F(""),Ur=(()=>{class e{static __NG_ELEMENT_ID__=yA;static __NG_ENV_ID__=n=>n}return e})(),Gh=class extends Ur{_lView;constructor(t){super(),this._lView=t}get destroyed(){return jr(this._lView)}onDestroy(t){let n=this._lView;return Ef(n,t),()=>Gy(n,t)}};function yA(){return new Gh(pt())}var on=class{_console=console;handleError(t){this._console.error("ERROR",t)}},xt=new F("",{providedIn:"root",factory:()=>{let e=C(xe),t;return n=>{e.destroyed&&!t?setTimeout(()=>{throw n}):(t??=e.get(on),t.handleError(n))}}}),hE={provide:nr,useValue:()=>void C(on),multi:!0};function eo(e,t){let[n,r,o]=vh(e,t?.equal),s=n,c=s[st];return s.set=r,s.update=o,s.asReadonly=fE.bind(s),s}function fE(){let e=this[st];if(e.readonlyFn===void 0){let t=()=>this();t[st]=e,e.readonlyFn=t}return e.readonlyFn}var tr=class{},gl=new F("",{providedIn:"root",factory:()=>!1});var kf=new F(""),Of=new F(""),an=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new We(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Z(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=O({token:e,providedIn:"root",factory:()=>new e})}return e})(),to=(()=>{class e{internalPendingTasks=C(an);scheduler=C(tr);errorHandler=C(xt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=O({token:e,providedIn:"root",factory:()=>new e})}return e})();function Os(...e){}var Lf=(()=>{class e{static \u0275prov=O({token:e,providedIn:"root",factory:()=>new Zh})}return e})(),Zh=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Hs(e){return{toString:e}.toString()}var ml="__parameters__";function xA(e){return function(...n){if(e){let r=e(...n);for(let o in r)this[o]=r[o]}}}function kA(e,t,n){return Hs(()=>{let r=xA(t);function o(...s){if(this instanceof o)return r.apply(this,s),this;let c=new o(...s);return u.annotation=c,u;function u(d,f,m){let _=d.hasOwnProperty(ml)?d[ml]:Object.defineProperty(d,ml,{value:[]})[ml];for(;_.length<=m;)_.push(null);return(_[m]=_[m]||[]).push(c),d}}return o.prototype.ngMetadataName=e,o.annotationCls=o,o})}var xn=Ly(kA("Optional"),8);function OA(e){return typeof e=="function"}var El=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function HE(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var rp=(()=>{let e=()=>$E;return e.ngInherit=!0,e})();function $E(e){return e.type.prototype.ngOnChanges&&(e.setInput=FA),LA}function LA(){let e=WE(this),t=e?.current;if(t){let n=e.previous;if(n===kr)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function FA(e,t,n,r,o){let s=this.declaredInputs[r],c=WE(e)||jA(e,{previous:kr,current:null}),u=c.current||(c.current={}),d=c.previous,f=d[s];u[s]=new El(f&&f.currentValue,n,d===kr),HE(e,t,o,n)}var zE="__ngSimpleChanges__";function WE(e){return e[zE]||null}function jA(e,t){return e[zE]=t}var pE=[];var _e=function(e,t=null,n){for(let r=0;r<pE.length;r++){let o=pE[r];o(e,t,n)}};function UA(e,t,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:s}=t.type.prototype;if(r){let c=$E(t);(n.preOrderHooks??=[]).push(e,c),(n.preOrderCheckHooks??=[]).push(e,c)}o&&(n.preOrderHooks??=[]).push(0-e,o),s&&((n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s))}function VA(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let s=e.data[n].type.prototype,{ngAfterContentInit:c,ngAfterContentChecked:u,ngAfterViewInit:d,ngAfterViewChecked:f,ngOnDestroy:m}=s;c&&(e.contentHooks??=[]).push(-n,c),u&&((e.contentHooks??=[]).push(n,u),(e.contentCheckHooks??=[]).push(n,u)),d&&(e.viewHooks??=[]).push(-n,d),f&&((e.viewHooks??=[]).push(n,f),(e.viewCheckHooks??=[]).push(n,f)),m!=null&&(e.destroyHooks??=[]).push(n,m)}}function _l(e,t,n){qE(e,t,3,n)}function vl(e,t,n,r){(e[K]&3)===n&&qE(e,t,n,r)}function Ff(e,t){let n=e[K];(n&3)===t&&(n&=16383,n+=1,e[K]=n)}function qE(e,t,n,r){let o=r!==void 0?e[Or]&65535:0,s=r??-1,c=t.length-1,u=0;for(let d=o;d<c;d++)if(typeof t[d+1]=="number"){if(u=t[d],r!=null&&u>=r)break}else t[d]<0&&(e[Or]+=65536),(u<s||s==-1)&&(BA(e,n,t,d),e[Or]=(e[Or]&4294901760)+d+2),d++}function gE(e,t){_e(4,e,t);let n=J(null);try{t.call(e)}finally{J(n),_e(5,e,t)}}function BA(e,t,n,r){let o=n[r]<0,s=n[r+1],c=o?-n[r]:n[r],u=e[c];o?e[K]>>14<e[Or]>>16&&(e[K]&3)===t&&(e[K]+=16384,gE(u,s)):gE(u,s)}var ro=-1,js=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,o){this.factory=t,this.name=o,this.canSeeViewProviders=n,this.injectImpl=r}};function HA(e){return(e.flags&8)!==0}function $A(e){return(e.flags&16)!==0}function zA(e,t,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let s=n[r++],c=n[r++],u=n[r++];e.setAttribute(t,c,u,s)}else{let s=o,c=n[++r];qA(s)?e.setProperty(t,s,c):e.setAttribute(t,s,c),r++}}return r}function WA(e){return e===3||e===4||e===6}function qA(e){return e.charCodeAt(0)===64}function ip(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?mE(e,n,o,null,t[++r]):mE(e,n,o,null,null))}}return e}function mE(e,t,n,r,o){let s=0,c=e.length;if(t===-1)c=-1;else for(;s<e.length;){let u=e[s++];if(typeof u=="number"){if(u===t){c=-1;break}else if(u>t){c=s-1;break}}}for(;s<e.length;){let u=e[s];if(typeof u=="number")break;if(u===n){o!==null&&(e[s+1]=o);return}s++,o!==null&&s++}c!==-1&&(e.splice(c,0,t),s=c+1),e.splice(s++,0,n),o!==null&&e.splice(s++,0,o)}function GE(e){return e!==ro}function Il(e){return e&32767}function GA(e){return e>>16}function wl(e,t){let n=GA(e),r=t;for(;n>0;)r=r[Qi],n--;return r}var Bf=!0;function _E(e){let t=Bf;return Bf=e,t}var ZA=256,ZE=ZA-1,KE=5,KA=0,cn={};function YA(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(xr)&&(r=n[xr]),r==null&&(r=n[xr]=KA++);let o=r&ZE,s=1<<o;t.data[e+(o>>KE)]|=s}function YE(e,t){let n=QE(e,t);if(n!==-1)return n;let r=t[Y];r.firstCreatePass&&(e.injectorIndex=t.length,jf(r.data,e),jf(t,null),jf(r.blueprint,null));let o=op(e,t),s=e.injectorIndex;if(GE(o)){let c=Il(o),u=wl(o,t),d=u[Y].data;for(let f=0;f<8;f++)t[s+f]=u[c+f]|d[c+f]}return t[s+8]=o,s}function jf(e,t){e.push(0,0,0,0,0,0,0,0,t)}function QE(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function op(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,o=t;for(;o!==null;){if(r=nI(o),r===null)return ro;if(n++,o=o[Qi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ro}function QA(e,t,n){YA(e,t,n)}function JE(e,t,n){if(n&8||e!==void 0)return e;il(t,"NodeInjector")}function XE(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let o=e[or],s=Et(void 0);try{return o?o.get(t,r,n&8):sf(t,r,n&8)}finally{Et(s)}}return JE(r,t,n)}function eI(e,t,n,r=0,o){if(e!==null){if(t[K]&2048&&!(r&2)){let c=nR(e,t,n,r,cn);if(c!==cn)return c}let s=tI(e,t,n,r,cn);if(s!==cn)return s}return XE(t,n,r,o)}function tI(e,t,n,r,o){let s=eR(n);if(typeof s=="function"){if(!Af(t,e,r))return r&1?JE(o,n,r):XE(t,n,r,o);try{let c;if(c=s(r),c==null&&!(r&8))il(n);else return c}finally{Rf()}}else if(typeof s=="number"){let c=null,u=QE(e,t),d=ro,f=r&1?t[Mt][Rt]:null;for((u===-1||r&4)&&(d=u===-1?op(e,t):t[u+8],d===ro||!yE(r,!1)?u=-1:(c=t[Y],u=Il(d),t=wl(d,t)));u!==-1;){let m=t[Y];if(vE(s,u,m.data)){let _=JA(u,t,n,c,r,f);if(_!==cn)return _}d=t[u+8],d!==ro&&yE(r,t[Y].data[u+8]===f)&&vE(s,u,t)?(c=m,u=Il(d),t=wl(d,t)):u=-1}}return o}function JA(e,t,n,r,o,s){let c=t[Y],u=c.data[e+8],d=r==null?Lr(u)&&Bf:r!=c&&(u.type&3)!==0,f=o&1&&s===u,m=XA(u,c,n,d,f);return m!==null?Hf(t,c,m,u,o):cn}function XA(e,t,n,r,o){let s=e.providerIndexes,c=t.data,u=s&1048575,d=e.directiveStart,f=e.directiveEnd,m=s>>20,_=r?u:u+m,v=o?u+m:f;for(let y=_;y<v;y++){let T=c[y];if(y<d&&n===T||y>=d&&T.type===n)return y}if(o){let y=c[d];if(y&&Fr(y)&&y.type===n)return d}return null}function Hf(e,t,n,r,o){let s=e[n],c=t.data;if(s instanceof js){let u=s;if(u.resolving){let y=Py(c[n]);throw of(y)}let d=_E(u.canSeeViewProviders);u.resolving=!0;let f=c[n].type||c[n],m,_=u.injectImpl?Et(u.injectImpl):null,v=Af(e,r,0);try{s=e[n]=u.factory(void 0,o,c,e,r),t.firstCreatePass&&n>=r.directiveStart&&UA(n,c[n],t)}finally{_!==null&&Et(_),_E(d),u.resolving=!1,Rf()}}return s}function eR(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(xr)?e[xr]:void 0;return typeof t=="number"?t>=0?t&ZE:tR:t}function vE(e,t,n){let r=1<<e;return!!(n[t+(e>>KE)]&r)}function yE(e,t){return!(e&2)&&!(e&1&&t)}var Vr=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return eI(this._tNode,this._lView,t,Ar(r),n)}};function tR(){return new Vr(Bt(),pt())}function Pl(e){return Hs(()=>{let t=e.prototype.constructor,n=t[_s]||$f(t),r=Object.prototype,o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){let s=o[_s]||$f(o);if(s&&s!==n)return s;o=Object.getPrototypeOf(o)}return s=>new s})}function $f(e){return Qh(e)?()=>{let t=$f(ut(e));return t&&t()}:Rr(e)}function nR(e,t,n,r,o){let s=e,c=t;for(;s!==null&&c!==null&&c[K]&2048&&!Xi(c);){let u=tI(s,c,n,r|2,cn);if(u!==cn)return u;let d=s.parent;if(!d){let f=c[gf];if(f){let m=f.get(n,cn,r);if(m!==cn)return m}d=nI(c),c=c[Qi]}s=d}return o}function nI(e){let t=e[Y],n=t.type;return n===2?t.declTNode:n===1?e[Rt]:null}function rR(){return sp(Bt(),pt())}function sp(e,t){return new rI(Mn(e,t))}var rI=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=rR}return e})();function iI(e){return(e.flags&128)===128}var ap=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(ap||{}),oI=new Map,iR=0;function oR(){return iR++}function sR(e){oI.set(e[Ss],e)}function zf(e){oI.delete(e[Ss])}var EE="__ngContext__";function Us(e,t){Rn(t)?(e[EE]=t[Ss],sR(t)):e[EE]=t}function sI(e){return cI(e[Yi])}function aI(e){return cI(e[At])}function cI(e){for(;e!==null&&!Ut(e);)e=e[At];return e}var Wf;function cp(e){Wf=e}function lI(){if(Wf!==void 0)return Wf;if(typeof document<"u")return document;throw new k(210,!1)}var xl=new F("",{providedIn:"root",factory:()=>aR}),aR="ng",kl=new F(""),$r=new F("",{providedIn:"platform",factory:()=>"unknown"});var Ol=new F("",{providedIn:"root",factory:()=>lI().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var cR="h",lR="b";var uI=!1,dI=new F("",{providedIn:"root",factory:()=>uI});var uR=(e,t,n,r)=>{};function dR(e,t,n,r){uR(e,t,n,r)}function lp(e){return(e.flags&32)===32}var hR=()=>null;function hI(e,t,n=!1){return hR(e,t,n)}function fI(e,t){let n=e.contentQueries;if(n!==null){let r=J(null);try{for(let o=0;o<n.length;o+=2){let s=n[o],c=n[o+1];if(c!==-1){let u=e.data[c];Nf(s),u.contentQueries(2,t[c],c)}}}finally{J(r)}}}function qf(e,t,n){Nf(0);let r=J(null);try{t(e,n)}finally{J(r)}}function pI(e,t,n){if(mf(t)){let r=J(null);try{let o=t.directiveStart,s=t.directiveEnd;for(let c=o;c<s;c++){let u=e.data[c];if(u.contentQueries){let d=n[c];u.contentQueries(1,d,c)}}}finally{J(r)}}}var Pn=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e})(Pn||{});function gI(e){return e instanceof Function?e():e}function fR(e,t,n){let r=e.length;for(;;){let o=e.indexOf(t,n);if(o===-1)return o;if(o===0||e.charCodeAt(o-1)<=32){let s=t.length;if(o+s===r||e.charCodeAt(o+s)<=32)return o}n=o+1}}var mI="ng-template";function pR(e,t,n,r){let o=0;if(r){for(;o<t.length&&typeof t[o]=="string";o+=2)if(t[o]==="class"&&fR(t[o+1].toLowerCase(),n,0)!==-1)return!0}else if(up(e))return!1;if(o=t.indexOf(1,o),o>-1){let s;for(;++o<t.length&&typeof(s=t[o])=="string";)if(s.toLowerCase()===n)return!0}return!1}function up(e){return e.type===4&&e.value!==mI}function gR(e,t,n){let r=e.type===4&&!n?mI:e.value;return t===r}function mR(e,t,n){let r=4,o=e.attrs,s=o!==null?yR(o):0,c=!1;for(let u=0;u<t.length;u++){let d=t[u];if(typeof d=="number"){if(!c&&!Ht(r)&&!Ht(d))return!1;if(c&&Ht(d))continue;c=!1,r=d|r&1;continue}if(!c)if(r&4){if(r=2|r&1,d!==""&&!gR(e,d,n)||d===""&&t.length===1){if(Ht(r))return!1;c=!0}}else if(r&8){if(o===null||!pR(e,o,d,n)){if(Ht(r))return!1;c=!0}}else{let f=t[++u],m=_R(d,o,up(e),n);if(m===-1){if(Ht(r))return!1;c=!0;continue}if(f!==""){let _;if(m>s?_="":_=o[m+1].toLowerCase(),r&2&&f!==_){if(Ht(r))return!1;c=!0}}}}return Ht(r)||c}function Ht(e){return(e&1)===0}function _R(e,t,n,r){if(t===null)return-1;let o=0;if(r||!n){let s=!1;for(;o<t.length;){let c=t[o];if(c===e)return o;if(c===3||c===6)s=!0;else if(c===1||c===2){let u=t[++o];for(;typeof u=="string";)u=t[++o];continue}else{if(c===4)break;if(c===0){o+=4;continue}}o+=s?1:2}return-1}else return ER(t,e)}function vR(e,t,n=!1){for(let r=0;r<t.length;r++)if(mR(e,t[r],n))return!0;return!1}function yR(e){for(let t=0;t<e.length;t++){let n=e[t];if(WA(n))return t}return e.length}function ER(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function IE(e,t){return e?":not("+t.trim()+")":t}function IR(e){let t=e[0],n=1,r=2,o="",s=!1;for(;n<e.length;){let c=e[n];if(typeof c=="string")if(r&2){let u=e[++n];o+="["+c+(u.length>0?'="'+u+'"':"")+"]"}else r&8?o+="."+c:r&4&&(o+=" "+c);else o!==""&&!Ht(c)&&(t+=IE(s,o),o=""),r=c,s=s||!Ht(r);n++}return o!==""&&(t+=IE(s,o)),t}function wR(e){return e.map(IR).join(",")}function TR(e){let t=[],n=[],r=1,o=2;for(;r<e.length;){let s=e[r];if(typeof s=="string")o===2?s!==""&&t.push(s,e[++r]):o===8&&n.push(s);else{if(!Ht(o))break;o=s}r++}return n.length&&t.push(1,...n),t}var dp={};function bR(e,t){return e.createText(t)}function _I(e,t,n){return e.createElement(t,n)}function Tl(e,t,n,r,o){e.insertBefore(t,n,r,o)}function vI(e,t,n){e.appendChild(t,n)}function wE(e,t,n,r,o){r!==null?Tl(e,t,n,r,o):vI(e,t,n)}function CR(e,t,n,r){e.removeChild(null,t,n,r)}function SR(e,t,n){e.setAttribute(t,"style",n)}function DR(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function yI(e,t,n){let{mergedAttrs:r,classes:o,styles:s}=n;r!==null&&zA(e,t,r),o!==null&&DR(e,t,o),s!==null&&SR(e,t,s)}function EI(e,t,n,r,o,s,c,u,d,f,m){let _=Pt+r,v=_+o,y=NR(_,v),T=typeof f=="function"?f():f;return y[Y]={type:e,blueprint:y,template:n,queries:null,viewQuery:u,declTNode:t,data:y.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof c=="function"?c():c,firstChild:null,schemas:d,consts:T,incompleteFirstPass:!1,ssrId:m}}function NR(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:dp);return n}function AR(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=EI(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function II(e,t,n,r,o,s,c,u,d,f,m){let _=t.blueprint.slice();return _[jt]=o,_[K]=r|4|128|8|64|1024,(f!==null||e&&e[K]&2048)&&(_[K]|=2048),vf(_),_[qe]=_[Qi]=e,_[dt]=n,_[An]=c||e&&e[An],_[ht]=u||e&&e[ht],_[or]=d||e&&e[or]||null,_[Rt]=s,_[Ss]=oR(),_[bs]=m,_[gf]=f,_[Mt]=t.type==2?e[Mt]:_,_}function RR(e,t,n){let r=Mn(t,e),o=AR(n),s=e[An].rendererFactory,c=bI(e,II(e,o,null,wI(n),r,t,null,s.createRenderer(r,n),null,null,null));return e[t.index]=c}function wI(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function TI(e,t,n,r){if(n===0)return-1;let o=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return o}function bI(e,t){return e[Yi]?e[pf][At]=t:e[Yi]=t,e[pf]=t,t}function MR(e,t,n,r){if(!r)if((t[K]&3)===3){let s=e.preOrderCheckHooks;s!==null&&_l(t,s,n)}else{let s=e.preOrderHooks;s!==null&&vl(t,s,0,n)}ar(n)}var Ll=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(Ll||{});function Gf(e,t,n,r){let o=J(null);try{let[s,c,u]=e.inputs[n],d=null;(c&Ll.SignalBased)!==0&&(d=t[s][st]),d!==null&&d.transformFn!==void 0?r=d.transformFn(r):u!==null&&(r=u.call(t,r)),e.setInput!==null?e.setInput(t,d,r,n,s):HE(t,d,s,r)}finally{J(o)}}var zr=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(zr||{}),PR;function hp(e,t){return PR(e,t)}var io=new Set,fp=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(fp||{}),$s=new F(""),TE=new Set;function pp(e){TE.has(e)||(TE.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var CI=!1,Zf=class extends ze{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,Hy()&&(this.destroyRef=C(Ur,{optional:!0})??void 0,this.pendingTasks=C(an,{optional:!0})??void 0)}emit(t){let n=J(null);try{super.next(t)}finally{J(n)}}subscribe(t,n,r){let o=t,s=n||(()=>null),c=r;if(t&&typeof t=="object"){let d=t;o=d.next?.bind(d),s=d.error?.bind(d),c=d.complete?.bind(d)}this.__isAsync&&(s=this.wrapInTimeout(s),o&&(o=this.wrapInTimeout(o)),c&&(c=this.wrapInTimeout(c)));let u=super.subscribe({next:o,error:s,complete:c});return t instanceof Te&&t.add(u),u}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Xe=Zf;function SI(e){let t,n;function r(){e=Os;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function bE(e){return queueMicrotask(()=>e()),()=>{e=Os}}var gp="isAngularZone",bl=gp+"_ID",xR=0,ye=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Xe(!1);onMicrotaskEmpty=new Xe(!1);onStable=new Xe(!1);onError=new Xe(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:s=CI}=t;if(typeof Zone>"u")throw new k(908,!1);Zone.assertZonePatched();let c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!o&&r,c.shouldCoalesceRunChangeDetection=o,c.callbackScheduled=!1,c.scheduleInRootZone=s,LR(c)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(gp)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new k(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new k(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,o){let s=this._inner,c=s.scheduleEventTask("NgZoneEvent: "+o,t,kR,Os,Os);try{return s.runTask(c,n,r)}finally{s.cancelTask(c)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},kR={};function mp(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function OR(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){SI(()=>{e.callbackScheduled=!1,Kf(e),e.isCheckStableRunning=!0,mp(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Kf(e)}function LR(e){let t=()=>{OR(e)},n=xR++;e._inner=e._inner.fork({name:"angular",properties:{[gp]:!0,[bl]:n,[bl+n]:!0},onInvokeTask:(r,o,s,c,u,d)=>{if(FR(d))return r.invokeTask(s,c,u,d);try{return CE(e),r.invokeTask(s,c,u,d)}finally{(e.shouldCoalesceEventChangeDetection&&c.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),SE(e)}},onInvoke:(r,o,s,c,u,d,f)=>{try{return CE(e),r.invoke(s,c,u,d,f)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!jR(d)&&t(),SE(e)}},onHasTask:(r,o,s,c)=>{r.hasTask(s,c),o===s&&(c.change=="microTask"?(e._hasPendingMicrotasks=c.microTask,Kf(e),mp(e)):c.change=="macroTask"&&(e.hasPendingMacrotasks=c.macroTask))},onHandleError:(r,o,s,c)=>(r.handleError(s,c),e.runOutsideAngular(()=>e.onError.emit(c)),!1)})}function Kf(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function CE(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function SE(e){e._nesting--,mp(e)}var Cl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Xe;onMicrotaskEmpty=new Xe;onStable=new Xe;onError=new Xe;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,o){return t.apply(n,r)}};function FR(e){return DI(e,"__ignore_ng_zone__")}function jR(e){return DI(e,"__scheduler_tick__")}function DI(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var NI=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=O({token:e,providedIn:"root",factory:()=>new e})}return e})();var UR=new F("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function AI(e,t,n){let r=e.get(UR);if(Array.isArray(t))for(let o of t)r.queue.add(o),n?.detachedLeaveAnimationFns?.push(o);else r.queue.add(t),n?.detachedLeaveAnimationFns?.push(t);r.scheduler&&r.scheduler(e)}function VR(e,t){for(let[n,r]of t)AI(e,r.animateFns)}function DE(e,t,n,r){let o=e?.[Ns]?.enter;t!==null&&o&&o.has(n.index)&&VR(r,o)}function no(e,t,n,r,o,s,c,u){if(o!=null){let d,f=!1;Ut(o)?d=o:Rn(o)&&(f=!0,o=o[jt]);let m=Vt(o);e===0&&r!==null?(DE(u,r,s,n),c==null?vI(t,r,m):Tl(t,r,m,c||null,!0)):e===1&&r!==null?(DE(u,r,s,n),Tl(t,r,m,c||null,!0)):e===2?NE(u,s,n,_=>{CR(t,m,f,_)}):e===3&&NE(u,s,n,()=>{t.destroyNode(m)}),d!=null&&XR(t,e,n,d,s,r,c)}}function BR(e,t){RI(e,t),t[jt]=null,t[Rt]=null}function HR(e,t,n,r,o,s){r[jt]=o,r[Rt]=t,Fl(e,r,n,1,o,s)}function RI(e,t){t[An].changeDetectionScheduler?.notify(9),Fl(e,t,t[ht],2,null,null)}function $R(e){let t=e[Yi];if(!t)return Uf(e[Y],e);for(;t;){let n=null;if(Rn(t))n=t[Yi];else{let r=t[ft];r&&(n=r)}if(!n){for(;t&&!t[At]&&t!==e;)Rn(t)&&Uf(t[Y],t),t=t[qe];t===null&&(t=e),Rn(t)&&Uf(t[Y],t),n=t&&t[At]}t=n}}function _p(e,t){let n=e[Rs],r=n.indexOf(t);n.splice(r,1)}function MI(e,t){if(jr(t))return;let n=t[ht];n.destroyNode&&Fl(e,t,n,3,null,null),$R(t)}function Uf(e,t){if(jr(t))return;let n=J(null);try{t[K]&=-129,t[K]|=256,t[It]&&ds(t[It]),qR(e,t),WR(e,t),t[Y].type===1&&t[ht].destroy();let r=t[Ji];if(r!==null&&Ut(t[qe])){r!==t[qe]&&_p(r,t);let o=t[Cs];o!==null&&o.detachView(e)}zf(t)}finally{J(n)}}function NE(e,t,n,r){let o=e?.[Ns];if(o==null||o.leave==null||!o.leave.has(t.index))return r(!1);e&&io.add(e),AI(n,()=>{if(o.leave&&o.leave.has(t.index)){let c=o.leave.get(t.index),u=[];if(c){for(let d=0;d<c.animateFns.length;d++){let f=c.animateFns[d],{promise:m}=f();u.push(m)}o.detachedLeaveAnimationFns=void 0}o.running=Promise.allSettled(u),zR(e,r)}else e&&io.delete(e),r(!1)},o)}function zR(e,t){let n=e[Ns]?.running;if(n){n.then(()=>{e[Ns].running=void 0,io.delete(e),t(!0)});return}t(!1)}function WR(e,t){let n=e.cleanup,r=t[Ki];if(n!==null)for(let c=0;c<n.length-1;c+=2)if(typeof n[c]=="string"){let u=n[c+3];u>=0?r[u]():r[-u].unsubscribe(),c+=2}else{let u=r[n[c+1]];n[c].call(u)}r!==null&&(t[Ki]=null);let o=t[Nn];if(o!==null){t[Nn]=null;for(let c=0;c<o.length;c++){let u=o[c];u()}}let s=t[Ds];if(s!==null){t[Ds]=null;for(let c of s)c.destroy()}}function qR(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=t[n[r]];if(!(o instanceof js)){let s=n[r+1];if(Array.isArray(s))for(let c=0;c<s.length;c+=2){let u=o[s[c]],d=s[c+1];_e(4,u,d);try{d.call(u)}finally{_e(5,u,d)}}else{_e(4,o,s);try{s.call(o)}finally{_e(5,o,s)}}}}}function GR(e,t,n){return ZR(e,t.parent,n)}function ZR(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[jt];if(Lr(r)){let{encapsulation:o}=e.data[r.directiveStart+r.componentOffset];if(o===Pn.None||o===Pn.Emulated)return null}return Mn(r,n)}function KR(e,t,n){return QR(e,t,n)}function YR(e,t,n){return e.type&40?Mn(e,n):null}var QR=YR,AE;function PI(e,t,n,r){let o=GR(e,r,t),s=t[ht],c=r.parent||t[Rt],u=KR(c,r,t);if(o!=null)if(Array.isArray(n))for(let d=0;d<n.length;d++)wE(s,o,n[d],u,!1);else wE(s,o,n,u,!1);AE!==void 0&&AE(s,r,t,n,o)}function Ls(e,t){if(t!==null){let n=t.type;if(n&3)return Mn(t,e);if(n&4)return Yf(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Ls(e,r);{let o=e[t.index];return Ut(o)?Yf(-1,o):Vt(o)}}else{if(n&128)return Ls(e,t.next);if(n&32)return hp(t,e)()||Vt(e[t.index]);{let r=xI(e,t);if(r!==null){if(Array.isArray(r))return r[0];let o=er(e[Mt]);return Ls(o,r)}else return Ls(e,t.next)}}}return null}function xI(e,t){if(t!==null){let r=e[Mt][Rt],o=t.projection;return r.projection[o]}return null}function Yf(e,t){let n=ft+e+1;if(n<t.length){let r=t[n],o=r[Y].firstChild;if(o!==null)return Ls(r,o)}return t[sr]}function vp(e,t,n,r,o,s,c){for(;n!=null;){let u=r[or];if(n.type===128){n=n.next;continue}let d=r[n.index],f=n.type;if(c&&t===0&&(d&&Us(Vt(d),r),n.flags|=2),!lp(n))if(f&8)vp(e,t,n.child,r,o,s,!1),no(t,e,u,o,d,n,s,r);else if(f&32){let m=hp(n,r),_;for(;_=m();)no(t,e,u,o,_,n,s,r);no(t,e,u,o,d,n,s,r)}else f&16?JR(e,t,r,n,o,s):no(t,e,u,o,d,n,s,r);n=c?n.projectionNext:n.next}}function Fl(e,t,n,r,o,s){vp(n,r,e.firstChild,t,o,s,!1)}function JR(e,t,n,r,o,s){let c=n[Mt],d=c[Rt].projection[r.projection];if(Array.isArray(d))for(let f=0;f<d.length;f++){let m=d[f];no(t,e,n[or],o,m,r,s,n)}else{let f=d,m=c[qe];iI(r)&&(f.flags|=128),vp(e,t,f,m,o,s,!0)}}function XR(e,t,n,r,o,s,c){let u=r[sr],d=Vt(r);u!==d&&no(t,e,n,s,u,o,c);for(let f=ft;f<r.length;f++){let m=r[f];Fl(m[Y],m,e,t,s,u)}}function kI(e,t,n,r,o){let s=lE(),c=r&2;try{ar(-1),c&&t.length>Pt&&MR(e,t,Pt,!1),_e(c?2:0,o,n),n(r,o)}finally{ar(s),_e(c?3:1,o,n)}}function OI(e,t,n){rM(e,t,n),(n.flags&64)===64&&iM(e,t,n)}function LI(e,t,n=Mn){let r=t.localNames;if(r!==null){let o=t.index+1;for(let s=0;s<r.length;s+=2){let c=r[s+1],u=c===-1?n(t,e):e[c];e[o++]=u}}}function eM(e,t,n,r){let s=r.get(dI,uI)||n===Pn.ShadowDom,c=e.selectRootElement(t,s);return tM(c),c}function tM(e){nM(e)}var nM=()=>null;function rM(e,t,n){let r=n.directiveStart,o=n.directiveEnd;Lr(n)&&RR(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||YE(n,t);let s=n.initialInputs;for(let c=r;c<o;c++){let u=e.data[c],d=Hf(t,e,c,n);if(Us(d,t),s!==null&&aM(t,c-r,d,u,n,s),Fr(u)){let f=sn(n.index,t);f[dt]=Hf(t,e,c,n)}}}function iM(e,t,n){let r=n.directiveStart,o=n.directiveEnd,s=n.index,c=oE();try{ar(s);for(let u=r;u<o;u++){let d=e.data[u],f=t[u];hl(u),(d.hostBindings!==null||d.hostVars!==0||d.hostAttrs!==null)&&oM(d,f)}}finally{ar(-1),hl(c)}}function oM(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function sM(e,t){let n=e.directiveRegistry,r=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];vR(t,s.selectors,!1)&&(r??=[],Fr(s)?r.unshift(s):r.push(s))}return r}function aM(e,t,n,r,o,s){let c=s[t];if(c!==null)for(let u=0;u<c.length;u+=2){let d=c[u],f=c[u+1];Gf(r,n,d,f)}}function FI(e,t,n,r,o){let s=Pt+n,c=t[Y],u=o(c,t,e,r,n);t[s]=u,ks(e,!0);let d=e.type===2;return d?(yI(t[ht],u,e),(Yy()===0||cl(e))&&Us(u,t),Qy()):Us(u,t),Mf()&&(!d||!lp(e))&&PI(c,t,u,e),e}function jI(e){let t=e;return Cf()?tE():(t=t.parent,ks(t,!1)),t}function cM(e,t){let n=e[or];if(!n)return;let r;try{r=n.get(xt,null)}catch{r=null}r?.(t)}function UI(e,t,n,r,o){let s=e.inputs?.[r],c=e.hostDirectiveInputs?.[r],u=!1;if(c)for(let d=0;d<c.length;d+=2){let f=c[d],m=c[d+1],_=t.data[f];Gf(_,n[f],m,o),u=!0}if(s)for(let d of s){let f=n[d],m=t.data[d];Gf(m,f,r,o),u=!0}return u}function lM(e,t){let n=sn(t,e),r=n[Y];uM(r,n);let o=n[jt];o!==null&&n[bs]===null&&(n[bs]=hI(o,n[or])),_e(18),VI(r,n,n[dt]),_e(19,n[dt])}function uM(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function VI(e,t,n){fl(t);try{let r=e.viewQuery;r!==null&&qf(1,r,n);let o=e.template;o!==null&&kI(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Cs]?.finishViewCreation(e),e.staticContentQueries&&fI(e,t),e.staticViewQueries&&qf(2,e.viewQuery,n);let s=e.components;s!==null&&dM(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[K]&=-5,pl()}}function dM(e,t){for(let n=0;n<t.length;n++)lM(e,t[n])}function RE(e,t){return!t||t.firstChild===null||iI(e)}function Vs(e,t,n,r,o=!1){for(;n!==null;){if(n.type===128){n=o?n.projectionNext:n.next;continue}let s=t[n.index];s!==null&&r.push(Vt(s)),Ut(s)&&BI(s,r);let c=n.type;if(c&8)Vs(e,t,n.child,r);else if(c&32){let u=hp(n,t),d;for(;d=u();)r.push(d)}else if(c&16){let u=xI(t,n);if(Array.isArray(u))r.push(...u);else{let d=er(t[Mt]);Vs(d[Y],d,u,r,!0)}}n=o?n.projectionNext:n.next}return r}function BI(e,t){for(let n=ft;n<e.length;n++){let r=e[n],o=r[Y].firstChild;o!==null&&Vs(r[Y],r,o,t)}e[sr]!==e[jt]&&t.push(e[sr])}function HI(e){if(e[al]!==null){for(let t of e[al])t.impl.addSequence(t);e[al].length=0}}var $I=[];function hM(e){return e[It]??fM(e)}function fM(e){let t=$I.pop()??Object.create(gM);return t.lView=e,t}function pM(e){e.lView[It]!==e&&(e.lView=null,$I.push(e))}var gM=ge(R({},as),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{xs(e.lView)},consumerOnSignalRead(){this.lView[It]=this}});function mM(e){let t=e[It]??Object.create(_M);return t.lView=e,t}var _M=ge(R({},as),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=er(e.lView);for(;t&&!zI(t[Y]);)t=er(t);t&&yf(t)},consumerOnSignalRead(){this.lView[It]=this}});function zI(e){return e.type!==2}function WI(e){if(e[Ds]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[Ds])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[K]&8192)}}var vM=100;function qI(e,t=0){let r=e[An].rendererFactory,o=!1;o||r.begin?.();try{yM(e,t)}finally{o||r.end?.()}}function yM(e,t){let n=Sf();try{Df(!0),Qf(e,t);let r=0;for(;Ps(e);){if(r===vM)throw new k(103,!1);r++,Qf(e,1)}}finally{Df(n)}}function EM(e,t,n,r){if(jr(t))return;let o=t[K],s=!1,c=!1;fl(t);let u=!0,d=null,f=null;s||(zI(e)?(f=hM(t),d=ls(f)):Nc()===null?(u=!1,f=mM(t),d=ls(f)):t[It]&&(ds(t[It]),t[It]=null));try{vf(t),nE(e.bindingStartIndex),n!==null&&kI(e,t,n,2,r);let m=(o&3)===3;if(!s)if(m){let y=e.preOrderCheckHooks;y!==null&&_l(t,y,null)}else{let y=e.preOrderHooks;y!==null&&vl(t,y,0,null),Ff(t,0)}if(c||IM(t),WI(t),GI(t,0),e.contentQueries!==null&&fI(e,t),!s)if(m){let y=e.contentCheckHooks;y!==null&&_l(t,y)}else{let y=e.contentHooks;y!==null&&vl(t,y,1),Ff(t,1)}TM(e,t);let _=e.components;_!==null&&KI(t,_,0);let v=e.viewQuery;if(v!==null&&qf(2,v,r),!s)if(m){let y=e.viewCheckHooks;y!==null&&_l(t,y)}else{let y=e.viewHooks;y!==null&&vl(t,y,2),Ff(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[sl]){for(let y of t[sl])y();t[sl]=null}s||(HI(t),t[K]&=-73)}catch(m){throw s||xs(t),m}finally{f!==null&&(Ac(f,d),u&&pM(f)),pl()}}function GI(e,t){for(let n=sI(e);n!==null;n=aI(n))for(let r=ft;r<n.length;r++){let o=n[r];ZI(o,t)}}function IM(e){for(let t=sI(e);t!==null;t=aI(t)){if(!(t[K]&2))continue;let n=t[Rs];for(let r=0;r<n.length;r++){let o=n[r];yf(o)}}}function wM(e,t,n){_e(18);let r=sn(t,e);ZI(r,n),_e(19,r[dt])}function ZI(e,t){ll(e)&&Qf(e,t)}function Qf(e,t){let r=e[Y],o=e[K],s=e[It],c=!!(t===0&&o&16);if(c||=!!(o&64&&t===0),c||=!!(o&1024),c||=!!(s?.dirty&&us(s)),c||=!1,s&&(s.dirty=!1),e[K]&=-9217,c)EM(r,e,r.template,e[dt]);else if(o&8192){let u=J(null);try{WI(e),GI(e,1);let d=r.components;d!==null&&KI(e,d,1),HI(e)}finally{J(u)}}}function KI(e,t,n){for(let r=0;r<t.length;r++)wM(e,t[r],n)}function TM(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)ar(~o);else{let s=o,c=n[++r],u=n[++r];iE(c,s);let d=t[s];_e(24,d),u(2,d),_e(25,d)}}}finally{ar(-1)}}function yp(e,t){let n=Sf()?64:1088;for(e[An].changeDetectionScheduler?.notify(t);e;){e[K]|=n;let r=er(e);if(Xi(e)&&!r)return e;e=r}return null}function bM(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function CM(e,t,n,r=!0){let o=t[Y];if(SM(o,t,e,n),r){let c=Yf(n,e),u=t[ht],d=u.parentNode(e[sr]);d!==null&&HR(o,e[Rt],u,t,d,c)}let s=t[bs];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Jf(e,t){if(e.length<=ft)return;let n=ft+t,r=e[n];if(r){let o=r[Ji];o!==null&&o!==e&&_p(o,r),t>0&&(e[n-1][At]=r[At]);let s=Is(e,ft+t);BR(r[Y],r);let c=s[Cs];c!==null&&c.detachView(s[Y]),r[qe]=null,r[At]=null,r[K]&=-129}return r}function SM(e,t,n,r){let o=ft+r,s=n.length;r>0&&(n[o-1][At]=t),r<s-ft?(t[At]=n[o],af(n,ft+r,t)):(n.push(t),t[At]=null),t[qe]=n;let c=t[Ji];c!==null&&n!==c&&YI(c,t);let u=t[Cs];u!==null&&u.insertView(e),ul(t),t[K]|=128}function YI(e,t){let n=e[Rs],r=t[qe];if(Rn(r))e[K]|=2;else{let o=r[qe][Mt];t[Mt]!==o&&(e[K]|=2)}n===null?e[Rs]=[t]:n.push(t)}var Br=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[Y];return Vs(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[dt]}set context(t){this._lView[dt]=t}get destroyed(){return jr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[qe];if(Ut(t)){let n=t[As],r=n?n.indexOf(this):-1;r>-1&&(Jf(t,r),Is(n,r))}this._attachedToViewContainer=!1}MI(this._lView[Y],this._lView)}onDestroy(t){Ef(this._lView,t)}markForCheck(){yp(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[K]&=-129}reattach(){ul(this._lView),this._lView[K]|=128}detectChanges(){this._lView[K]|=1024,qI(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new k(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Xi(this._lView),n=this._lView[Ji];n!==null&&!t&&_p(n,this._lView),RI(this._lView[Y],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new k(902,!1);this._appRef=t;let n=Xi(this._lView),r=this._lView[Ji];r!==null&&!n&&YI(r,this._lView),ul(this._lView)}};function Ep(e,t,n,r,o){let s=e.data[t];if(s===null)s=DM(e,t,n,r,o),rE()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=o;let c=eE();s.injectorIndex=c===null?-1:c.injectorIndex}return ks(s,!0),s}function DM(e,t,n,r,o){let s=bf(),c=Cf(),u=c?s:s&&s.parent,d=e.data[t]=AM(e,u,n,t,r,o);return NM(e,d,s,c),d}function NM(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function AM(e,t,n,r,o,s){let c=t?t.injectorIndex:-1,u=0;return Xy()&&(u|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:c,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:u,providerIndexes:0,value:o,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var nq=new RegExp(`^(\\d+)*(${lR}|${cR})*(.*)`);var RM=()=>null;function ME(e,t){return RM(e,t)}var QI=class{},jl=class{},Xf=class{resolveComponentFactory(t){throw new k(917,!1)}},zs=class{static NULL=new Xf},Hr=class{};var JI=(()=>{class e{static \u0275prov=O({token:e,providedIn:"root",factory:()=>null})}return e})();var yl={},ep=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let o=this.injector.get(t,yl,r);return o!==yl||n===yl?o:this.parentInjector.get(t,n,r)}};function Sl(e,t,n){let r=n?e.styles:null,o=n?e.classes:null,s=0;if(t!==null)for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="number")s=u;else if(s==1)o=Yh(o,u);else if(s==2){let d=u,f=t[++c];r=Yh(r,d+": "+f+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=o:e.classesWithoutHost=o}function Ul(e,t=0){let n=pt();if(n===null)return W(e,t);let r=Bt();return eI(r,n,ut(e),t)}function MM(e,t,n,r,o){let s=r===null?null:{"":-1},c=o(e,n);if(c!==null){let u=c,d=null,f=null;for(let m of c)if(m.resolveHostDirectives!==null){[u,d,f]=m.resolveHostDirectives(c);break}kM(e,t,n,u,s,d,f)}s!==null&&r!==null&&PM(n,r,s)}function PM(e,t,n){let r=e.localNames=[];for(let o=0;o<t.length;o+=2){let s=n[t[o+1]];if(s==null)throw new k(-301,!1);r.push(t[o],s)}}function xM(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function kM(e,t,n,r,o,s,c){let u=r.length,d=!1;for(let v=0;v<u;v++){let y=r[v];!d&&Fr(y)&&(d=!0,xM(e,n,v)),QA(YE(n,t),e,y.type)}VM(n,e.data.length,u);for(let v=0;v<u;v++){let y=r[v];y.providersResolver&&y.providersResolver(y)}let f=!1,m=!1,_=TI(e,t,u,null);u>0&&(n.directiveToIndex=new Map);for(let v=0;v<u;v++){let y=r[v];if(n.mergedAttrs=ip(n.mergedAttrs,y.hostAttrs),LM(e,n,t,_,y),UM(_,y,o),c!==null&&c.has(y)){let[N,P]=c.get(y);n.directiveToIndex.set(y.type,[_,N+n.directiveStart,P+n.directiveStart])}else(s===null||!s.has(y))&&n.directiveToIndex.set(y.type,_);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let T=y.type.prototype;!f&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),f=!0),!m&&(T.ngOnChanges||T.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),m=!0),_++}OM(e,n,s)}function OM(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let o=e.data[r];if(n===null||!n.has(o))PE(0,t,o,r),PE(1,t,o,r),kE(t,r,!1);else{let s=n.get(o);xE(0,t,s,r),xE(1,t,s,r),kE(t,r,!0)}}}function PE(e,t,n,r){let o=e===0?n.inputs:n.outputs;for(let s in o)if(o.hasOwnProperty(s)){let c;e===0?c=t.inputs??={}:c=t.outputs??={},c[s]??=[],c[s].push(r),XI(t,s)}}function xE(e,t,n,r){let o=e===0?n.inputs:n.outputs;for(let s in o)if(o.hasOwnProperty(s)){let c=o[s],u;e===0?u=t.hostDirectiveInputs??={}:u=t.hostDirectiveOutputs??={},u[c]??=[],u[c].push(r,s),XI(t,c)}}function XI(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function kE(e,t,n){let{attrs:r,inputs:o,hostDirectiveInputs:s}=e;if(r===null||!n&&o===null||n&&s===null||up(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let c=null,u=0;for(;u<r.length;){let d=r[u];if(d===0){u+=4;continue}else if(d===5){u+=2;continue}else if(typeof d=="number")break;if(!n&&o.hasOwnProperty(d)){let f=o[d];for(let m of f)if(m===t){c??=[],c.push(d,r[u+1]);break}}else if(n&&s.hasOwnProperty(d)){let f=s[d];for(let m=0;m<f.length;m+=2)if(f[m]===t){c??=[],c.push(f[m+1],r[u+1]);break}}u+=2}e.initialInputs??=[],e.initialInputs.push(c)}function LM(e,t,n,r,o){e.data[r]=o;let s=o.factory||(o.factory=Rr(o.type,!0)),c=new js(s,Fr(o),Ul,null);e.blueprint[r]=c,n[r]=c,FM(e,t,r,TI(e,n,o.hostVars,dp),o)}function FM(e,t,n,r,o){let s=o.hostBindings;if(s){let c=e.hostBindingOpCodes;c===null&&(c=e.hostBindingOpCodes=[]);let u=~t.index;jM(c)!=u&&c.push(u),c.push(n,r,s)}}function jM(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function UM(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Fr(t)&&(n[""]=e)}}function VM(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function ew(e,t,n,r,o,s,c,u){let d=t[Y],f=d.consts,m=Ms(f,c),_=Ep(d,e,n,r,m);return s&&MM(d,t,_,Ms(f,u),o),_.mergedAttrs=ip(_.mergedAttrs,_.attrs),_.attrs!==null&&Sl(_,_.attrs,!1),_.mergedAttrs!==null&&Sl(_,_.mergedAttrs,!0),d.queries!==null&&d.queries.elementStart(d,_),_}function tw(e,t){VA(e,t),mf(t)&&e.queries.elementEnd(t)}function BM(e,t,n,r,o,s){let c=t.consts,u=Ms(c,o),d=Ep(t,e,n,r,u);if(d.mergedAttrs=ip(d.mergedAttrs,d.attrs),s!=null){let f=Ms(c,s);d.localNames=[];for(let m=0;m<f.length;m+=2)d.localNames.push(f[m],-1)}return d.attrs!==null&&Sl(d,d.attrs,!1),d.mergedAttrs!==null&&Sl(d,d.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,d),d}function HM(e,t,n){return function r(o){let s=Lr(e)?sn(e.index,t):t;yp(s,5);let c=t[dt],u=OE(t,c,n,o),d=r.__ngNextListenerFn__;for(;d;)u=OE(t,c,d,o)&&u,d=d.__ngNextListenerFn__;return u}}function OE(e,t,n,r){let o=J(null);try{return _e(6,t,n),n(r)!==!1}catch(s){return cM(e,s),!1}finally{_e(7,t,n),J(o)}}function $M(e,t,n,r,o,s,c,u){let d=cl(e),f=!1,m=null;if(!r&&d&&(m=WM(t,n,s,e.index)),m!==null){let _=m.__ngLastListenerFn__||m;_.__ngNextListenerFn__=c,m.__ngLastListenerFn__=c,f=!0}else{let _=Mn(e,n),v=r?r(_):_;dR(n,v,s,u);let y=o.listen(v,s,u);if(!zM(s)){let T=r?N=>r(Vt(N[e.index])):e.index;qM(T,t,n,s,u,y,!1)}}return f}function zM(e){return e.startsWith("animation")||e.startsWith("transition")}function WM(e,t,n,r){let o=e.cleanup;if(o!=null)for(let s=0;s<o.length-1;s+=2){let c=o[s];if(c===n&&o[s+1]===r){let u=t[Ki],d=o[s+2];return u&&u.length>d?u[d]:null}typeof c=="string"&&(s+=2)}return null}function qM(e,t,n,r,o,s,c){let u=t.firstCreatePass?Ky(t):null,d=Zy(n),f=d.length;d.push(o,s),u&&u.push(r,e,f,(f+1)*(c?-1:1))}var tp=Symbol("BINDING");var Dl=class extends zs{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=rr(t);return new oo(n,this.ngModule)}};function GM(e){return Object.keys(e).map(t=>{let[n,r,o]=e[t],s={propName:n,templateName:t,isSignal:(r&Ll.SignalBased)!==0};return o&&(s.transform=o),s})}function ZM(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function KM(e,t,n){let r=t instanceof xe?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new ep(n,r):n}function YM(e){let t=e.get(Hr,null);if(t===null)throw new k(407,!1);let n=e.get(JI,null),r=e.get(tr,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function QM(e,t){let n=nw(e);return _I(t,n,n==="svg"?zy:n==="math"?Wy:null)}function nw(e){return(e.selectors[0][0]||"div").toLowerCase()}var oo=class extends jl{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=GM(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=ZM(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=wR(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,o,s,c){_e(22);let u=J(null);try{let d=this.componentDef,f=JM(r,d,c,s),m=KM(d,o||this.ngModule,t),_=YM(m),v=_.rendererFactory.createRenderer(null,d),y=r?eM(v,r,d.encapsulation,m):QM(d,v),T=c?.some(LE)||s?.some(x=>typeof x!="function"&&x.bindings.some(LE)),N=II(null,f,null,512|wI(d),null,null,_,v,m,null,hI(y,m,!0));N[Pt]=y,fl(N);let P=null;try{let x=ew(Pt,N,2,"#host",()=>f.directiveRegistry,!0,0);yI(v,y,x),Us(y,N),OI(f,N,x),pI(f,x,N),tw(f,x),n!==void 0&&eP(x,this.ngContentSelectors,n),P=sn(x.index,N),N[dt]=P[dt],VI(f,N,null)}catch(x){throw P!==null&&zf(P),zf(N),x}finally{_e(23),pl()}return new Nl(this.componentType,N,!!T)}finally{J(u)}}};function JM(e,t,n,r){let o=e?["ng-version","20.3.12"]:TR(t.selectors[0]),s=null,c=null,u=0;if(n)for(let m of n)u+=m[tp].requiredVars,m.create&&(m.targetIdx=0,(s??=[]).push(m)),m.update&&(m.targetIdx=0,(c??=[]).push(m));if(r)for(let m=0;m<r.length;m++){let _=r[m];if(typeof _!="function")for(let v of _.bindings){u+=v[tp].requiredVars;let y=m+1;v.create&&(v.targetIdx=y,(s??=[]).push(v)),v.update&&(v.targetIdx=y,(c??=[]).push(v))}}let d=[t];if(r)for(let m of r){let _=typeof m=="function"?m:m.type,v=df(_);d.push(v)}return EI(0,null,XM(s,c),1,u,d,null,null,null,[o],null)}function XM(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function LE(e){let t=e[tp].kind;return t==="input"||t==="twoWay"}var Nl=class extends QI{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=_f(n[Y],Pt),this.location=sp(this._tNode,n),this.instance=sn(this._tNode.index,n)[dt],this.hostView=this.changeDetectorRef=new Br(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView,s=UI(r,o[Y],o,t,n);this.previousInputValues.set(t,n);let c=sn(r.index,o);yp(c,1)}get injector(){return new Vr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function eP(e,t,n){let r=e.projection=[];for(let o=0;o<t.length;o++){let s=n[o];r.push(s!=null&&s.length?Array.from(s):null)}}var Vl=(()=>{class e{static __NG_ELEMENT_ID__=tP}return e})();function tP(){let e=Bt();return rP(e,pt())}var nP=Vl,rw=class extends nP{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return sp(this._hostTNode,this._hostLView)}get injector(){return new Vr(this._hostTNode,this._hostLView)}get parentInjector(){let t=op(this._hostTNode,this._hostLView);if(GE(t)){let n=wl(t,this._hostLView),r=Il(t),o=n[Y].data[r+8];return new Vr(o,n)}else return new Vr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=FE(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-ft}createEmbeddedView(t,n,r){let o,s;typeof r=="number"?o=r:r!=null&&(o=r.index,s=r.injector);let c=ME(this._lContainer,t.ssrId),u=t.createEmbeddedViewImpl(n||{},s,c);return this.insertImpl(u,o,RE(this._hostTNode,c)),u}createComponent(t,n,r,o,s,c,u){let d=t&&!OA(t),f;if(d)f=n;else{let P=n||{};f=P.index,r=P.injector,o=P.projectableNodes,s=P.environmentInjector||P.ngModuleRef,c=P.directives,u=P.bindings}let m=d?t:new oo(rr(t)),_=r||this.parentInjector;if(!s&&m.ngModule==null){let x=(d?_:this.parentInjector).get(xe,null);x&&(s=x)}let v=rr(m.componentType??{}),y=ME(this._lContainer,v?.id??null),T=y?.firstChild??null,N=m.create(_,o,T,s,c,u);return this.insertImpl(N.hostView,f,RE(this._hostTNode,y)),N}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let o=t._lView;if(qy(o)){let u=this.indexOf(t);if(u!==-1)this.detach(u);else{let d=o[qe],f=new rw(d,d[Rt],d[qe]);f.detach(f.indexOf(t))}}let s=this._adjustIndex(n),c=this._lContainer;return CM(c,o,s,r),t.attachToViewContainerRef(),af(Vf(c),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=FE(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Jf(this._lContainer,n);r&&(Is(Vf(this._lContainer),n),MI(r[Y],r))}detach(t){let n=this._adjustIndex(t,-1),r=Jf(this._lContainer,n);return r&&Is(Vf(this._lContainer),n)!=null?new Br(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function FE(e){return e[As]}function Vf(e){return e[As]||(e[As]=[])}function rP(e,t){let n,r=t[e.index];return Ut(r)?n=r:(n=bM(r,t,null,e),t[e.index]=n,bI(t,n)),oP(n,t,e,r),new rw(n,e,t)}function iP(e,t){let n=e[ht],r=n.createComment(""),o=Mn(t,e),s=n.parentNode(o);return Tl(n,s,r,n.nextSibling(o),!1),r}var oP=sP;function sP(e,t,n,r){if(e[sr])return;let o;n.type&8?o=Vt(r):o=iP(t,n),e[sr]=o}var so=class{},Bl=class{};var Al=class extends so{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Dl(this);constructor(t,n,r,o=!0){super(),this.ngModuleType=t,this._parent=n;let s=uf(t);this._bootstrapComponents=gI(s.bootstrap),this._r3Injector=xf(t,n,[{provide:so,useValue:this},{provide:zs,useValue:this.componentFactoryResolver},...r],Xn(t),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Rl=class extends Bl{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Al(this.moduleType,t,[])}};var Bs=class extends so{injector;componentFactoryResolver=new Dl(this);instance=null;constructor(t){super();let n=new Pr([...t.providers,{provide:so,useValue:this},{provide:zs,useValue:this.componentFactoryResolver}],t.parent||Ts(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Ws(e,t,n=null){return new Bs({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var aP=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=hf(!1,n.type),o=r.length>0?Ws([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=O({token:e,providedIn:"environment",factory:()=>new e(W(xe))})}return e})();function Wr(e){return Hs(()=>{let t=iw(e),n=ge(R({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===ap.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?o=>o.get(aP).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Pn.Emulated,styles:e.styles||Mr,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&pp("NgStandalone"),ow(n);let r=e.dependencies;return n.directiveDefs=jE(r,cP),n.pipeDefs=jE(r,Fy),n.id=dP(n),n})}function cP(e){return rr(e)||df(e)}function lP(e,t){if(e==null)return kr;let n={};for(let r in e)if(e.hasOwnProperty(r)){let o=e[r],s,c,u,d;Array.isArray(o)?(u=o[0],s=o[1],c=o[2]??s,d=o[3]||null):(s=o,c=o,u=Ll.None,d=null),n[s]=[r,u,d],t[s]=c}return n}function uP(e){if(e==null)return kr;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Ip(e){return Hs(()=>{let t=iw(e);return ow(t),t})}function iw(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||kr,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||Mr,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:lP(e.inputs,t),outputs:uP(e.outputs),debugInfo:null}}function ow(e){e.features?.forEach(t=>t(e))}function jE(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let o of n){let s=t(o);s!==null&&r.push(s)}return r}:null}function dP(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let s of r.join("|"))t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}var wp=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var Tp=new F("");function qs(e){return!!e&&typeof e.then=="function"}function sw(e){return!!e&&typeof e.subscribe=="function"}var aw=new F("");var bp=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=C(aw,{optional:!0})??[];injector=C(Ke);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let o of this.appInits){let s=ke(this.injector,o);if(qs(s))n.push(s);else if(sw(s)){let c=new Promise((u,d)=>{s.subscribe({complete:u,error:d})});n.push(c)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Hl=new F("");function cw(){_h(()=>{let e="";throw new k(600,e)})}function lw(e){return e.isBoundToModule}var hP=10;var qr=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=C(xt);afterRenderManager=C(NI);zonelessEnabled=C(gl);rootEffectScheduler=C(Lf);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ze;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=C(an);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(se(n=>!n))}constructor(){C($s,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=C(xe);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,o=Ke.NULL){return this._injector.get(ye).run(()=>{_e(10);let c=n instanceof jl;if(!this._injector.get(bp).done){let T="";throw new k(405,T)}let d;c?d=n:d=this._injector.get(zs).resolveComponentFactory(n),this.componentTypes.push(d.componentType);let f=lw(d)?void 0:this._injector.get(so),m=r||d.selector,_=d.create(o,[],m,f),v=_.location.nativeElement,y=_.injector.get(Tp,null);return y?.registerApplication(v),_.onDestroy(()=>{this.detachView(_.hostView),Fs(this.components,_),y?.unregisterApplication(v)}),this._loadComponent(_),_e(11,_),_})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){_e(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(fp.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new k(101,!1);let n=J(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,J(n),this.afterTick.next(),_e(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Hr,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<hP;)_e(14),this.synchronizeOnce(),_e(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews){if(!r&&!Ps(o))continue;let s=r&&!this.zonelessEnabled?0:1;qI(o,s),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ps(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Fs(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(n),this._injector.get(Hl,[]).forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Fs(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new k(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Fs(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}var lq=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function UE(e,t,n,r,o){UI(t,e,n,o?"class":"style",r)}function Cp(e,t,n,r){let o=pt(),s=o[Y],c=e+Pt,u=s.firstCreatePass?ew(c,o,2,t,sM,Jy(),n,r):s.data[c];if(FI(u,o,e,t,uw),cl(u)){let d=o[Y];OI(d,o,u),pI(d,u,o)}return r!=null&&LI(o,u),Cp}function Sp(){let e=dl(),t=Bt(),n=jI(t);return e.firstCreatePass&&tw(e,n),wf(n)&&Tf(),If(),n.classesWithoutHost!=null&&HA(n)&&UE(e,n,pt(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&$A(n)&&UE(e,n,pt(),n.stylesWithoutHost,!1),Sp}function ao(e,t,n,r){return Cp(e,t,n,r),Sp(),ao}function Gr(e,t,n,r){let o=pt(),s=o[Y],c=e+Pt,u=s.firstCreatePass?BM(c,s,2,t,n,r):s.data[c];return FI(u,o,e,t,uw),r!=null&&LI(o,u),Gr}function co(){let e=Bt(),t=jI(e);return wf(t)&&Tf(),If(),co}function $l(e,t,n,r){return Gr(e,t,n,r),co(),$l}var uw=(e,t,n,r,o)=>(Pf(!0),_I(t[ht],r,uE()));var Gs="en-US";var fP=Gs;function dw(e){typeof e=="string"&&(fP=e.toLowerCase().replace(/_/g,"-"))}function zl(e,t,n){let r=pt(),o=dl(),s=Bt();return(s.type&3||n)&&$M(s,o,r,n,r[ht],e,t,HM(s,r,t)),zl}function Wl(e,t=""){let n=pt(),r=dl(),o=e+Pt,s=r.firstCreatePass?Ep(r,o,1,t,null):r.data[o],c=pP(r,n,s,t,e);n[o]=c,Mf()&&PI(r,n,c,s),ks(s,!1)}var pP=(e,t,n,r,o)=>(Pf(!0),bR(t[ht],r));var Ml=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Dp=(()=>{class e{compileModuleSync(n){return new Rl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),o=uf(n),s=gI(o.declarations).reduce((c,u)=>{let d=rr(u);return d&&c.push(new oo(d)),c},[]);return new Ml(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var gP=(()=>{class e{zone=C(ye);changeDetectionScheduler=C(tr);applicationRef=C(qr);applicationErrorHandler=C(xt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function hw({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new ye(ge(R({},fw()),{scheduleInRootZone:n})),[{provide:ye,useFactory:e},{provide:nr,multi:!0,useFactory:()=>{let r=C(gP,{optional:!0});return()=>r.initialize()}},{provide:nr,multi:!0,useFactory:()=>{let r=C(mP);return()=>{r.initialize()}}},t===!0?{provide:kf,useValue:!0}:[],{provide:Of,useValue:n??CI},{provide:xt,useFactory:()=>{let r=C(ye),o=C(xe),s;return c=>{r.runOutsideAngular(()=>{o.destroyed&&!s?setTimeout(()=>{throw c}):(s??=o.get(on),s.handleError(c))})}}}]}function fw(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var mP=(()=>{class e{subscription=new Te;initialized=!1;zone=C(ye);pendingTasks=C(an);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ye.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var pw=(()=>{class e{applicationErrorHandler=C(xt);appRef=C(qr);taskService=C(an);ngZone=C(ye);zonelessEnabled=C(gl);tracing=C($s,{optional:!0});disableScheduling=C(kf,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Te;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(bl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(C(Of,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Cl||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let o=this.useMicrotaskScheduler?bE:SI;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(bl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,bE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function _P(){return typeof $localize<"u"&&$localize.locale||Gs}var Np=new F("",{providedIn:"root",factory:()=>C(Np,{optional:!0,skipSelf:!0})||_P()});function cr(e){return Dy(e)}var gw=class{[st];constructor(t){this[st]=t}destroy(){this[st].destroy()}};var yw=Symbol("InputSignalNode#UNSET"),DP=ge(R({},Rc),{transformFn:void 0,applyValueToInputSignal(e,t){Pi(e,t)}});function Ew(e,t){let n=Object.create(DP);n.value=e,n.transformFn=t?.transform;function r(){if(cs(n),n.value===yw){let o=null;throw new k(-950,o)}return n.value}return r[st]=n,r}var NP=new F("");NP.__NG_ELEMENT_ID__=e=>{let t=Bt();if(t===null)throw new k(204,!1);if(t.type&2)return t.value;if(e&8)return null;throw new k(204,!1)};function mw(e,t){return Ew(e,t)}function AP(e){return Ew(yw,e)}var Iw=(mw.required=AP,mw);var Ap=new F(""),RP=new F("");function Zs(e){return!e.moduleRef}function MP(e){let t=Zs(e)?e.r3Injector:e.moduleRef.injector,n=t.get(ye);return n.run(()=>{Zs(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(xt),o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:r})}),Zs(e)){let s=()=>t.destroy(),c=e.platformInjector.get(Ap);c.add(s),t.onDestroy(()=>{o.unsubscribe(),c.delete(s)})}else{let s=()=>e.moduleRef.destroy(),c=e.platformInjector.get(Ap);c.add(s),e.moduleRef.onDestroy(()=>{Fs(e.allPlatformModules,e.moduleRef),o.unsubscribe(),c.delete(s)})}return xP(r,n,()=>{let s=t.get(an),c=s.add(),u=t.get(bp);return u.runInitializers(),u.donePromise.then(()=>{let d=t.get(Np,Gs);if(dw(d||Gs),!t.get(RP,!0))return Zs(e)?t.get(qr):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(Zs(e)){let m=t.get(qr);return e.rootComponent!==void 0&&m.bootstrap(e.rootComponent),m}else return PP?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void s.remove(c))})})}var PP;function xP(e,t,n){try{let r=n();return qs(r)?r.catch(o=>{throw t.runOutsideAngular(()=>e(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var ql=null;function kP(e=[],t){return Ke.create({name:t,providers:[{provide:ws,useValue:"platform"},{provide:Ap,useValue:new Set([()=>ql=null])},...e]})}function OP(e=[]){if(ql)return ql;let t=kP(e);return ql=t,cw(),LP(t),t}function LP(e){let t=e.get(kl,null);ke(e,()=>{t?.forEach(n=>n())})}function Rp(){return!1}var ww=(()=>{class e{static __NG_ELEMENT_ID__=FP}return e})();function FP(e){return jP(Bt(),pt(),(e&16)===16)}function jP(e,t,n){if(Lr(e)&&!n){let r=sn(e.index,t);return new Br(r,r)}else if(e.type&175){let r=t[Mt];return new Br(r,t)}return null}function Tw(e){let{rootComponent:t,appProviders:n,platformProviders:r,platformRef:o}=e;_e(8);try{let s=o?.injector??OP(r),c=[hw({}),{provide:tr,useExisting:pw},hE,...n||[]],u=new Bs({providers:c,parent:s,debugName:"",runEnvironmentInitializers:!1});return MP({r3Injector:u.injector,platformInjector:s,rootComponent:t})}catch(s){return Promise.reject(s)}finally{_e(9)}}var Sw=null;function On(){return Sw}function Mp(e){Sw??=e}var Ks=class{},Pp=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:()=>C(Dw),providedIn:"platform"})}return e})();var Dw=(()=>{class e extends Pp{_location;_history;_doc=C(Ge);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return On().getBaseHref(this._doc)}onPopState(n){let r=On().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=On().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function Nw(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function bw(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function lr(e){return e&&e[0]!=="?"?`?${e}`:e}var Gl=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:()=>C(Rw),providedIn:"root"})}return e})(),Aw=new F(""),Rw=(()=>{class e extends Gl{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??C(Ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Nw(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+lr(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,s){let c=this.prepareExternalUrl(o+lr(s));this._platformLocation.pushState(n,r,c)}replaceState(n,r,o,s){let c=this.prepareExternalUrl(o+lr(s));this._platformLocation.replaceState(n,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(W(Pp),W(Aw,8))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),lo=(()=>{class e{_subject=new ze;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=BP(bw(Cw(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+lr(r))}normalize(n){return e.stripTrailingSlash(VP(this._basePath,Cw(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+lr(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+lr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=lr;static joinWithSlash=Nw;static stripTrailingSlash=bw;static \u0275fac=function(r){return new(r||e)(W(Gl))};static \u0275prov=O({token:e,factory:()=>UP(),providedIn:"root"})}return e})();function UP(){return new lo(W(Gl))}function VP(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function Cw(e){return e.replace(/\/index.html$/,"")}function BP(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function xp(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[o,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===t)return decodeURIComponent(s)}return null}var Ys=class{};var Mw="browser";var Qs=class{_doc;constructor(t){this._doc=t}manager},Zl=(()=>{class e extends Qs{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o,s){return n.addEventListener(r,o,s),()=>this.removeEventListener(n,r,o,s)}removeEventListener(n,r,o,s){return n.removeEventListener(r,o,s)}static \u0275fac=function(r){return new(r||e)(W(Ge))};static \u0275prov=O({token:e,factory:e.\u0275fac})}return e})(),Yl=new F(""),jp=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(c=>{c.manager=this});let o=n.filter(c=>!(c instanceof Zl));this._plugins=o.slice().reverse();let s=n.find(c=>c instanceof Zl);s&&this._plugins.push(s)}addEventListener(n,r,o,s){return this._findPluginFor(r).addEventListener(n,r,o,s)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new k(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(W(Yl),W(ye))};static \u0275prov=O({token:e,factory:e.\u0275fac})}return e})(),kp="ng-app-id";function Pw(e){for(let t of e)t.remove()}function xw(e,t){let n=t.createElement("style");return n.textContent=e,n}function HP(e,t,n,r){let o=e.head?.querySelectorAll(`style[${kp}="${t}"],link[${kp}="${t}"]`);if(o)for(let s of o)s.removeAttribute(kp),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&n.set(s.textContent,{usage:0,elements:[s]})}function Lp(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var Up=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,o,s={}){this.doc=n,this.appId=r,this.nonce=o,HP(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let o of n)this.addUsage(o,this.inline,xw);r?.forEach(o=>this.addUsage(o,this.external,Lp))}removeStyles(n,r){for(let o of n)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(n,r,o){let s=r.get(n);s?s.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(c=>this.addElement(c,o(n,this.doc)))})}removeUsage(n,r){let o=r.get(n);o&&(o.usage--,o.usage<=0&&(Pw(o.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Pw(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(n,xw(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(n,Lp(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(W(Ge),W(xl),W(Ol,8),W($r))};static \u0275prov=O({token:e,factory:e.\u0275fac})}return e})(),Op={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Vp=/%COMP%/g;var Ow="%COMP%",$P=`_nghost-${Ow}`,zP=`_ngcontent-${Ow}`,WP=!0,qP=new F("",{providedIn:"root",factory:()=>WP});function GP(e){return zP.replace(Vp,e)}function ZP(e){return $P.replace(Vp,e)}function Lw(e,t){return t.map(n=>n.replace(Vp,e))}var Bp=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,o,s,c,u,d=null,f=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=c,this.ngZone=u,this.nonce=d,this.tracingService=f,this.platformIsServer=!1,this.defaultRenderer=new Js(n,c,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let o=this.getOrCreateRenderer(n,r);return o instanceof Kl?o.applyToHost(n):o instanceof Xs&&o.applyStyles(),o}getOrCreateRenderer(n,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let c=this.doc,u=this.ngZone,d=this.eventManager,f=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,_=this.platformIsServer,v=this.tracingService;switch(r.encapsulation){case Pn.Emulated:s=new Kl(d,f,r,this.appId,m,c,u,_,v);break;case Pn.ShadowDom:return new Fp(d,f,n,r,c,u,this.nonce,_,v);default:s=new Xs(d,f,r,m,c,u,_,v);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(W(jp),W(Up),W(xl),W(qP),W(Ge),W(ye),W(Ol),W($s,8))};static \u0275prov=O({token:e,factory:e.\u0275fac})}return e})(),Js=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,o,s){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.tracingService=s}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(Op[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(kw(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(kw(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new k(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,o){if(o){n=o+":"+n;let s=Op[o];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let o=Op[r];o?t.removeAttributeNS(o,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,o){o&(zr.DashCase|zr.Important)?t.style.setProperty(n,r,o&zr.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&zr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,o){if(typeof t=="string"&&(t=On().getGlobalEventTarget(this.doc,t),!t))throw new k(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(t,n,s)),this.eventManager.addEventListener(t,n,s,o)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function kw(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Fp=class extends Js{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,r,o,s,c,u,d,f){super(t,s,c,d,f),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let m=o.styles;m=Lw(o.id,m);for(let v of m){let y=document.createElement("style");u&&y.setAttribute("nonce",u),y.textContent=v,this.shadowRoot.appendChild(y)}let _=o.getExternalStyles?.();if(_)for(let v of _){let y=Lp(v,s);u&&y.setAttribute("nonce",u),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Xs=class extends Js{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,o,s,c,u,d,f){super(t,s,c,u,d),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o;let m=r.styles;this.styles=f?Lw(f,m):m,this.styleUrls=r.getExternalStyles?.(f)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&io.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Kl=class extends Xs{contentAttr;hostAttr;constructor(t,n,r,o,s,c,u,d,f){let m=o+"-"+r.id;super(t,n,r,s,c,u,d,f,m),this.contentAttr=GP(m),this.hostAttr=ZP(m)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var Ql=class e extends Ks{supportsDOMEvents=!0;static makeCurrent(){Mp(new e)}onAndCancel(t,n,r,o){return t.addEventListener(n,r,o),()=>{t.removeEventListener(n,r,o)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=KP();return n==null?null:YP(n)}resetBaseElement(){ea=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return xp(document.cookie,t)}},ea=null;function KP(){return ea=ea||document.head.querySelector("base"),ea?ea.getAttribute("href"):null}function YP(e){return new URL(e,document.baseURI).pathname}var QP=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:e.\u0275fac})}return e})(),Fw=["alt","control","meta","shift"],JP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},XP={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},jw=(()=>{class e extends Qs{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,o,s){let c=e.parseEventName(r),u=e.eventCallback(c.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>On().onAndCancel(n,c.domEventName,u,s))}static parseEventName(n){let r=n.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),c="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),c="code."),Fw.forEach(f=>{let m=r.indexOf(f);m>-1&&(r.splice(m,1),c+=f+".")}),c+=s,r.length!=0||s.length===0)return null;let d={};return d.domEventName=o,d.fullKey=c,d}static matchEventFullKeyCode(n,r){let o=JP[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(o=n.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Fw.forEach(c=>{if(c!==o){let u=XP[c];u(n)&&(s+=c+".")}}),s+=o,s===r)}static eventCallback(n,r,o){return s=>{e.matchEventFullKeyCode(s,n)&&o.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(W(Ge))};static \u0275prov=O({token:e,factory:e.\u0275fac})}return e})();function Hp(e,t,n){let r=R({rootComponent:e,platformRef:n?.platformRef},ex(t));return Tw(r)}function ex(e){return{appProviders:[...ox,...e?.providers??[]],platformProviders:ix}}function tx(){Ql.makeCurrent()}function nx(){return new on}function rx(){return cp(document),document}var ix=[{provide:$r,useValue:Mw},{provide:kl,useValue:tx,multi:!0},{provide:Ge,useFactory:rx}];var ox=[{provide:ws,useValue:"root"},{provide:on,useFactory:nx},{provide:Yl,useClass:Zl,multi:!0,deps:[Ge]},{provide:Yl,useClass:jw,multi:!0,deps:[Ge]},Bp,Up,jp,{provide:Hr,useExisting:Bp},{provide:Ys,useClass:QP},[]];var Uw=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(W(Ge))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Vw=()=>{};var zp={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var D=function(e,t){if(!e)throw Zr(t)},Zr=function(e){return new Error("Firebase Database ("+zp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};var $w=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},ax=function(e){let t=[],n=0,r=0;for(;n<e.length;){let o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){let s=e[n++];t[r++]=String.fromCharCode((o&31)<<6|s&63)}else if(o>239&&o<365){let s=e[n++],c=e[n++],u=e[n++],d=((o&7)<<18|(s&63)<<12|(c&63)<<6|u&63)-65536;t[r++]=String.fromCharCode(55296+(d>>10)),t[r++]=String.fromCharCode(56320+(d&1023))}else{let s=e[n++],c=e[n++];t[r++]=String.fromCharCode((o&15)<<12|(s&63)<<6|c&63)}}return t.join("")},fo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<e.length;o+=3){let s=e[o],c=o+1<e.length,u=c?e[o+1]:0,d=o+2<e.length,f=d?e[o+2]:0,m=s>>2,_=(s&3)<<4|u>>4,v=(u&15)<<2|f>>6,y=f&63;d||(y=64,c||(v=64)),r.push(n[m],n[_],n[v],n[y])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray($w(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):ax(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<e.length;){let s=n[e.charAt(o++)],u=o<e.length?n[e.charAt(o)]:0;++o;let f=o<e.length?n[e.charAt(o)]:64;++o;let _=o<e.length?n[e.charAt(o)]:64;if(++o,s==null||u==null||f==null||_==null)throw new Wp;let v=s<<2|u>>4;if(r.push(v),f!==64){let y=u<<4&240|f>>2;if(r.push(y),_!==64){let T=f<<6&192|_;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Wp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Gp=function(e){let t=$w(e);return fo.encodeByteArray(t,!0)},na=function(e){return Gp(e).replace(/\./g,"")},uo=function(e){try{return fo.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function zw(e){return Ww(void 0,e)}function Ww(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(let n in t)!t.hasOwnProperty(n)||!cx(n)||(e[n]=Ww(e[n],t[n]));return e}function cx(e){return e!=="__proto__"}function qw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var lx=()=>qw().__FIREBASE_DEFAULTS__,ux=()=>{if(typeof process>"u"||typeof process.env>"u")return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},dx=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&uo(e[1]);return t&&JSON.parse(t)},Zp=()=>{try{return Vw()||lx()||ux()||dx()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Gw=e=>{var t,n;return(n=(t=Zp())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Zw=e=>{let t=Gw(e);if(!t)return;let n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Kp=()=>{var e;return(e=Zp())===null||e===void 0?void 0:e.config},Kw=e=>{var t;return(t=Zp())===null||t===void 0?void 0:t[`_${e}`]};var ln=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};function Kr(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}function Yp(e){return S(this,null,function*(){return(yield fetch(e,{credentials:"include"})).ok})}function Yw(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=t||"demo-project",o=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[na(JSON.stringify(n)),na(JSON.stringify(c)),""].join(".")}var ta={};function hx(){let e={prod:[],emulator:[]};for(let t of Object.keys(ta))ta[t]?e.emulator.push(t):e.prod.push(t);return e}function fx(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}var Bw=!1;function Qp(e,t){if(typeof window>"u"||typeof document>"u"||!Kr(window.location.host)||ta[e]===t||ta[e]||Bw)return;ta[e]=t;function n(v){return`__firebase__banner__${v}`}let r="__firebase__banner",s=hx().prod.length>0;function c(){let v=document.getElementById(r);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,y){v.setAttribute("width","24"),v.setAttribute("id",y),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){let v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{Bw=!0,c()},v}function m(v,y){v.setAttribute("id",y),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function _(){let v=fx(r),y=n("text"),T=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),P=document.getElementById(N)||document.createElement("a"),x=n("preprendIcon"),Fe=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){let Ce=v.element;u(Ce),m(P,N);let Jt=f();d(Fe,x),Ce.append(Fe,T,P,Jt),document.body.appendChild(Ce)}s?(T.innerText="Preview backend disconnected.",Fe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Fe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ra(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function Qw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Jw(){let e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Xl(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dn(){return zp.NODE_CLIENT===!0||zp.NODE_ADMIN===!0}function eu(){try{return typeof indexedDB=="object"}catch{return!1}}function Xw(){return new Promise((e,t)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var s;t(((s=o.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}var px="FirebaseError",un=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=px,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$t.prototype.create)}},$t=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){let r=n[0]||{},o=`${this.service}/${t}`,s=this.errors[t],c=s?gx(s,r):"Error",u=`${this.serviceName}: ${c} (${o}).`;return new un(o,u,r)}};function gx(e,t){return e.replace(mx,(n,r)=>{let o=t[r];return o!=null?String(o):`<${r}?>`})}var mx=/\{\$([^}]+)}/g;function ho(e){return JSON.parse(e)}function Oe(e){return JSON.stringify(e)}var eT=function(e){let t={},n={},r={},o="";try{let s=e.split(".");t=ho(uo(s[0])||""),n=ho(uo(s[1])||""),o=s[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:o}};var tT=function(e){let t=eT(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},nT=function(e){let t=eT(e).claims;return typeof t=="object"&&t.admin===!0};function hn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Yr(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function tu(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ia(e,t,n){let r={};for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=t.call(n,e[o],o,e));return r}function Qr(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let o of n){if(!r.includes(o))return!1;let s=e[o],c=t[o];if(Hw(s)&&Hw(c)){if(!Qr(s,c))return!1}else if(s!==c)return!1}for(let o of r)if(!n.includes(o))return!1;return!0}function Hw(e){return e!==null&&typeof e=="object"}function oa(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(o=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}var Jl=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);let r=this.W_;if(typeof t=="string")for(let _=0;_<16;_++)r[_]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let _=0;_<16;_++)r[_]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let _=16;_<80;_++){let v=r[_-3]^r[_-8]^r[_-14]^r[_-16];r[_]=(v<<1|v>>>31)&4294967295}let o=this.chain_[0],s=this.chain_[1],c=this.chain_[2],u=this.chain_[3],d=this.chain_[4],f,m;for(let _=0;_<80;_++){_<40?_<20?(f=u^s&(c^u),m=1518500249):(f=s^c^u,m=1859775393):_<60?(f=s&c|u&(s|c),m=2400959708):(f=s^c^u,m=3395469782);let v=(o<<5|o>>>27)+f+d+m+r[_]&4294967295;d=u,u=c,c=(s<<30|s>>>2)&4294967295,s=o,o=v}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);let r=n-this.blockSize,o=0,s=this.buf_,c=this.inbuf_;for(;o<n;){if(c===0)for(;o<=r;)this.compress_(t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<n;)if(s[c]=t.charCodeAt(o),++c,++o,c===this.blockSize){this.compress_(s),c=0;break}}else for(;o<n;)if(s[c]=t[o],++c,++o,c===this.blockSize){this.compress_(s),c=0;break}}this.inbuf_=c,this.total_+=n}digest(){let t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let o=0;o<5;o++)for(let s=24;s>=0;s-=8)t[r]=this.chain_[o]>>s&255,++r;return t}};function rT(e,t){let n=new qp(e,t);return n.subscribe.bind(n)}var qp=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let o;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");_x(t,["next","error","complete"])?o=t:o={next:t,error:n,complete:r},o.next===void 0&&(o.next=$p),o.error===void 0&&(o.error=$p),o.complete===void 0&&(o.complete=$p);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function _x(e,t){if(typeof e!="object"||e===null)return!1;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function $p(){}function Jp(e,t){return`${e} failed: ${t} argument `}var iT=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);if(o>=55296&&o<=56319){let s=o-55296;r++,D(r<e.length,"Surrogate pair missing trail surrogate.");let c=e.charCodeAt(r)-56320;o=65536+(s<<10)+c}o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):o<65536?(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},sa=function(e){let t=0;for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};var w5=14400*1e3;function Wt(e){return e&&e._delegate?e._delegate:e}var et=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Jr="[DEFAULT]";var nu=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){let r=new ln;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;let r=this.normalizeInstanceIdentifier(t?.identifier),o=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(o)return null;throw s}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(yx(t))try{this.getOrInitializeService({instanceIdentifier:Jr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let o=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:o});r.resolve(s)}catch{}}}}clearInstance(t=Jr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return S(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Jr){return this.instances.has(t)}getOptions(t=Jr){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,c]of this.instancesDeferred.entries()){let u=this.normalizeInstanceIdentifier(s);r===u&&c.resolve(o)}return o}onInit(t,n){var r;let o=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(o,s);let c=this.instances.get(o);return c&&t(c,o),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){let r=this.onInitCallbacks.get(n);if(r)for(let o of r)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vx(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Jr){return this.component?this.component.multipleInstances?t:Jr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function vx(e){return e===Jr?void 0:e}function yx(e){return e.instantiationMode==="EAGER"}var aa=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let n=new nu(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}};var Ex=[],he=(function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e})(he||{}),Ix={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},wx=he.INFO,Tx={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},bx=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),o=Tx[t];if(o)console[o](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},fn=class{constructor(t){this.name=t,this._logLevel=wx,this._logHandler=bx,this._userLogHandler=null,Ex.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in he))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Ix[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...t),this._logHandler(this,he.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...t),this._logHandler(this,he.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,he.INFO,...t),this._logHandler(this,he.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,he.WARN,...t),this._logHandler(this,he.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...t),this._logHandler(this,he.ERROR,...t)}};var Cx=(e,t)=>t.some(n=>e instanceof n),oT,sT;function Sx(){return oT||(oT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Dx(){return sT||(sT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var aT=new WeakMap,eg=new WeakMap,cT=new WeakMap,Xp=new WeakMap,ng=new WeakMap;function Nx(e){let t=new Promise((n,r)=>{let o=()=>{e.removeEventListener("success",s),e.removeEventListener("error",c)},s=()=>{n(pn(e.result)),o()},c=()=>{r(e.error),o()};e.addEventListener("success",s),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&aT.set(n,e)}).catch(()=>{}),ng.set(t,e),t}function Ax(e){if(eg.has(e))return;let t=new Promise((n,r)=>{let o=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",c),e.removeEventListener("abort",c)},s=()=>{n(),o()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",s),e.addEventListener("error",c),e.addEventListener("abort",c)});eg.set(e,t)}var tg={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return eg.get(e);if(t==="objectStoreNames")return e.objectStoreNames||cT.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function lT(e){tg=e(tg)}function Rx(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){let r=e.call(ru(this),t,...n);return cT.set(r,t.sort?t.sort():[t]),pn(r)}:Dx().includes(e)?function(...t){return e.apply(ru(this),t),pn(aT.get(this))}:function(...t){return pn(e.apply(ru(this),t))}}function Mx(e){return typeof e=="function"?Rx(e):(e instanceof IDBTransaction&&Ax(e),Cx(e,Sx())?new Proxy(e,tg):e)}function pn(e){if(e instanceof IDBRequest)return Nx(e);if(Xp.has(e))return Xp.get(e);let t=Mx(e);return t!==e&&(Xp.set(e,t),ng.set(t,e)),t}var ru=e=>ng.get(e);function dT(e,t,{blocked:n,upgrade:r,blocking:o,terminated:s}={}){let c=indexedDB.open(e,t),u=pn(c);return r&&c.addEventListener("upgradeneeded",d=>{r(pn(c.result),d.oldVersion,d.newVersion,pn(c.transaction),d)}),n&&c.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{s&&d.addEventListener("close",()=>s()),o&&d.addEventListener("versionchange",f=>o(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}var Px=["get","getKey","getAll","getAllKeys","count"],xx=["put","add","delete","clear"],rg=new Map;function uT(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(rg.get(t))return rg.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,o=xx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Px.includes(n)))return;let s=function(c,...u){return S(this,null,function*(){let d=this.transaction(c,o?"readwrite":"readonly"),f=d.store;return r&&(f=f.index(u.shift())),(yield Promise.all([f[n](...u),o&&d.done]))[0]})};return rg.set(t,s),s}lT(e=>ge(R({},e),{get:(t,n,r)=>uT(t,n)||e.get(t,n,r),has:(t,n)=>!!uT(t,n)||e.has(t,n)}));var og=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kx(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function kx(e){let t=e.getComponent();return t?.type==="VERSION"}var sg="@firebase/app",hT="0.13.2";var Ln=new fn("@firebase/app"),Ox="@firebase/app-compat",Lx="@firebase/analytics-compat",Fx="@firebase/analytics",jx="@firebase/app-check-compat",Ux="@firebase/app-check",Vx="@firebase/auth",Bx="@firebase/auth-compat",Hx="@firebase/database",$x="@firebase/data-connect",zx="@firebase/database-compat",Wx="@firebase/functions",qx="@firebase/functions-compat",Gx="@firebase/installations",Zx="@firebase/installations-compat",Kx="@firebase/messaging",Yx="@firebase/messaging-compat",Qx="@firebase/performance",Jx="@firebase/performance-compat",Xx="@firebase/remote-config",ek="@firebase/remote-config-compat",tk="@firebase/storage",nk="@firebase/storage-compat",rk="@firebase/firestore",ik="@firebase/ai",ok="@firebase/firestore-compat",sk="firebase",ak="11.10.0";var ag="[DEFAULT]",ck={[sg]:"fire-core",[Ox]:"fire-core-compat",[Fx]:"fire-analytics",[Lx]:"fire-analytics-compat",[Ux]:"fire-app-check",[jx]:"fire-app-check-compat",[Vx]:"fire-auth",[Bx]:"fire-auth-compat",[Hx]:"fire-rtdb",[$x]:"fire-data-connect",[zx]:"fire-rtdb-compat",[Wx]:"fire-fn",[qx]:"fire-fn-compat",[Gx]:"fire-iid",[Zx]:"fire-iid-compat",[Kx]:"fire-fcm",[Yx]:"fire-fcm-compat",[Qx]:"fire-perf",[Jx]:"fire-perf-compat",[Xx]:"fire-rc",[ek]:"fire-rc-compat",[tk]:"fire-gcs",[nk]:"fire-gcs-compat",[rk]:"fire-fst",[ok]:"fire-fst-compat",[ik]:"fire-vertex","fire-js":"fire-js",[sk]:"fire-js-all"};var ca=new Map,lk=new Map,cg=new Map;function fT(e,t){try{e.container.addComponent(t)}catch(n){Ln.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function qt(e){let t=e.name;if(cg.has(t))return Ln.debug(`There were multiple attempts to register component ${t}.`),!1;cg.set(t,e);for(let n of ca.values())fT(n,e);for(let n of lk.values())fT(n,e);return!0}function iu(e,t){let n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Fn(e){return e==null?!1:e.settings!==void 0}var uk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ur=new $t("app","Firebase",uk);var lg=class{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new et("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ur.create("app-deleted",{appName:this._name})}};var po=ak;function hg(e,t={}){let n=e;typeof t!="object"&&(t={name:t});let r=Object.assign({name:ag,automaticDataCollectionEnabled:!0},t),o=r.name;if(typeof o!="string"||!o)throw ur.create("bad-app-name",{appName:String(o)});if(n||(n=Kp()),!n)throw ur.create("no-options");let s=ca.get(o);if(s){if(Qr(n,s.options)&&Qr(r,s.config))return s;throw ur.create("duplicate-app",{appName:o})}let c=new aa(o);for(let d of cg.values())c.addComponent(d);let u=new lg(n,r,c);return ca.set(o,u),u}function go(e=ag){let t=ca.get(e);if(!t&&e===ag&&Kp())return hg();if(!t)throw ur.create("no-app",{appName:e});return t}function ou(){return Array.from(ca.values())}function De(e,t,n){var r;let o=(r=ck[e])!==null&&r!==void 0?r:e;n&&(o+=`-${n}`);let s=o.match(/\s|\//),c=t.match(/\s|\//);if(s||c){let u=[`Unable to register library "${o}" with version "${t}":`];s&&u.push(`library name "${o}" contains illegal characters (whitespace or "/")`),s&&c&&u.push("and"),c&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ln.warn(u.join(" "));return}qt(new et(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}var dk="firebase-heartbeat-database",hk=1,la="firebase-heartbeat-store",ig=null;function _T(){return ig||(ig=dT(dk,hk,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(la)}catch(n){console.warn(n)}}}}).catch(e=>{throw ur.create("idb-open",{originalErrorMessage:e.message})})),ig}function fk(e){return S(this,null,function*(){try{let n=(yield _T()).transaction(la),r=yield n.objectStore(la).get(vT(e));return yield n.done,r}catch(t){if(t instanceof un)Ln.warn(t.message);else{let n=ur.create("idb-get",{originalErrorMessage:t?.message});Ln.warn(n.message)}}})}function pT(e,t){return S(this,null,function*(){try{let r=(yield _T()).transaction(la,"readwrite");yield r.objectStore(la).put(t,vT(e)),yield r.done}catch(n){if(n instanceof un)Ln.warn(n.message);else{let r=ur.create("idb-set",{originalErrorMessage:n?.message});Ln.warn(r.message)}}})}function vT(e){return`${e.name}!${e.options.appId}`}var pk=1024,gk=30,ug=class{constructor(t){this.container=t,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new dg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return S(this,null,function*(){var t,n;try{let o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=gT();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(c=>c.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:o}),this._heartbeatsCache.heartbeats.length>gk){let c=_k(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ln.warn(r)}})}getHeartbeatsHeader(){return S(this,null,function*(){var t;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=gT(),{heartbeatsToSend:r,unsentEntries:o}=mk(this._heartbeatsCache.heartbeats),s=na(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ln.warn(n),""}})}};function gT(){return new Date().toISOString().substring(0,10)}function mk(e,t=pk){let n=[],r=e.slice();for(let o of e){let s=n.find(c=>c.agent===o.agent);if(s){if(s.dates.push(o.date),mT(n)>t){s.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),mT(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var dg=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return eu()?Xw().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield fk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return S(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let o=yield this.read();return pT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return S(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let o=yield this.read();return pT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return})}};function mT(e){return na(JSON.stringify({version:2,heartbeats:e})).length}function _k(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function vk(e){qt(new et("platform-logger",t=>new og(t),"PRIVATE")),qt(new et("heartbeat",t=>new ug(t),"PRIVATE")),De(sg,hT,e),De(sg,hT,"esm2017"),De("fire-js","")}vk("");var yk="firebase",Ek="11.10.0";De(yk,Ek,"app");function yT(e){e===void 0&&(e=C(Ke));let t=e.get(to);return n=>new Z(r=>{let o=t.add(),s=!1;function c(){s||(o(),s=!0)}let u=n.subscribe({next:d=>{r.next(d),c()},complete:()=>{r.complete(),c()},error:d=>{r.error(d),c()}});return u.add(()=>{r.unsubscribe(),c()}),u})}var ei=new Zi("ANGULARFIRE2_VERSION");function au(e,t,n){if(t){if(t.length===1)return t[0];let s=t.filter(c=>c.app===n);if(s.length===1)return s[0]}return n.container.getProvider(e).getImmediate({optional:!0})}var _o=(e,t)=>{let n=t?[t]:ou(),r=[];return n.forEach(o=>{o.container.getProvider(e).instances.forEach(c=>{r.includes(c)||r.push(c)})}),r},mo=(function(e){return e[e.SILENT=0]="SILENT",e[e.WARN=1]="WARN",e[e.VERBOSE=2]="VERBOSE",e})(mo||{}),ET=Rp()&&typeof Zone<"u"?mo.WARN:mo.SILENT;var su=class{zone;delegate;constructor(t,n=Mh){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,r){let o=this.zone,s=function(c){o?o.runGuarded(()=>{t.apply(this,[c])}):t.apply(this,[c])};return this.delegate.schedule(s,n,r)}},ti=(()=>{class e{outsideAngular;insideAngular;constructor(){let n=C(ye);this.outsideAngular=n.runOutsideAngular(()=>new su(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new su(typeof Zone>"u"?void 0:Zone.current,Rh))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),IT=!1;function Ik(e,t){!IT&&(ET>mo.SILENT||Rp())&&(IT=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),ET>=t&&console.warn(`Firebase API called outside injection context: ${e.name}`)}function wk(e){let t=C(ye,{optional:!0});return t?t.runOutsideAngular(()=>e()):e()}function Xr(e){let t=C(ye,{optional:!0});return t?t.run(()=>e()):e()}var Tk=(e,t,n)=>(...r)=>(t&&setTimeout(t,0),ke(n,()=>Xr(()=>e.apply(void 0,r)))),dr=(e,t,n)=>(n||=t?mo.WARN:mo.VERBOSE,function(){let r,o=arguments,s,c,u;try{s=C(ti),c=C(to),u=C(xe)}catch{return Ik(e,n),e.apply(this,o)}for(let f=0;f<arguments.length;f++)typeof o[f]=="function"&&(t&&(r||=Xr(()=>c.add())),o[f]=Tk(o[f],r,u));let d=wk(()=>e.apply(this,o));return t?d instanceof Z?d.pipe(Yn(s.outsideAngular),Kn(s.insideAngular),yT(u)):d instanceof Promise?Xr(()=>{let f=c.add();return new Promise((m,_)=>{d.then(v=>ke(u,()=>Xr(()=>m(v))),v=>ke(u,()=>Xr(()=>_(v)))).finally(f)})}):typeof d=="function"&&r?function(){return setTimeout(r,0),d.apply(this,arguments)}:Xr(()=>d):d instanceof Z?d.pipe(Yn(s.outsideAngular),Kn(s.insideAngular)):Xr(()=>d)});var ni=class{constructor(t){return t}},ua=class{constructor(){return ou()}};function bk(e){return e&&e.length===1?e[0]:new ni(go())}var fg=new F("angularfire2._apps"),Ck={provide:ni,useFactory:bk,deps:[[new xn,fg]]},Sk={provide:ua,deps:[[new xn,fg]]};function Dk(e){return(t,n)=>{let r=n.get($r);De("angularfire",ei.full,"core"),De("angularfire",ei.full,"app"),De("angular",Kh.full,r.toString());let o=t.runOutsideAngular(()=>e(n));return new ni(o)}}function wT(e,...t){return ir([Ck,Sk,{provide:fg,useFactory:Dk(e),multi:!0,deps:[ye,Ke,ti,...t]}])}var TT=dr(hg,!0);var Nk=new Map,Ak={activated:!1,tokenObservers:[]},Rk={initialized:!1,enabled:!1};function Gt(e){return Nk.get(e)||Object.assign({},Ak)}function DT(){return Rk}var Mk="https://content-firebaseappcheck.googleapis.com/v1";var Pk="exchangeDebugToken",bT={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},CY=1440*60*1e3;var mg=class{constructor(t,n,r,o,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=o,o>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return S(this,null,function*(){this.stop();try{this.pending=new ln,this.pending.promise.catch(n=>{}),yield xk(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new ln,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function xk(e){return new Promise(t=>{setTimeout(t,e)})}var kk={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},hr=new $t("appCheck","AppCheck",kk);function NT(e){if(!Gt(e).activated)throw hr.create("use-before-activation",{appName:e.name})}function AT(r,o){return S(this,arguments,function*({url:e,body:t},n){let s={"Content-Type":"application/json"},c=n.getImmediate({optional:!0});if(c){let y=yield c.getHeartbeatsHeader();y&&(s["X-Firebase-Client"]=y)}let u={method:"POST",body:JSON.stringify(t),headers:s},d;try{d=yield fetch(e,u)}catch(y){throw hr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(d.status!==200)throw hr.create("fetch-status-error",{httpStatus:d.status});let f;try{f=yield d.json()}catch(y){throw hr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw hr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let _=Number(m[1])*1e3,v=Date.now();return{token:f.token,expireTimeMillis:v+_,issuedAtTimeMillis:v}})}function RT(e,t){let{projectId:n,appId:r,apiKey:o}=e.options;return{url:`${Mk}/projects/${n}/apps/${r}:${Pk}?key=${o}`,body:{debug_token:t}}}var Ok="firebase-app-check-database",Lk=1,_g="firebase-app-check-store";var cu=null;function Fk(){return cu||(cu=new Promise((e,t)=>{try{let n=indexedDB.open(Ok,Lk);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var o;t(hr.create("storage-open",{originalErrorMessage:(o=r.target.error)===null||o===void 0?void 0:o.message}))},n.onupgradeneeded=r=>{let o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(_g,{keyPath:"compositeKey"})}}}catch(n){t(hr.create("storage-open",{originalErrorMessage:n?.message}))}}),cu)}function jk(e,t){return Uk(Vk(e),t)}function Uk(e,t){return S(this,null,function*(){let r=(yield Fk()).transaction(_g,"readwrite"),s=r.objectStore(_g).put({compositeKey:e,value:t});return new Promise((c,u)=>{s.onsuccess=d=>{c()},r.onerror=d=>{var f;u(hr.create("storage-set",{originalErrorMessage:(f=d.target.error)===null||f===void 0?void 0:f.message}))}})})}function Vk(e){return`${e.options.appId}-${e.name}`}var da=new fn("@firebase/app-check");function pg(e,t){return eu()?jk(e,t).catch(n=>{da.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function MT(){return DT().enabled}function PT(){return S(this,null,function*(){let e=DT();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Bk={error:"UNKNOWN_ERROR"};function Hk(e){return fo.encodeString(JSON.stringify(e),!1)}function vg(e,t=!1,n=!1){return S(this,null,function*(){let r=e.app;NT(r);let o=Gt(r),s=o.token,c;if(s&&!ha(s)&&(o.token=void 0,s=void 0),!s){let f=yield o.cachedTokenPromise;f&&(ha(f)?s=f:yield pg(r,void 0))}if(!t&&s&&ha(s))return{token:s.token};let u=!1;if(MT())try{o.exchangeTokenPromise||(o.exchangeTokenPromise=AT(RT(r,yield PT()),e.heartbeatServiceProvider).finally(()=>{o.exchangeTokenPromise=void 0}),u=!0);let f=yield o.exchangeTokenPromise;return yield pg(r,f),o.token=f,{token:f.token}}catch(f){return f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?da.warn(f.message):n&&da.error(f),gg(f)}try{o.exchangeTokenPromise||(o.exchangeTokenPromise=o.provider.getToken().finally(()=>{o.exchangeTokenPromise=void 0}),u=!0),s=yield Gt(r).exchangeTokenPromise}catch(f){f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?da.warn(f.message):n&&da.error(f),c=f}let d;return s?c?ha(s)?d={token:s.token,internalError:c}:d=gg(c):(d={token:s.token},o.token=s,yield pg(r,s)):d=gg(c),u&&qk(r,d),d})}function $k(e){return S(this,null,function*(){let t=e.app;NT(t);let{provider:n}=Gt(t);if(MT()){let r=yield PT(),{token:o}=yield AT(RT(t,r),e.heartbeatServiceProvider);return{token:o}}else{let{token:r}=yield n.getToken();return{token:r}}})}function zk(e,t,n,r){let{app:o}=e,s=Gt(o),c={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,c],s.token&&ha(s.token)){let u=s.token;Promise.resolve().then(()=>{n({token:u.token}),CT(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>CT(e))}function xT(e,t){let n=Gt(e),r=n.tokenObservers.filter(o=>o.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function CT(e){let{app:t}=e,n=Gt(t),r=n.tokenRefresher;r||(r=Wk(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Wk(e){let{app:t}=e;return new mg(()=>S(null,null,function*(){let n=Gt(t),r;if(n.token?r=yield vg(e,!0):r=yield vg(e),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Gt(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,o=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,o),Math.max(0,r-Date.now())}else return 0},bT.RETRIAL_MIN_WAIT,bT.RETRIAL_MAX_WAIT)}function qk(e,t){let n=Gt(e).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function ha(e){return e.expireTimeMillis-Date.now()>0}function gg(e){return{token:Hk(Bk),error:e}}var yg=class{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:t}=Gt(this.app);for(let n of t)xT(this.app,n.next);return Promise.resolve()}};function Gk(e,t){return new yg(e,t)}function Zk(e){return{getToken:t=>vg(e,t),getLimitedUseToken:()=>$k(e),addTokenListener:t=>zk(e,"INTERNAL",t),removeTokenListener:t=>xT(e.app,t)}}var Kk="@firebase/app-check",Yk="0.10.1";var Qk="app-check",ST="app-check-internal";function Jk(){qt(new et(Qk,e=>{let t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return Gk(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(ST).initialize()})),qt(new et(ST,e=>{let t=e.getProvider("app-check").getImmediate();return Zk(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),De(Kk,Yk)}Jk();var Xk="app-check";var lu=class{constructor(){return _o(Xk)}};var eO=["localhost","0.0.0.0","127.0.0.1"],jY=typeof window<"u"&&eO.includes(window.location.hostname);function BT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var HT=BT,$T=new $t("auth","Firebase",BT());var fu=new fn("@firebase/auth");function tO(e,...t){fu.logLevel<=he.WARN&&fu.warn(`Auth (${po}): ${e}`,...t)}function du(e,...t){fu.logLevel<=he.ERROR&&fu.error(`Auth (${po}): ${e}`,...t)}function kT(e,...t){throw Mg(e,...t)}function Rg(e,...t){return Mg(e,...t)}function zT(e,t,n){let r=Object.assign(Object.assign({},HT()),{[t]:n});return new $t("auth","Firebase",r).create(t,{appName:e.name})}function hu(e){return zT(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mg(e,...t){if(typeof e!="string"){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return $T.create(e,...t)}function ce(e,t,...n){if(!e)throw Mg(t,...n)}function fa(e){let t="INTERNAL ASSERTION FAILED: "+e;throw du(t),new Error(t)}function pu(e,t){e||fa(t)}function nO(){return OT()==="http:"||OT()==="https:"}function OT(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}function rO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nO()||Jw()||"connection"in navigator)?navigator.onLine:!0}function iO(){if(typeof navigator>"u")return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var oi=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,pu(n>t,"Short delay should be less than long delay!"),this.isMobile=ra()||Xl()}get(){return rO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function oO(e,t){pu(e.emulator,"Emulator should always be set here");let{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}var gu=class{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var aO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cO=new oi(3e4,6e4);function WT(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Eu(s,c,u,d){return S(this,arguments,function*(e,t,n,r,o={}){return qT(e,o,()=>S(null,null,function*(){let f={},m={};r&&(t==="GET"?m=r:f={body:JSON.stringify(r)});let _=oa(Object.assign({key:e.config.apiKey},m)).slice(1),v=yield e._getAdditionalHeaders();v["Content-Type"]="application/json",e.languageCode&&(v["X-Firebase-Locale"]=e.languageCode);let y=Object.assign({method:t,headers:v},f);return Qw()||(y.referrerPolicy="no-referrer"),e.emulatorConfig&&Kr(e.emulatorConfig.host)&&(y.credentials="include"),gu.fetch()(yield GT(e,e.config.apiHost,n,_),y)}))})}function qT(e,t,n){return S(this,null,function*(){e._canInitEmulator=!1;let r=Object.assign(Object.assign({},sO),t);try{let o=new wg(e),s=yield Promise.race([n(),o.promise]);o.clearNetworkTimeout();let c=yield s.json();if("needConfirmation"in c)throw uu(e,"account-exists-with-different-credential",c);if(s.ok&&!("errorMessage"in c))return c;{let u=s.ok?c.errorMessage:c.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw uu(e,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw uu(e,"email-already-in-use",c);if(d==="USER_DISABLED")throw uu(e,"user-disabled",c);let m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw zT(e,m,f);kT(e,m)}}catch(o){if(o instanceof un)throw o;kT(e,"network-request-failed",{message:String(o)})}})}function GT(e,t,n,r){return S(this,null,function*(){let o=`${t}${n}?${r}`,s=e,c=s.config.emulator?oO(e.config,o):`${e.config.apiScheme}://${o}`;return aO.includes(n)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(c).toString():c})}var wg=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Rg(this.auth,"network-request-failed")),cO.get())})}};function uu(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let o=Rg(e,t,r);return o.customData._tokenResponse=n,o}function lO(e,t){return S(this,null,function*(){return Eu(e,"POST","/v1/accounts:delete",t)})}function mu(e,t){return S(this,null,function*(){return Eu(e,"POST","/v1/accounts:lookup",t)})}function pa(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function Pg(e,t=!1){return S(this,null,function*(){let n=Wt(e),r=yield n.getIdToken(t),o=ZT(r);ce(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");let s=typeof o.firebase=="object"?o.firebase:void 0,c=s?.sign_in_provider;return{claims:o,token:r,authTime:pa(Eg(o.auth_time)),issuedAtTime:pa(Eg(o.iat)),expirationTime:pa(Eg(o.exp)),signInProvider:c||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Eg(e){return Number(e)*1e3}function ZT(e){let[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return du("JWT malformed, contained fewer than 3 sections"),null;try{let o=uo(n);return o?JSON.parse(o):(du("Failed to decode base64 JWT payload"),null)}catch(o){return du("Caught error parsing JWT payload as JSON",o?.toString()),null}}function LT(e){let t=ZT(e);return ce(t,"internal-error"),ce(typeof t.exp<"u","internal-error"),ce(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function Tg(e,t,n=!1){return S(this,null,function*(){if(n)return t;try{return yield t}catch(r){throw r instanceof un&&uO(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})}function uO({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}var bg=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(t=!1){if(!this.isRunning)return;let n=this.getInterval(t);this.timerId=setTimeout(()=>S(this,null,function*(){yield this.iteration()}),n)}iteration(){return S(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ma=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pa(this.lastLoginAt),this.creationTime=pa(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function _u(e){return S(this,null,function*(){var t;let n=e.auth,r=yield e.getIdToken(),o=yield Tg(e,mu(n,{idToken:r}));ce(o?.users.length,n,"internal-error");let s=o.users[0];e._notifyReloadListener(s);let c=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?KT(s.providerUserInfo):[],u=dO(e.providerData,c),d=e.isAnonymous,f=!(e.email&&s.passwordHash)&&!u?.length,m=d?f:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new ma(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(e,_)})}function xg(e){return S(this,null,function*(){let t=Wt(e);yield _u(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function dO(e,t){return[...e.filter(r=>!t.some(o=>o.providerId===r.providerId)),...t]}function KT(e){return e.map(t=>{var{providerId:n}=t,r=Ph(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function hO(e,t){return S(this,null,function*(){let n=yield qT(e,{},()=>S(null,null,function*(){let r=oa({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:s}=e.config,c=yield GT(e,o,"/v1/token",`key=${s}`),u=yield e._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";let d={method:"POST",headers:u,body:r};return e.emulatorConfig&&Kr(e.emulatorConfig.host)&&(d.credentials="include"),gu.fetch()(c,d)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function fO(e,t){return S(this,null,function*(){return Eu(e,"POST","/v2/accounts:revokeToken",WT(e,t))})}var ga=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ce(t.idToken,"internal-error"),ce(typeof t.idToken<"u","internal-error"),ce(typeof t.refreshToken<"u","internal-error");let n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):LT(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){ce(t.length!==0,"internal-error");let n=LT(t);this.updateTokensAndExpiration(t,null,n)}getToken(t,n=!1){return S(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,n){return S(this,null,function*(){let{accessToken:r,refreshToken:o,expiresIn:s}=yield hO(t,n);this.updateTokensAndExpiration(r,o,Number(s))})}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:o,expirationTime:s}=n,c=new e;return r&&(ce(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),o&&(ce(typeof o=="string","internal-error",{appName:t}),c.accessToken=o),s&&(ce(typeof s=="number","internal-error",{appName:t}),c.expirationTime=s),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return fa("not implemented")}};function fr(e,t){ce(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}var ri=class e{constructor(t){var{uid:n,auth:r,stsTokenManager:o}=t,s=Ph(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ma(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(t){return S(this,null,function*(){let n=yield Tg(this,this.stsTokenManager.getToken(this.auth,t));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(t){return Pg(this,t)}reload(){return xg(this)}_assign(t){this!==t&&(ce(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,n=!1){return S(this,null,function*(){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&(yield _u(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return S(this,null,function*(){if(Fn(this.auth.app))return Promise.reject(hu(this.auth));let t=yield this.getIdToken();return yield Tg(this,lO(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,o,s,c,u,d,f,m;let _=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(o=n.email)!==null&&o!==void 0?o:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(c=n.photoURL)!==null&&c!==void 0?c:void 0,N=(u=n.tenantId)!==null&&u!==void 0?u:void 0,P=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,x=(f=n.createdAt)!==null&&f!==void 0?f:void 0,Fe=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:Ce,emailVerified:Jt,isAnonymous:Wo,providerData:yi,stsTokenManager:Ei}=n;ce(Ce&&Ei,t,"internal-error");let oc=ga.fromJSON(this.name,Ei);ce(typeof Ce=="string",t,"internal-error"),fr(_,t.name),fr(v,t.name),ce(typeof Jt=="boolean",t,"internal-error"),ce(typeof Wo=="boolean",t,"internal-error"),fr(y,t.name),fr(T,t.name),fr(N,t.name),fr(P,t.name),fr(x,t.name),fr(Fe,t.name);let je=new e({uid:Ce,auth:t,email:v,emailVerified:Jt,displayName:_,isAnonymous:Wo,photoURL:T,phoneNumber:y,tenantId:N,stsTokenManager:oc,createdAt:x,lastLoginAt:Fe});return yi&&Array.isArray(yi)&&(je.providerData=yi.map(nt=>Object.assign({},nt))),P&&(je._redirectEventId=P),je}static _fromIdTokenResponse(t,n,r=!1){return S(this,null,function*(){let o=new ga;o.updateFromServerResponse(n);let s=new e({uid:n.localId,auth:t,stsTokenManager:o,isAnonymous:r});return yield _u(s),s})}static _fromGetAccountInfoResponse(t,n,r){return S(this,null,function*(){let o=n.users[0];ce(o.localId!==void 0,"internal-error");let s=o.providerUserInfo!==void 0?KT(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!s?.length,u=new ga;u.updateFromIdToken(r);let d=new e({uid:o.localId,auth:t,stsTokenManager:u,isAnonymous:c}),f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new ma(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!s?.length};return Object.assign(d,f),d})}};var FT=new Map;function ii(e){pu(e instanceof Function,"Expected a class definition");let t=FT.get(e);return t?(pu(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,FT.set(e,t),t)}var pO=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return S(this,null,function*(){return!0})}_set(n,r){return S(this,null,function*(){this.storage[n]=r})}_get(n){return S(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return S(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return e.type="NONE",e})(),Cg=pO;function Ig(e,t,n){return`firebase:${e}:${t}:${n}`}var vu=class e{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;let{config:o,name:s}=this.auth;this.fullUserKey=Ig(this.userKey,o.apiKey,s),this.fullPersistenceKey=Ig("persistence",o.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return S(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){let n=yield mu(this.auth,{idToken:t}).catch(()=>{});return n?ri._fromGetAccountInfoResponse(this.auth,n,t):null}return ri._fromJSON(this.auth,t)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return S(this,null,function*(){if(this.persistence===t)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n,r="authUser"){return S(this,null,function*(){if(!n.length)return new e(ii(Cg),t,r);let o=(yield Promise.all(n.map(f=>S(null,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),s=o[0]||ii(Cg),c=Ig(r,t.config.apiKey,t.name),u=null;for(let f of n)try{let m=yield f._get(c);if(m){let _;if(typeof m=="string"){let v=yield mu(t,{idToken:m}).catch(()=>{});if(!v)break;_=yield ri._fromGetAccountInfoResponse(t,v,m)}else _=ri._fromJSON(t,m);f!==s&&(u=_),s=f;break}}catch{}let d=o.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new e(s,t,r):(s=d[0],u&&(yield s._set(c,u.toJSON())),yield Promise.all(n.map(f=>S(null,null,function*(){if(f!==s)try{yield f._remove(c)}catch{}}))),new e(s,t,r))})}};function jT(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(vO(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(gO(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(EO(t))return"Blackberry";if(IO(t))return"Webos";if(mO(t))return"Safari";if((t.includes("chrome/")||_O(t))&&!t.includes("edge/"))return"Chrome";if(yO(t))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function gO(e=zt()){return/firefox\//i.test(e)}function mO(e=zt()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _O(e=zt()){return/crios\//i.test(e)}function vO(e=zt()){return/iemobile/i.test(e)}function yO(e=zt()){return/android/i.test(e)}function EO(e=zt()){return/blackberry/i.test(e)}function IO(e=zt()){return/webos/i.test(e)}function YT(e,t=[]){let n;switch(e){case"Browser":n=jT(zt());break;case"Worker":n=`${jT(zt())}-${e}`;break;default:n=e}let r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${po}/${r}`}var Sg=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){let r=s=>new Promise((c,u)=>{try{let d=t(s);c(d)}catch(d){u(d)}});r.onAbort=n,this.queue.push(r);let o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}runMiddleware(t){return S(this,null,function*(){if(this.auth.currentUser===t)return;let n=[];try{for(let r of this.queue)yield r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function wO(n){return S(this,arguments,function*(e,t={}){return Eu(e,"GET","/v2/passwordPolicy",WT(e,t))})}var TO=6,Dg=class{constructor(t){var n,r,o,s;let c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:TO,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,o,s,c,u;let d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,d),this.validatePasswordCharacterOptions(t,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(o=d.containsLowercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(s=d.containsUppercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(c=d.containsNumericCharacter)!==null&&c!==void 0?c:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(t,n){let r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),o&&(n.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<t.length;o++)r=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,o,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}};var Ng=class{constructor(t,n,r,o){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yu(this),this.idTokenSubscription=new yu(this),this.beforeStateQueue=new Sg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$T,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=ii(n)),this._initializationPromise=this.queue(()=>S(this,null,function*(){var r,o,s;if(!this._deleted&&(this.persistenceManager=yield vu.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return S(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return S(this,null,function*(){try{let n=yield mu(this,{idToken:t}),r=yield ri._fromGetAccountInfoResponse(this,n,t);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return S(this,null,function*(){var n;if(Fn(this.app)){let c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),o=r,s=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=o?._redirectEventId,d=yield this.tryRedirectSignIn(t);(!c||c===u)&&d?.user&&(o=d.user,s=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(o)}catch(c){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)})}tryRedirectSignIn(t){return S(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(t){return S(this,null,function*(){try{yield _u(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=iO()}_delete(){return S(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return S(this,null,function*(){if(Fn(this.app))return Promise.reject(hu(this));let n=t?Wt(t):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(t,n=!1){return S(this,null,function*(){if(!this._deleted)return t&&ce(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>S(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return S(this,null,function*(){return Fn(this.app)?Promise.reject(hu(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return Fn(this.app)?Promise.reject(hu(this)):this.queue(()=>S(this,null,function*(){yield this.assertedPersistence.setPersistence(ii(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return S(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return S(this,null,function*(){let t=yield wO(this),n=new Dg(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new $t("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{let r=this.onAuthStateChanged(()=>{r(),t()},n)}})}revokeAccessToken(t){return S(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield fO(this,r)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}_setRedirectUser(t,n){return S(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return S(this,null,function*(){if(!this.redirectPersistenceManager){let n=t&&ii(t)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=yield vu.create(this,[ii(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return S(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>S(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null})}_persistUserIfCurrent(t){return S(this,null,function*(){if(t===this.currentUser)return this.queue(()=>S(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,o){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),c=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(u,this,"internal-error"),u.then(()=>{c||s(this.currentUser)}),typeof n=="function"){let d=t.addObserver(n,r,o);return()=>{c=!0,d()}}else{let d=t.addObserver(n);return()=>{c=!0,d()}}}directlySetCurrentUser(t){return S(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=YT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return S(this,null,function*(){var t;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let o=yield this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n})}_getAppCheckToken(){return S(this,null,function*(){var t;if(Fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken();return n?.error&&tO(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function bO(e){return Wt(e)}var yu=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=rT(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var CO={loadJS(){return S(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SO(e){CO=e}function DO(e){return`__${e}${Math.floor(Math.random()*1e6)}`}function NO(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ii);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}var YY=DO("rcb"),QY=new oi(3e4,6e4);var JY=new oi(2e3,1e4);var XY=600*1e3;var eQ=new oi(3e4,6e4);var tQ=new oi(5e3,15e3);var nQ=encodeURIComponent("fac");var UT="@firebase/auth",VT="1.10.8";var Ag=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}getToken(t){return S(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function AO(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RO(e){qt(new et("auth",(t,{options:n})=>{let r=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;ce(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});let d={apiKey:c,authDomain:u,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YT(e)},f=new Ng(r,o,s,d);return NO(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),qt(new et("auth-internal",t=>{let n=bO(t.getProvider("auth").getImmediate());return(r=>new Ag(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),De(UT,VT,AO(e)),De(UT,VT,"esm2017")}var MO=300,rQ=Kw("authIdTokenMaxAge")||MO;function PO(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}SO({loadJS(e){return new Promise((t,n)=>{let r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=o=>{let s=Rg("internal-error");s.customData=o,n(s)},r.type="text/javascript",r.charset="UTF-8",PO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RO("Browser");var R0="auth";var Iu=class{constructor(){return _o(R0)}};var QT="@firebase/database",JT="1.0.20";var jm="";function M0(e){jm=e}var Bg=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Oe(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:ho(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var Hg=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return hn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var Mb=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Bg(t)}}catch{}return new Hg},ai=Mb("localStorage"),$g=Mb("sessionStorage");var Io=new fn("@firebase/database"),P0=(function(){let e=1;return function(){return e++}})(),Pb=function(e){let t=iT(e),n=new Jl;n.update(t);let r=n.digest();return fo.encodeByteArray(r)},xa=function(...e){let t="";for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=xa.apply(null,r):typeof r=="object"?t+=Oe(r):t+=r,t+=" "}return t},ci=null,XT=!0,x0=function(e,t){D(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Io.logLevel=he.VERBOSE,ci=Io.log.bind(Io),t&&$g.set("logging_enabled",!0)):typeof e=="function"?ci=e:(ci=null,$g.remove("logging_enabled"))},Ye=function(...e){if(XT===!0&&(XT=!1,ci===null&&$g.get("logging_enabled")===!0&&x0(!0)),ci){let t=xa.apply(null,e);ci(t)}},ka=function(e){return function(...t){Ye(e,...t)}},zg=function(...e){let t="FIREBASE INTERNAL ERROR: "+xa(...e);Io.error(t)},jn=function(...e){let t=`FIREBASE FATAL ERROR: ${xa(...e)}`;throw Io.error(t),new Error(t)},wt=function(...e){let t="FIREBASE WARNING: "+xa(...e);Io.warn(t)},k0=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&wt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},xb=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},O0=function(e){if(dn()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},bo="[MIN_NAME]",li="[MAX_NAME]",Mo=function(e,t){if(e===t)return 0;if(e===bo||t===li)return-1;if(t===bo||e===li)return 1;{let n=eb(e),r=eb(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},L0=function(e,t){return e===t?0:e<t?-1:1},_a=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Oe(t))},Um=function(e){if(typeof e!="object"||e===null)return Oe(e);let t=[];for(let r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=Oe(t[r]),n+=":",n+=Um(e[t[r]]);return n+="}",n},kb=function(e,t){let n=e.length;if(n<=t)return[e];let r=[];for(let o=0;o<n;o+=t)o+t>n?r.push(e.substring(o,n)):r.push(e.substring(o,o+t));return r};function mt(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Ob=function(e){D(!xb(e),"Invalid JSON number");let t=11,n=52,r=(1<<t-1)-1,o,s,c,u,d;e===0?(s=0,c=0,o=1/e===-1/0?1:0):(o=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(u=Math.min(Math.floor(Math.log(e)/Math.LN2),r),s=u+r,c=Math.round(e*Math.pow(2,n-u)-Math.pow(2,n))):(s=0,c=Math.round(e/Math.pow(2,1-r-n))));let f=[];for(d=n;d;d-=1)f.push(c%2?1:0),c=Math.floor(c/2);for(d=t;d;d-=1)f.push(s%2?1:0),s=Math.floor(s/2);f.push(o?1:0),f.reverse();let m=f.join(""),_="";for(d=0;d<64;d+=8){let v=parseInt(m.substr(d,8),2).toString(16);v.length===1&&(v="0"+v),_=_+v}return _.toLowerCase()},F0=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},j0=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function U0(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");let r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var V0=new RegExp("^-?(0*)\\d{1,10}$"),B0=-2147483648,H0=2147483647,eb=function(e){if(V0.test(e)){let t=Number(e);if(t>=B0&&t<=H0)return t}return null},Oa=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw wt("Exception was thrown by user callback.",n),t},Math.floor(0))}},$0=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},wa=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Wg=class{constructor(t,n){this.appCheckProvider=n,this.appName=t.name,Fn(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){wt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var qg=class{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ye("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',wt(t)}},Ta=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),Tu="5",Lb="v",Fb="s",jb="r",Ub="f",Vb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Bb="ls",Hb="p",Gg="ac",$b="websocket",zb="long_polling";var bu=class{constructor(t,n,r,o,s=!1,c="",u=!1,d=!1,f=null){this.secure=n,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=d,this.emulatorOptions=f,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ai.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ai.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function z0(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function Wb(e,t,n){D(typeof t=="string","typeof type must == string"),D(typeof n=="object","typeof params must == object");let r;if(t===$b)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===zb)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);z0(e)&&(n.ns=e.namespace);let o=[];return mt(n,(s,c)=>{o.push(s+"="+c)}),r+o.join("&")}var Zg=class{constructor(){this.counters_={}}incrementCounter(t,n=1){hn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return zw(this.counters_)}};var kg={},Og={};function Vm(e){let t=e.toString();return kg[t]||(kg[t]=new Zg),kg[t]}function W0(e,t){let n=e.toString();return Og[n]||(Og[n]=t()),Og[n]}var Kg=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&Oa(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var tb="start",q0="close",G0="pLPCommand",Z0="pRTLPCB",qb="id",Gb="pw",Zb="ser",K0="cb",Y0="seg",Q0="ts",J0="d",X0="dframe",Kb=1870,Yb=30,eL=Kb-Yb,tL=25e3,nL=3e4,Yg=class e{constructor(t,n,r,o,s,c,u){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=o,this.authToken=s,this.transportSessionId=c,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ka(t),this.stats_=Vm(n),this.urlFn=d=>(this.appCheckToken&&(d[Gg]=this.appCheckToken),Wb(n,zb,d))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Kg(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(nL)),O0(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Qg((...s)=>{let[c,u,d,f,m]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===tb)this.id=u,this.password=d;else if(c===q0)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...s)=>{let[c,u]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,u)},()=>{this.onClosed_()},this.urlFn);let r={};r[tb]="t",r[Zb]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[K0]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Lb]=Tu,this.transportSessionId&&(r[Fb]=this.transportSessionId),this.lastSessionId&&(r[Bb]=this.lastSessionId),this.applicationId&&(r[Hb]=this.applicationId),this.appCheckToken&&(r[Gg]=this.appCheckToken),typeof location<"u"&&location.hostname&&Vb.test(location.hostname)&&(r[jb]=Ub);let o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return dn()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!F0()&&!j0()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=Oe(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Gp(n),o=kb(r,eL);for(let s=0;s<o.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[s]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(dn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[X0]="t",r[qb]=t,r[Gb]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=Oe(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Qg=class e{constructor(t,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,dn())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=P0(),window[G0+this.uniqueCallbackIdentifier]=t,window[Z0+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(u){Ye("frame writing exception"),u.stack&&Ye(u.stack),Ye(u)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Ye("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[qb]=this.myID,t[Gb]=this.myPW,t[Zb]=this.currentSerial;let n=this.urlFn(t),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Yb+r.length<=Kb;){let c=this.pendingSegs.shift();r=r+"&"+Y0+o+"="+c.seg+"&"+Q0+o+"="+c.ts+"&"+J0+o+"="+c.d,o++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(r,Math.floor(tL)),s=()=>{clearTimeout(o),r()};this.addTag(t,s)}addTag(t,n){dn()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let o=r.readyState;(!o||o==="loaded"||o==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ye("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var rL=16384,iL=45e3,Cu=null;typeof MozWebSocket<"u"?Cu=MozWebSocket:typeof WebSocket<"u"&&(Cu=WebSocket);var va=(()=>{class e{constructor(n,r,o,s,c,u,d){this.connId=n,this.applicationId=o,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ka(this.connId),this.stats_=Vm(r),this.connURL=e.connectionURL_(r,u,d,s,o),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,o,s,c){let u={};return u[Lb]=Tu,!dn()&&typeof location<"u"&&location.hostname&&Vb.test(location.hostname)&&(u[jb]=Ub),r&&(u[Fb]=r),o&&(u[Bb]=o),s&&(u[Gg]=s),c&&(u[Hb]=c),Wb(n,$b,u)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ai.set("previous_websocket_failure",!0);try{let o;if(dn()){let s=this.nodeAdmin?"AdminNode":"Node";o={headers:{"User-Agent":`Firebase/${Tu}/${jm}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(o.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(o.headers["X-Firebase-AppCheck"]=this.appCheckToken);let c=process.env,u=this.connURL.indexOf("wss://")===0?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;u&&(o.proxy={origin:u})}this.mySock=new Cu(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");let s=o.message||o.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");let s=o.message||o.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,o=navigator.userAgent.match(r);o&&o.length>1&&parseFloat(o[1])<4.4&&(n=!0)}return!n&&Cu!==null&&!e.forceDisallow_}static previouslyFailed(){return ai.isInMemoryStorage||ai.get("previous_websocket_failure")===!0}markConnectionHealthy(){ai.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let o=ho(r);this.onMessage(o)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(D(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let o=this.extractFrameCount_(r);o!==null&&this.appendFrame_(o)}}send(n){this.resetKeepAlive();let r=Oe(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let o=kb(r,rL);o.length>1&&this.sendString_(String(o.length));for(let s=0;s<o.length;s++)this.sendString_(o[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(iL))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),oL=(()=>{class e{static get ALL_TRANSPORTS(){return[Yg,va]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){let r=va&&va.isAvailable(),o=r&&!va.previouslyFailed();if(n.webSocketOnly&&(r||wt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[va];else{let s=this.transports_=[];for(let c of e.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),sL=6e4,aL=5e3,cL=10*1024,lL=100*1024,Lg="t",nb="d",uL="s",rb="r",dL="e",ib="o",ob="a",sb="n",ab="p",hL="h",Jg=class{constructor(t,n,r,o,s,c,u,d,f,m){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=s,this.onMessage_=c,this.onReady_=u,this.onDisconnect_=d,this.onKill_=f,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ka("c:"+this.id+":"),this.transportManager_=new oL(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=wa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>lL?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>cL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Lg in t){let n=t[Lg];n===ob?this.upgradeIfSecondaryHealthy_():n===rb?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===ib&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=_a("t",t),r=_a("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ab,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ob,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:sb,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=_a("t",t),r=_a("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=_a(Lg,t);if(nb in t){let r=t[nb];if(n===hL){let o=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===sb){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===uL?this.onConnectionShutdown_(r):n===rb?this.onReset_(r):n===dL?zg("Server Error: "+r):n===ib?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zg("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,r=t.v,o=t.h;this.sessionId=t.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Tu!==r&&wt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),wa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(sL))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):wa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(aL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ab,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ai.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Su=class{put(t,n,r,o){}merge(t,n,r,o){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}};var Du=class{constructor(t){this.allowedEvents_=t,this.listeners_={},D(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});let o=this.getInitialEvent(t);o&&n.apply(r,o)}off(t,n,r){this.validateEventType_(t);let o=this.listeners_[t]||[];for(let s=0;s<o.length;s++)if(o[s].callback===n&&(!r||r===o[s].context)){o.splice(s,1);return}}validateEventType_(t){D(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var Nu=class e extends Du{static getInstance(){return new e}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ra()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return D(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var cb=32,lb=768,fe=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function le(){return new fe("")}function ee(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function gr(e){return e.pieces_.length-e.pieceNum_}function Ee(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new fe(e.pieces_,t)}function Qb(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function fL(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function Jb(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Xb(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new fe(t,0)}function Le(e,t){let n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof fe)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{let r=t.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&n.push(r[o])}return new fe(n,0)}function te(e){return e.pieceNum_>=e.pieces_.length}function gt(e,t){let n=ee(e),r=ee(t);if(n===null)return t;if(n===r)return gt(Ee(e),Ee(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Bm(e,t){if(gr(e)!==gr(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Kt(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(gr(e)>gr(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Xg=class{constructor(t,n){this.errorPrefix_=n,this.parts_=Jb(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=sa(this.parts_[r]);eC(this)}};function pL(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=sa(t),eC(e)}function gL(e){let t=e.parts_.pop();e.byteLength_-=sa(t),e.parts_.length>0&&(e.byteLength_-=1)}function eC(e){if(e.byteLength_>lb)throw new Error(e.errorPrefix_+"has a key path longer than "+lb+" bytes ("+e.byteLength_+").");if(e.parts_.length>cb)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+cb+") or object contains a cycle "+si(e))}function si(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var em=class e extends Du{static getInstance(){return new e}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return D(t==="visible","Unknown event type: "+t),[this.visible_]}};var ya=1e3,mL=300*1e3,ub=30*1e3,_L=1.3,vL=3e4,yL="server_kill",db=3,Hm=(()=>{class e extends Su{constructor(n,r,o,s,c,u,d,f){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=u,this.appCheckTokenProvider_=d,this.authOverride_=f,this.id=e.nextPersistentConnectionId_++,this.log_=ka("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ya,this.maxReconnectDelay_=mL,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f&&!dn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");em.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Nu.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,o){let s=++this.requestNumber_,c={r:s,a:n,b:r};this.log_(Oe(c)),D(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),o&&(this.requestCBHash_[s]=o)}get(n){this.initConnection_();let r=new ln,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:u=>{let d=u.d;u.s==="ok"?r.resolve(d):r.reject(d)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),r.promise}listen(n,r,o,s){this.initConnection_();let c=n._queryIdentifier,u=n._path.toString();this.log_("Listen called for "+u+" "+c),this.listens.has(u)||this.listens.set(u,new Map),D(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),D(!this.listens.get(u).has(c),"listen() called twice for same path/queryId.");let d={onComplete:s,hashFn:r,query:n,tag:o};this.listens.get(u).set(c,d),this.connected_&&this.sendListen_(d)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(n){let r=n.query,o=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+o+" for "+s);let c={p:o},u="q";n.tag&&(c.q=r._queryObject,c.t=n.tag),c.h=n.hashFn(),this.sendRequest(u,c,d=>{let f=d.d,m=d.s;e.warnOnListenWarnings_(f,r),(this.listens.get(o)&&this.listens.get(o).get(s))===n&&(this.log_("listen response",d),m!=="ok"&&this.removeListen_(o,s),n.onComplete&&n.onComplete(m,f))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&hn(n,"w")){let o=Yr(n,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();wt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||nT(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ub)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=tT(n)?"auth":"gauth",o={cred:n};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(r,o,s=>{let c=s.s,u=s.d||"error";this.authToken_===n&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,o=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(n,r){let o=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+o+" "+s),D(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,s)&&this.connected_&&this.sendUnlisten_(o,s,n._queryObject,r)}sendUnlisten_(n,r,o,s){this.log_("Unlisten on "+n+" for "+r);let c={p:n},u="n";s&&(c.q=o,c.t=s),this.sendRequest(u,c)}onDisconnectPut(n,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,o):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:o})}onDisconnectMerge(n,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,o):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:o})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,o,s){let c={p:r,d:o};this.log_("onDisconnect "+n,c),this.sendRequest(n,c,u=>{s&&setTimeout(()=>{s(u.s,u.d)},Math.floor(0))})}put(n,r,o,s){this.putInternal("p",n,r,o,s)}merge(n,r,o,s){this.putInternal("m",n,r,o,s)}putInternal(n,r,o,s,c){this.initConnection_();let u={p:r,d:o};c!==void 0&&(u.h=c),this.outstandingPuts_.push({action:n,request:u,onComplete:s}),this.outstandingPutCount_++;let d=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(d):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,o=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,o,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,o=>{if(o.s!=="ok"){let c=o.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Oe(n));let r=n.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):zg("Unrecognized action received from server: "+Oe(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){D(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ya,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=ya,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>vL&&(this.reconnectDelay_=ya),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_L)}this.onConnectStatus_(!1)}establishConnection_(){return S(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),o=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,c=this.lastSessionId,u=!1,d=null,f=function(){d?d.close():(u=!0,o())},m=function(v){D(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(v)};this.realtime_={close:f,sendRequest:m};let _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[v,y]=yield Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);u?Ye("getToken() completed but was canceled"):(Ye("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,d=new Jg(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,o,T=>{wt(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(yL)},c))}catch(v){this.log_("Failed to get token: "+v),u||(this.repoInfo_.nodeAdmin&&wt(v),f())}}})}interrupt(n){Ye("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ye("Resuming connection for reason: "+n),delete this.interruptReasons_[n],tu(this.interruptReasons_)&&(this.reconnectDelay_=ya,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let o;r?o=r.map(c=>Um(c)).join("$"):o="default";let s=this.removeListen_(n,o);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let o=new fe(n).toString(),s;if(this.listens.has(o)){let c=this.listens.get(o);s=c.get(r),c.delete(r),c.size===0&&this.listens.delete(o)}else s=void 0;return s}onAuthRevoked_(n,r){Ye("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=db&&(this.reconnectDelay_=ub,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Ye("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=db&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";dn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+jm.replace(/\./g,"-")]=1,ra()?n["framework.cordova"]=1:Xl()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Nu.getInstance().currentlyOnline();return tu(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),X=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var Co=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let r=new X(bo,t),o=new X(bo,n);return this.compare(r,o)!==0}minPost(){return X.MIN}};var wu,Au=class extends Co{static get __EMPTY_NODE(){return wu}static set __EMPTY_NODE(t){wu=t}compare(t,n){return Mo(t.name,n.name)}isDefinedOn(t){throw Zr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return X.MIN}maxPost(){return new X(li,wu)}makePost(t,n){return D(typeof t=="string","KeyIndex indexValue must always be a string."),new X(t,wu)}toString(){return".key"}},wo=new Au;var yo=class{constructor(t,n,r,o,s=null){this.isReverse_=o,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(t=t,c=n?r(t.key,n):1,o&&(c*=-1),c<0)this.isReverse_?t=t.left:t=t.right;else if(c===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Zt=(()=>{class e{constructor(n,r,o,s,c){this.key=n,this.value=r,this.color=o??e.RED,this.left=s??kt.EMPTY_NODE,this.right=c??kt.EMPTY_NODE}copy(n,r,o,s,c){return new e(n??this.key,r??this.value,o??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,o){let s=this,c=o(n,s.key);return c<0?s=s.copy(null,null,null,s.left.insert(n,r,o),null):c===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,o)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return kt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let o,s;if(o=this,r(n,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(n,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),r(n,o.key)===0){if(o.right.isEmpty())return kt.EMPTY_NODE;s=o.right.min_(),o=o.copy(s.key,s.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(n,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),tm=class{copy(t,n,r,o,s){return this}insert(t,n,r){return new Zt(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},kt=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Zt.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Zt.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,o=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(o=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new yo(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new yo(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new yo(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new yo(this.root_,null,this.comparator_,!0,t)}};kt.EMPTY_NODE=new tm;function EL(e,t){return Mo(e.name,t.name)}function $m(e,t){return Mo(e,t)}var nm;function IL(e){nm=e}var tC=function(e){return typeof e=="number"?"number:"+Ob(e):"string:"+e},nC=function(e){if(e.isLeafNode()){let t=e.val();D(typeof t=="string"||typeof t=="number"||typeof t=="object"&&hn(t,".sv"),"Priority must be a string or number.")}else D(e===nm||e.isEmpty(),"priority of unexpected type.");D(e===nm||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var hb,So=(()=>{class e{static set __childrenNodeConstructor(n){hb=n}static get __childrenNodeConstructor(){return hb}constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,D(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),nC(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return te(n)?this:ee(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let o=ee(n);return o===null?r:r.isEmpty()&&o!==".priority"?this:(D(o!==".priority"||gr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(o,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ee(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+tC(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=Ob(this.value_):n+=this.value_,this.lazyHash_=Pb(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(D(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,o=typeof this.value_,s=e.VALUE_TYPE_ORDER.indexOf(r),c=e.VALUE_TYPE_ORDER.indexOf(o);return D(s>=0,"Unknown leaf type: "+r),D(c>=0,"Unknown leaf type: "+o),s===c?o==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),rC,iC;function wL(e){rC=e}function TL(e){iC=e}var rm=class extends Co{compare(t,n){let r=t.node.getPriority(),o=n.node.getPriority(),s=r.compareTo(o);return s===0?Mo(t.name,n.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return X.MIN}maxPost(){return new X(li,new So("[PRIORITY-POST]",iC))}makePost(t,n){let r=rC(t);return new X(n,new So("[PRIORITY-POST]",r))}toString(){return".priority"}},be=new rm;var bL=Math.log(2),im=class{constructor(t){let n=s=>parseInt(Math.log(s)/bL,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let o=r(this.count);this.bits_=t+1&o}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},Ru=function(e,t,n,r){e.sort(t);let o=function(d,f){let m=f-d,_,v;if(m===0)return null;if(m===1)return _=e[d],v=n?n(_):_,new Zt(v,_.node,Zt.BLACK,null,null);{let y=parseInt(m/2,10)+d,T=o(d,y),N=o(y+1,f);return _=e[y],v=n?n(_):_,new Zt(v,_.node,Zt.BLACK,T,N)}},s=function(d){let f=null,m=null,_=e.length,v=function(T,N){let P=_-T,x=_;_-=T;let Fe=o(P+1,x),Ce=e[P],Jt=n?n(Ce):Ce;y(new Zt(Jt,Ce.node,N,null,Fe))},y=function(T){f?(f.left=T,f=T):(m=T,f=T)};for(let T=0;T<d.count;++T){let N=d.nextBitIsOne(),P=Math.pow(2,d.count-(T+1));N?v(P,Zt.BLACK):(v(P,Zt.BLACK),v(P,Zt.RED))}return m},c=new im(e.length),u=s(c);return new kt(r||t,u)};var Fg,vo={},Do=class e{static get Default(){return D(vo&&be,"ChildrenNode.ts has not been loaded"),Fg=Fg||new e({".priority":vo},{".priority":be}),Fg}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){let n=Yr(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof kt?n:null}hasIndex(t){return hn(this.indexSet_,t.toString())}addIndex(t,n){D(t!==wo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],o=!1,s=n.getIterator(X.Wrap),c=s.getNext();for(;c;)o=o||t.isDefinedOn(c.node),r.push(c),c=s.getNext();let u;o?u=Ru(r,t.getCompare()):u=vo;let d=t.toString(),f=Object.assign({},this.indexSet_);f[d]=t;let m=Object.assign({},this.indexes_);return m[d]=u,new e(m,f)}addToIndexes(t,n){let r=ia(this.indexes_,(o,s)=>{let c=Yr(this.indexSet_,s);if(D(c,"Missing index implementation for "+s),o===vo)if(c.isDefinedOn(t.node)){let u=[],d=n.getIterator(X.Wrap),f=d.getNext();for(;f;)f.name!==t.name&&u.push(f),f=d.getNext();return u.push(t),Ru(u,c.getCompare())}else return vo;else{let u=n.get(t.name),d=o;return u&&(d=d.remove(new X(t.name,u))),d.insert(t,t.node)}});return new e(r,this.indexSet_)}removeFromIndexes(t,n){let r=ia(this.indexes_,o=>{if(o===vo)return o;{let s=n.get(t.name);return s?o.remove(new X(t.name,s)):o}});return new e(r,this.indexSet_)}};var Ea,q=(()=>{class e{static get EMPTY_NODE(){return Ea||(Ea=new e(new kt($m),null,Do.Default))}constructor(n,r,o){this.children_=n,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&nC(this.priorityNode_),this.children_.isEmpty()&&D(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ea}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Ea:r}}getChild(n){let r=ee(n);return r===null?this:this.getImmediateChild(r).getChild(Ee(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(D(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let o=new X(n,r),s,c;r.isEmpty()?(s=this.children_.remove(n),c=this.indexMap_.removeFromIndexes(o,this.children_)):(s=this.children_.insert(n,r),c=this.indexMap_.addToIndexes(o,this.children_));let u=s.isEmpty()?Ea:this.priorityNode_;return new e(s,u,c)}}updateChild(n,r){let o=ee(n);if(o===null)return r;{D(ee(n)!==".priority"||gr(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(o).updateChild(Ee(n),r);return this.updateImmediateChild(o,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},o=0,s=0,c=!0;if(this.forEachChild(be,(u,d)=>{r[u]=d.val(n),o++,c&&e.INTEGER_REGEXP_.test(u)?s=Math.max(s,Number(u)):c=!1}),!n&&c&&s<2*o){let u=[];for(let d in r)u[d]=r[d];return u}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+tC(this.getPriority().val())+":"),this.forEachChild(be,(r,o)=>{let s=o.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":Pb(n)}return this.lazyHash_}getPredecessorChildName(n,r,o){let s=this.resolveIndex_(o);if(s){let c=s.getPredecessorKey(new X(n,r));return c?c.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let o=r.minKey();return o&&o.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new X(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let o=r.maxKey();return o&&o.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new X(r,this.children_.get(r)):null}forEachChild(n,r){let o=this.resolveIndex_(n);return o?o.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,X.Wrap),c=s.peek();for(;c!=null&&r.compare(c,n)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,X.Wrap),c=s.peek();for(;c!=null&&r.compare(c,n)>0;)s.getNext(),c=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===La?-1:0}withIndex(n){if(n===wo||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===wo||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let o=this.getIterator(be),s=r.getIterator(be),c=o.getNext(),u=s.getNext();for(;c&&u;){if(c.name!==u.name||!c.node.equals(u.node))return!1;c=o.getNext(),u=s.getNext()}return c===null&&u===null}else return!1;else return!1}}resolveIndex_(n){return n===wo?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),om=class extends q{constructor(){super(new kt($m),q.EMPTY_NODE,Do.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return q.EMPTY_NODE}isEmpty(){return!1}},La=new om;Object.defineProperties(X,{MIN:{value:new X(bo,q.EMPTY_NODE)},MAX:{value:new X(li,La)}});Au.__EMPTY_NODE=q.EMPTY_NODE;So.__childrenNodeConstructor=q;IL(La);TL(La);var CL=!0;function Qe(e,t=null){if(e===null)return q.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),D(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new So(n,Qe(t))}if(!(e instanceof Array)&&CL){let n=[],r=!1;if(mt(e,(c,u)=>{if(c.substring(0,1)!=="."){let d=Qe(u);d.isEmpty()||(r=r||!d.getPriority().isEmpty(),n.push(new X(c,d)))}}),n.length===0)return q.EMPTY_NODE;let s=Ru(n,EL,c=>c.name,$m);if(r){let c=Ru(n,be.getCompare());return new q(s,Qe(t),new Do({".priority":c},{".priority":be}))}else return new q(s,Qe(t),Do.Default)}else{let n=q.EMPTY_NODE;return mt(e,(r,o)=>{if(hn(e,r)&&r.substring(0,1)!=="."){let s=Qe(o);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Qe(t))}}wL(Qe);var sm=class extends Co{constructor(t){super(),this.indexPath_=t,D(!te(t)&&ee(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let r=this.extractChild(t.node),o=this.extractChild(n.node),s=r.compareTo(o);return s===0?Mo(t.name,n.name):s}makePost(t,n){let r=Qe(t),o=q.EMPTY_NODE.updateChild(this.indexPath_,r);return new X(n,o)}maxPost(){let t=q.EMPTY_NODE.updateChild(this.indexPath_,La);return new X(li,t)}toString(){return Jb(this.indexPath_,0).join("/")}};var am=class extends Co{compare(t,n){let r=t.node.compareTo(n.node);return r===0?Mo(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return X.MIN}maxPost(){return X.MAX}makePost(t,n){let r=Qe(t);return new X(n,r)}toString(){return".value"}},SL=new am;function oC(e){return{type:"value",snapshotNode:e}}function No(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Da(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Na(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function DL(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var Aa=class{constructor(t){this.index_=t}updateChild(t,n,r,o,s,c){D(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let u=t.getImmediateChild(n);return u.getChild(o).equals(r.getChild(o))&&u.isEmpty()===r.isEmpty()||(c!=null&&(r.isEmpty()?t.hasChild(n)?c.trackChildChange(Da(n,u)):D(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?c.trackChildChange(No(n,r)):c.trackChildChange(Na(n,r,u))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(be,(o,s)=>{n.hasChild(o)||r.trackChildChange(Da(o,s))}),n.isLeafNode()||n.forEachChild(be,(o,s)=>{if(t.hasChild(o)){let c=t.getImmediateChild(o);c.equals(s)||r.trackChildChange(Na(o,s,c))}else r.trackChildChange(No(o,s))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?q.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Mu=class e{constructor(t){this.indexedFilter_=new Aa(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,o,s,c){return this.matches(new X(n,r))||(r=q.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,o,s,c)}updateFullNode(t,n,r){n.isLeafNode()&&(n=q.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(q.EMPTY_NODE);let s=this;return n.forEachChild(be,(c,u)=>{s.matches(new X(c,u))||(o=o.updateImmediateChild(c,q.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,o,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}};var cm=class{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Mu(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,o,s,c){return this.rangedFilter_.matches(new X(n,r))||(r=q.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,o,s,c):this.fullLimitUpdateChild_(t,n,r,s,c)}updateFullNode(t,n,r){let o;if(n.isLeafNode()||n.isEmpty())o=q.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=q.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){let u=s.getNext();if(this.withinDirectionalStart(u))if(this.withinDirectionalEnd(u))o=o.updateImmediateChild(u.name,u.node),c++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(q.EMPTY_NODE);let s;this.reverse_?s=o.getReverseIterator(this.index_):s=o.getIterator(this.index_);let c=0;for(;s.hasNext();){let u=s.getNext();c<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?c++:o=o.updateImmediateChild(u.name,q.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,o,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,o,s){let c;if(this.reverse_){let _=this.index_.getCompare();c=(v,y)=>_(y,v)}else c=this.index_.getCompare();let u=t;D(u.numChildren()===this.limit_,"");let d=new X(n,r),f=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),m=this.rangedFilter_.matches(d);if(u.hasChild(n)){let _=u.getImmediateChild(n),v=o.getChildAfterChild(this.index_,f,this.reverse_);for(;v!=null&&(v.name===n||u.hasChild(v.name));)v=o.getChildAfterChild(this.index_,v,this.reverse_);let y=v==null?1:c(v,d);if(m&&!r.isEmpty()&&y>=0)return s?.trackChildChange(Na(n,r,_)),u.updateImmediateChild(n,r);{s?.trackChildChange(Da(n,_));let N=u.updateImmediateChild(n,q.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(s?.trackChildChange(No(v.name,v.node)),N.updateImmediateChild(v.name,v.node)):N}}else return r.isEmpty()?t:m&&c(f,d)>=0?(s!=null&&(s.trackChildChange(Da(f.name,f.node)),s.trackChildChange(No(n,r))),u.updateImmediateChild(n,r).updateImmediateChild(f.name,q.EMPTY_NODE)):t}};var lm=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=be}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return D(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return D(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:bo}hasEnd(){return this.endSet_}getIndexEndValue(){return D(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return D(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:li}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return D(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===be}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function NL(e){return e.loadsAllData()?new Aa(e.getIndex()):e.hasLimit()?new cm(e):new Mu(e)}function fb(e){let t={};if(e.isDefault())return t;let n;if(e.index_===be?n="$priority":e.index_===SL?n="$value":e.index_===wo?n="$key":(D(e.index_ instanceof sm,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Oe(n),e.startSet_){let r=e.startAfterSet_?"startAfter":"startAt";t[r]=Oe(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+Oe(e.indexStartName_))}if(e.endSet_){let r=e.endBeforeSet_?"endBefore":"endAt";t[r]=Oe(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+Oe(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function pb(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==be&&(t.i=e.index_.toString()),t}var um=class e extends Su{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(D(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,r,o){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=ka("p:rest:"),this.listens_={}}listen(t,n,r,o){let s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);let c=e.getListenId_(t,r),u={};this.listens_[c]=u;let d=fb(t._queryParams);this.restRequest_(s+".json",d,(f,m)=>{let _=m;if(f===404&&(_=null,f=null),f===null&&this.onDataUpdate_(s,_,!1,r),Yr(this.listens_,c)===u){let v;f?f===401?v="permission_denied":v="rest_error:"+f:v="ok",o(v,null)}})}unlisten(t,n){let r=e.getListenId_(t,n);delete this.listens_[r]}get(t){let n=fb(t._queryParams),r=t._path.toString(),o=new ln;return this.restRequest_(r+".json",n,(s,c)=>{let u=c;s===404&&(u=null,s=null),s===null?(this.onDataUpdate_(r,u,!1,null),o.resolve(u)):o.reject(new Error(u))}),o.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,s])=>{o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);let c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+oa(n);this.log_("Sending REST request for "+c);let u=new XMLHttpRequest;u.onreadystatechange=()=>{if(r&&u.readyState===4){this.log_("REST Response for "+c+" received. status:",u.status,"response:",u.responseText);let d=null;if(u.status>=200&&u.status<300){try{d=ho(u.responseText)}catch{wt("Failed to parse JSON response for "+c+": "+u.responseText)}r(null,d)}else u.status!==401&&u.status!==404&&wt("Got unsuccessful REST response for "+c+" Status: "+u.status),r(u.status);r=null}},u.open("GET",c,!0),u.send()})}};var dm=class{constructor(){this.rootNode_=q.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function Pu(){return{value:null,children:new Map}}function sC(e,t,n){if(te(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let r=ee(t);e.children.has(r)||e.children.set(r,Pu());let o=e.children.get(r);t=Ee(t),sC(o,t,n)}}function hm(e,t,n){e.value!==null?n(t,e.value):AL(e,(r,o)=>{let s=new fe(t.toString()+"/"+r);hm(o,s,n)})}function AL(e,t){e.children.forEach((n,r)=>{t(r,n)})}var fm=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=Object.assign({},t);return this.last_&&mt(this.last_,(r,o)=>{n[r]=n[r]-o}),this.last_=t,n}};var gb=10*1e3,RL=30*1e3,ML=300*1e3,pm=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new fm(t);let r=gb+(RL-gb)*Math.random();wa(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),n={},r=!1;mt(t,(o,s)=>{s>0&&hn(this.statsToReport_,o)&&(n[o]=s,r=!0)}),r&&this.server_.reportStats(n),wa(this.reportStats_.bind(this),Math.floor(Math.random()*2*ML))}};var gn=(function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e})(gn||{});function aC(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function zm(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Wm(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var gm=class e{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=gn.ACK_USER_WRITE,this.source=aC()}operationForChild(t){if(te(this.path)){if(this.affectedTree.value!=null)return D(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new fe(t));return new e(le(),n,this.revert)}}else return D(ee(this.path)===t,"operationForChild called for unrelated child."),new e(Ee(this.path),this.affectedTree,this.revert)}};var xu=class e{constructor(t,n){this.source=t,this.path=n,this.type=gn.LISTEN_COMPLETE}operationForChild(t){return te(this.path)?new e(this.source,le()):new e(this.source,Ee(this.path))}};var Ao=class e{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=gn.OVERWRITE}operationForChild(t){return te(this.path)?new e(this.source,le(),this.snap.getImmediateChild(t)):new e(this.source,Ee(this.path),this.snap)}};var ku=class e{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=gn.MERGE}operationForChild(t){if(te(this.path)){let n=this.children.subtree(new fe(t));return n.isEmpty()?null:n.value?new Ao(this.source,le(),n.value):new e(this.source,le(),n)}else return D(ee(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Ee(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Un=class{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(te(t))return this.isFullyInitialized()&&!this.filtered_;let n=ee(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var mm=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function PL(e,t,n,r){let o=[],s=[];return t.forEach(c=>{c.type==="child_changed"&&e.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(DL(c.childName,c.snapshotNode))}),Ia(e,o,"child_removed",t,r,n),Ia(e,o,"child_added",t,r,n),Ia(e,o,"child_moved",s,r,n),Ia(e,o,"child_changed",t,r,n),Ia(e,o,"value",t,r,n),o}function Ia(e,t,n,r,o,s){let c=r.filter(u=>u.type===n);c.sort((u,d)=>kL(e,u,d)),c.forEach(u=>{let d=xL(e,u,s);o.forEach(f=>{f.respondsTo(u.type)&&t.push(f.createEvent(d,e.query_))})})}function xL(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function kL(e,t,n){if(t.childName==null||n.childName==null)throw Zr("Should only compare child_ events.");let r=new X(t.childName,t.snapshotNode),o=new X(n.childName,n.snapshotNode);return e.index_.compare(r,o)}function Wu(e,t){return{eventCache:e,serverCache:t}}function ba(e,t,n,r){return Wu(new Un(t,n,r),e.serverCache)}function cC(e,t,n,r){return Wu(e.eventCache,new Un(t,n,r))}function _m(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ui(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var jg,OL=()=>(jg||(jg=new kt(L0)),jg),_t=class e{static fromObject(t){let n=new e(null);return mt(t,(r,o)=>{n=n.set(new fe(r),o)}),n}constructor(t,n=OL()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:le(),value:this.value};if(te(t))return null;{let r=ee(t),o=this.children.get(r);if(o!==null){let s=o.findRootMostMatchingPathAndValue(Ee(t),n);return s!=null?{path:Le(new fe(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(te(t))return this;{let n=ee(t),r=this.children.get(n);return r!==null?r.subtree(Ee(t)):new e(null)}}set(t,n){if(te(t))return new e(n,this.children);{let r=ee(t),s=(this.children.get(r)||new e(null)).set(Ee(t),n),c=this.children.insert(r,s);return new e(this.value,c)}}remove(t){if(te(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=ee(t),r=this.children.get(n);if(r){let o=r.remove(Ee(t)),s;return o.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,o),this.value===null&&s.isEmpty()?new e(null):new e(this.value,s)}else return this}}get(t){if(te(t))return this.value;{let n=ee(t),r=this.children.get(n);return r?r.get(Ee(t)):null}}setTree(t,n){if(te(t))return n;{let r=ee(t),s=(this.children.get(r)||new e(null)).setTree(Ee(t),n),c;return s.isEmpty()?c=this.children.remove(r):c=this.children.insert(r,s),new e(this.value,c)}}fold(t){return this.fold_(le(),t)}fold_(t,n){let r={};return this.children.inorderTraversal((o,s)=>{r[o]=s.fold_(Le(t,o),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,le(),n)}findOnPath_(t,n,r){let o=this.value?r(n,this.value):!1;if(o)return o;if(te(t))return null;{let s=ee(t),c=this.children.get(s);return c?c.findOnPath_(Ee(t),Le(n,s),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,le(),n)}foreachOnPath_(t,n,r){if(te(t))return this;{this.value&&r(n,this.value);let o=ee(t),s=this.children.get(o);return s?s.foreachOnPath_(Ee(t),Le(n,o),r):new e(null)}}foreach(t){this.foreach_(le(),t)}foreach_(t,n){this.children.inorderTraversal((r,o)=>{o.foreach_(Le(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}};var Yt=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new _t(null))}};function Ca(e,t,n){if(te(t))return new Yt(new _t(n));{let r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){let o=r.path,s=r.value,c=gt(o,t);return s=s.updateChild(c,n),new Yt(e.writeTree_.set(o,s))}else{let o=new _t(n),s=e.writeTree_.setTree(t,o);return new Yt(s)}}}function mb(e,t,n){let r=e;return mt(n,(o,s)=>{r=Ca(r,Le(t,o),s)}),r}function _b(e,t){if(te(t))return Yt.empty();{let n=e.writeTree_.setTree(t,new _t(null));return new Yt(n)}}function vm(e,t){return di(e,t)!=null}function di(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(gt(n.path,t)):null}function vb(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(be,(r,o)=>{t.push(new X(r,o))}):e.writeTree_.children.inorderTraversal((r,o)=>{o.value!=null&&t.push(new X(r,o.value))}),t}function pr(e,t){if(te(t))return e;{let n=di(e,t);return n!=null?new Yt(new _t(n)):new Yt(e.writeTree_.subtree(t))}}function ym(e){return e.writeTree_.isEmpty()}function Ro(e,t){return lC(le(),e.writeTree_,t)}function lC(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((o,s)=>{o===".priority"?(D(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=lC(Le(e,o),s,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(Le(e,".priority"),r)),n}}function qm(e,t){return fC(t,e)}function LL(e,t,n,r,o){D(r>e.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:o}),o&&(e.visibleWrites=Ca(e.visibleWrites,t,n)),e.lastWriteId=r}function FL(e,t){for(let n=0;n<e.allWrites.length;n++){let r=e.allWrites[n];if(r.writeId===t)return r}return null}function jL(e,t){let n=e.allWrites.findIndex(u=>u.writeId===t);D(n>=0,"removeWrite called with nonexistent writeId.");let r=e.allWrites[n];e.allWrites.splice(n,1);let o=r.visible,s=!1,c=e.allWrites.length-1;for(;o&&c>=0;){let u=e.allWrites[c];u.visible&&(c>=n&&UL(u,r.path)?o=!1:Kt(r.path,u.path)&&(s=!0)),c--}if(o){if(s)return VL(e),!0;if(r.snap)e.visibleWrites=_b(e.visibleWrites,r.path);else{let u=r.children;mt(u,d=>{e.visibleWrites=_b(e.visibleWrites,Le(r.path,d))})}return!0}else return!1}function UL(e,t){if(e.snap)return Kt(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&Kt(Le(e.path,n),t))return!0;return!1}function VL(e){e.visibleWrites=uC(e.allWrites,BL,le()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function BL(e){return e.visible}function uC(e,t,n){let r=Yt.empty();for(let o=0;o<e.length;++o){let s=e[o];if(t(s)){let c=s.path,u;if(s.snap)Kt(n,c)?(u=gt(n,c),r=Ca(r,u,s.snap)):Kt(c,n)&&(u=gt(c,n),r=Ca(r,le(),s.snap.getChild(u)));else if(s.children){if(Kt(n,c))u=gt(n,c),r=mb(r,u,s.children);else if(Kt(c,n))if(u=gt(c,n),te(u))r=mb(r,le(),s.children);else{let d=Yr(s.children,ee(u));if(d){let f=d.getChild(Ee(u));r=Ca(r,le(),f)}}}else throw Zr("WriteRecord should have .snap or .children")}}return r}function dC(e,t,n,r,o){if(!r&&!o){let s=di(e.visibleWrites,t);if(s!=null)return s;{let c=pr(e.visibleWrites,t);if(ym(c))return n;if(n==null&&!vm(c,le()))return null;{let u=n||q.EMPTY_NODE;return Ro(c,u)}}}else{let s=pr(e.visibleWrites,t);if(!o&&ym(s))return n;if(!o&&n==null&&!vm(s,le()))return null;{let c=function(f){return(f.visible||o)&&(!r||!~r.indexOf(f.writeId))&&(Kt(f.path,t)||Kt(t,f.path))},u=uC(e.allWrites,c,t),d=n||q.EMPTY_NODE;return Ro(u,d)}}}function HL(e,t,n){let r=q.EMPTY_NODE,o=di(e.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(be,(s,c)=>{r=r.updateImmediateChild(s,c)}),r;if(n){let s=pr(e.visibleWrites,t);return n.forEachChild(be,(c,u)=>{let d=Ro(pr(s,new fe(c)),u);r=r.updateImmediateChild(c,d)}),vb(s).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}else{let s=pr(e.visibleWrites,t);return vb(s).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}}function $L(e,t,n,r,o){D(r||o,"Either existingEventSnap or existingServerSnap must exist");let s=Le(t,n);if(vm(e.visibleWrites,s))return null;{let c=pr(e.visibleWrites,s);return ym(c)?o.getChild(n):Ro(c,o.getChild(n))}}function zL(e,t,n,r){let o=Le(t,n),s=di(e.visibleWrites,o);if(s!=null)return s;if(r.isCompleteForChild(n)){let c=pr(e.visibleWrites,o);return Ro(c,r.getNode().getImmediateChild(n))}else return null}function WL(e,t){return di(e.visibleWrites,t)}function qL(e,t,n,r,o,s,c){let u,d=pr(e.visibleWrites,t),f=di(d,le());if(f!=null)u=f;else if(n!=null)u=Ro(d,n);else return[];if(u=u.withIndex(c),!u.isEmpty()&&!u.isLeafNode()){let m=[],_=c.getCompare(),v=s?u.getReverseIteratorFrom(r,c):u.getIteratorFrom(r,c),y=v.getNext();for(;y&&m.length<o;)_(y,r)!==0&&m.push(y),y=v.getNext();return m}else return[]}function GL(){return{visibleWrites:Yt.empty(),allWrites:[],lastWriteId:-1}}function Ou(e,t,n,r){return dC(e.writeTree,e.treePath,t,n,r)}function Gm(e,t){return HL(e.writeTree,e.treePath,t)}function yb(e,t,n,r){return $L(e.writeTree,e.treePath,t,n,r)}function Lu(e,t){return WL(e.writeTree,Le(e.treePath,t))}function ZL(e,t,n,r,o,s){return qL(e.writeTree,e.treePath,t,n,r,o,s)}function Zm(e,t,n){return zL(e.writeTree,e.treePath,t,n)}function hC(e,t){return fC(Le(e.treePath,t),e.writeTree)}function fC(e,t){return{treePath:e,writeTree:t}}var Em=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,r=t.childName;D(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),D(r!==".priority","Only non-priority child changes can be tracked.");let o=this.changeMap.get(r);if(o){let s=o.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Na(r,t.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Da(r,o.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,No(r,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Na(r,t.snapshotNode,o.oldSnap));else throw Zr("Illegal combination of changes: "+t+" occurred after "+o)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var Im=class{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}},pC=new Im,Ra=class{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new Un(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Zm(this.writes_,t,r)}}getChildAfterChild(t,n,r){let o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ui(this.viewCache_),s=ZL(this.writes_,o,n,1,r,t);return s.length===0?null:s[0]}};function KL(e){return{filter:e}}function YL(e,t){D(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),D(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function QL(e,t,n,r,o){let s=new Em,c,u;if(n.type===gn.OVERWRITE){let f=n;f.source.fromUser?c=wm(e,t,f.path,f.snap,r,o,s):(D(f.source.fromServer,"Unknown source."),u=f.source.tagged||t.serverCache.isFiltered()&&!te(f.path),c=Fu(e,t,f.path,f.snap,r,o,u,s))}else if(n.type===gn.MERGE){let f=n;f.source.fromUser?c=XL(e,t,f.path,f.children,r,o,s):(D(f.source.fromServer,"Unknown source."),u=f.source.tagged||t.serverCache.isFiltered(),c=Tm(e,t,f.path,f.children,r,o,u,s))}else if(n.type===gn.ACK_USER_WRITE){let f=n;f.revert?c=n1(e,t,f.path,r,o,s):c=e1(e,t,f.path,f.affectedTree,r,o,s)}else if(n.type===gn.LISTEN_COMPLETE)c=t1(e,t,n.path,r,s);else throw Zr("Unknown operation type: "+n.type);let d=s.getChanges();return JL(t,c,d),{viewCache:c,changes:d}}function JL(e,t,n){let r=t.eventCache;if(r.isFullyInitialized()){let o=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=_m(e);(n.length>0||!e.eventCache.isFullyInitialized()||o&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(oC(_m(t)))}}function gC(e,t,n,r,o,s){let c=t.eventCache;if(Lu(r,n)!=null)return t;{let u,d;if(te(n))if(D(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let f=ui(t),m=f instanceof q?f:q.EMPTY_NODE,_=Gm(r,m);u=e.filter.updateFullNode(t.eventCache.getNode(),_,s)}else{let f=Ou(r,ui(t));u=e.filter.updateFullNode(t.eventCache.getNode(),f,s)}else{let f=ee(n);if(f===".priority"){D(gr(n)===1,"Can't have a priority with additional path components");let m=c.getNode();d=t.serverCache.getNode();let _=yb(r,n,m,d);_!=null?u=e.filter.updatePriority(m,_):u=c.getNode()}else{let m=Ee(n),_;if(c.isCompleteForChild(f)){d=t.serverCache.getNode();let v=yb(r,n,c.getNode(),d);v!=null?_=c.getNode().getImmediateChild(f).updateChild(m,v):_=c.getNode().getImmediateChild(f)}else _=Zm(r,f,t.serverCache);_!=null?u=e.filter.updateChild(c.getNode(),f,_,m,o,s):u=c.getNode()}}return ba(t,u,c.isFullyInitialized()||te(n),e.filter.filtersNodes())}}function Fu(e,t,n,r,o,s,c,u){let d=t.serverCache,f,m=c?e.filter:e.filter.getIndexedFilter();if(te(n))f=m.updateFullNode(d.getNode(),r,null);else if(m.filtersNodes()&&!d.isFiltered()){let y=d.getNode().updateChild(n,r);f=m.updateFullNode(d.getNode(),y,null)}else{let y=ee(n);if(!d.isCompleteForPath(n)&&gr(n)>1)return t;let T=Ee(n),P=d.getNode().getImmediateChild(y).updateChild(T,r);y===".priority"?f=m.updatePriority(d.getNode(),P):f=m.updateChild(d.getNode(),y,P,T,pC,null)}let _=cC(t,f,d.isFullyInitialized()||te(n),m.filtersNodes()),v=new Ra(o,_,s);return gC(e,_,n,o,v,u)}function wm(e,t,n,r,o,s,c){let u=t.eventCache,d,f,m=new Ra(o,t,s);if(te(n))f=e.filter.updateFullNode(t.eventCache.getNode(),r,c),d=ba(t,f,!0,e.filter.filtersNodes());else{let _=ee(n);if(_===".priority")f=e.filter.updatePriority(t.eventCache.getNode(),r),d=ba(t,f,u.isFullyInitialized(),u.isFiltered());else{let v=Ee(n),y=u.getNode().getImmediateChild(_),T;if(te(v))T=r;else{let N=m.getCompleteChild(_);N!=null?Qb(v)===".priority"&&N.getChild(Xb(v)).isEmpty()?T=N:T=N.updateChild(v,r):T=q.EMPTY_NODE}if(y.equals(T))d=t;else{let N=e.filter.updateChild(u.getNode(),_,T,v,m,c);d=ba(t,N,u.isFullyInitialized(),e.filter.filtersNodes())}}}return d}function Eb(e,t){return e.eventCache.isCompleteForChild(t)}function XL(e,t,n,r,o,s,c){let u=t;return r.foreach((d,f)=>{let m=Le(n,d);Eb(t,ee(m))&&(u=wm(e,u,m,f,o,s,c))}),r.foreach((d,f)=>{let m=Le(n,d);Eb(t,ee(m))||(u=wm(e,u,m,f,o,s,c))}),u}function Ib(e,t,n){return n.foreach((r,o)=>{t=t.updateChild(r,o)}),t}function Tm(e,t,n,r,o,s,c,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let d=t,f;te(n)?f=r:f=new _t(null).setTree(n,r);let m=t.serverCache.getNode();return f.children.inorderTraversal((_,v)=>{if(m.hasChild(_)){let y=t.serverCache.getNode().getImmediateChild(_),T=Ib(e,y,v);d=Fu(e,d,new fe(_),T,o,s,c,u)}}),f.children.inorderTraversal((_,v)=>{let y=!t.serverCache.isCompleteForChild(_)&&v.value===null;if(!m.hasChild(_)&&!y){let T=t.serverCache.getNode().getImmediateChild(_),N=Ib(e,T,v);d=Fu(e,d,new fe(_),N,o,s,c,u)}}),d}function e1(e,t,n,r,o,s,c){if(Lu(o,n)!=null)return t;let u=t.serverCache.isFiltered(),d=t.serverCache;if(r.value!=null){if(te(n)&&d.isFullyInitialized()||d.isCompleteForPath(n))return Fu(e,t,n,d.getNode().getChild(n),o,s,u,c);if(te(n)){let f=new _t(null);return d.getNode().forEachChild(wo,(m,_)=>{f=f.set(new fe(m),_)}),Tm(e,t,n,f,o,s,u,c)}else return t}else{let f=new _t(null);return r.foreach((m,_)=>{let v=Le(n,m);d.isCompleteForPath(v)&&(f=f.set(m,d.getNode().getChild(v)))}),Tm(e,t,n,f,o,s,u,c)}}function t1(e,t,n,r,o){let s=t.serverCache,c=cC(t,s.getNode(),s.isFullyInitialized()||te(n),s.isFiltered());return gC(e,c,n,r,pC,o)}function n1(e,t,n,r,o,s){let c;if(Lu(r,n)!=null)return t;{let u=new Ra(r,t,o),d=t.eventCache.getNode(),f;if(te(n)||ee(n)===".priority"){let m;if(t.serverCache.isFullyInitialized())m=Ou(r,ui(t));else{let _=t.serverCache.getNode();D(_ instanceof q,"serverChildren would be complete if leaf node"),m=Gm(r,_)}m=m,f=e.filter.updateFullNode(d,m,s)}else{let m=ee(n),_=Zm(r,m,t.serverCache);_==null&&t.serverCache.isCompleteForChild(m)&&(_=d.getImmediateChild(m)),_!=null?f=e.filter.updateChild(d,m,_,Ee(n),u,s):t.eventCache.getNode().hasChild(m)?f=e.filter.updateChild(d,m,q.EMPTY_NODE,Ee(n),u,s):f=d,f.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=Ou(r,ui(t)),c.isLeafNode()&&(f=e.filter.updateFullNode(f,c,s)))}return c=t.serverCache.isFullyInitialized()||Lu(r,le())!=null,ba(t,f,c,e.filter.filtersNodes())}}var bm=class{constructor(t,n){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,o=new Aa(r.getIndex()),s=NL(r);this.processor_=KL(s);let c=n.serverCache,u=n.eventCache,d=o.updateFullNode(q.EMPTY_NODE,c.getNode(),null),f=s.updateFullNode(q.EMPTY_NODE,u.getNode(),null),m=new Un(d,c.isFullyInitialized(),o.filtersNodes()),_=new Un(f,u.isFullyInitialized(),s.filtersNodes());this.viewCache_=Wu(_,m),this.eventGenerator_=new mm(this.query_)}get query(){return this.query_}};function r1(e){return e.viewCache_.serverCache.getNode()}function i1(e,t){let n=ui(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!te(t)&&!n.getImmediateChild(ee(t)).isEmpty())?n.getChild(t):null}function wb(e){return e.eventRegistrations_.length===0}function o1(e,t){e.eventRegistrations_.push(t)}function Tb(e,t,n){let r=[];if(n){D(t==null,"A cancel should cancel all event registrations.");let o=e.query._path;e.eventRegistrations_.forEach(s=>{let c=s.createCancelEvent(n,o);c&&r.push(c)})}if(t){let o=[];for(let s=0;s<e.eventRegistrations_.length;++s){let c=e.eventRegistrations_[s];if(!c.matches(t))o.push(c);else if(t.hasAnyCallback()){o=o.concat(e.eventRegistrations_.slice(s+1));break}}e.eventRegistrations_=o}else e.eventRegistrations_=[];return r}function bb(e,t,n,r){t.type===gn.MERGE&&t.source.queryId!==null&&(D(ui(e.viewCache_),"We should always have a full cache before handling merges"),D(_m(e.viewCache_),"Missing event cache, even though we have a server cache"));let o=e.viewCache_,s=QL(e.processor_,o,t,n,r);return YL(e.processor_,s.viewCache),D(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,mC(e,s.changes,s.viewCache.eventCache.getNode(),null)}function s1(e,t){let n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(be,(s,c)=>{r.push(No(s,c))}),n.isFullyInitialized()&&r.push(oC(n.getNode())),mC(e,r,n.getNode(),t)}function mC(e,t,n,r){let o=r?[r]:e.eventRegistrations_;return PL(e.eventGenerator_,t,n,o)}var ju,Cm=class{constructor(){this.views=new Map}};function a1(e){D(!ju,"__referenceConstructor has already been defined"),ju=e}function c1(){return D(ju,"Reference.ts has not been loaded"),ju}function l1(e){return e.views.size===0}function Km(e,t,n,r){let o=t.source.queryId;if(o!==null){let s=e.views.get(o);return D(s!=null,"SyncTree gave us an op for an invalid query."),bb(s,t,n,r)}else{let s=[];for(let c of e.views.values())s=s.concat(bb(c,t,n,r));return s}}function u1(e,t,n,r,o){let s=t._queryIdentifier,c=e.views.get(s);if(!c){let u=Ou(n,o?r:null),d=!1;u?d=!0:r instanceof q?(u=Gm(n,r),d=!1):(u=q.EMPTY_NODE,d=!1);let f=Wu(new Un(u,d,!1),new Un(r,o,!1));return new bm(t,f)}return c}function d1(e,t,n,r,o,s){let c=u1(e,t,r,o,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,c),o1(c,n),s1(c,n)}function h1(e,t,n,r){let o=t._queryIdentifier,s=[],c=[],u=mr(e);if(o==="default")for(let[d,f]of e.views.entries())c=c.concat(Tb(f,n,r)),wb(f)&&(e.views.delete(d),f.query._queryParams.loadsAllData()||s.push(f.query));else{let d=e.views.get(o);d&&(c=c.concat(Tb(d,n,r)),wb(d)&&(e.views.delete(o),d.query._queryParams.loadsAllData()||s.push(d.query)))}return u&&!mr(e)&&s.push(new(c1())(t._repo,t._path)),{removed:s,events:c}}function _C(e){let t=[];for(let n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function To(e,t){let n=null;for(let r of e.views.values())n=n||i1(r,t);return n}function vC(e,t){if(t._queryParams.loadsAllData())return qu(e);{let r=t._queryIdentifier;return e.views.get(r)}}function yC(e,t){return vC(e,t)!=null}function mr(e){return qu(e)!=null}function qu(e){for(let t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var Uu;function f1(e){D(!Uu,"__referenceConstructor has already been defined"),Uu=e}function p1(){return D(Uu,"Reference.ts has not been loaded"),Uu}var g1=1,Vu=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new _t(null),this.pendingWriteTree_=GL(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function m1(e,t,n,r,o){return LL(e.pendingWriteTree_,t,n,r,o),o?Fa(e,new Ao(aC(),t,n)):[]}function Eo(e,t,n=!1){let r=FL(e.pendingWriteTree_,t);if(jL(e.pendingWriteTree_,t)){let s=new _t(null);return r.snap!=null?s=s.set(le(),!0):mt(r.children,c=>{s=s.set(new fe(c),!0)}),Fa(e,new gm(r.path,s,n))}else return[]}function Gu(e,t,n){return Fa(e,new Ao(zm(),t,n))}function _1(e,t,n){let r=_t.fromObject(n);return Fa(e,new ku(zm(),t,r))}function v1(e,t){return Fa(e,new xu(zm(),t))}function y1(e,t,n){let r=Ym(e,n);if(r){let o=Qm(r),s=o.path,c=o.queryId,u=gt(s,t),d=new xu(Wm(c),u);return Jm(e,s,d)}else return[]}function Sm(e,t,n,r,o=!1){let s=t._path,c=e.syncPointTree_.get(s),u=[];if(c&&(t._queryIdentifier==="default"||yC(c,t))){let d=h1(c,t,n,r);l1(c)&&(e.syncPointTree_=e.syncPointTree_.remove(s));let f=d.removed;if(u=d.events,!o){let m=f.findIndex(v=>v._queryParams.loadsAllData())!==-1,_=e.syncPointTree_.findOnPath(s,(v,y)=>mr(y));if(m&&!_){let v=e.syncPointTree_.subtree(s);if(!v.isEmpty()){let y=w1(v);for(let T=0;T<y.length;++T){let N=y[T],P=N.query,x=TC(e,N);e.listenProvider_.startListening(Sa(P),Bu(e,P),x.hashFn,x.onComplete)}}}!_&&f.length>0&&!r&&(m?e.listenProvider_.stopListening(Sa(t),null):f.forEach(v=>{let y=e.queryToTagMap.get(Zu(v));e.listenProvider_.stopListening(Sa(v),y)}))}T1(e,f)}return u}function E1(e,t,n,r){let o=Ym(e,r);if(o!=null){let s=Qm(o),c=s.path,u=s.queryId,d=gt(c,t),f=new Ao(Wm(u),d,n);return Jm(e,c,f)}else return[]}function I1(e,t,n,r){let o=Ym(e,r);if(o){let s=Qm(o),c=s.path,u=s.queryId,d=gt(c,t),f=_t.fromObject(n),m=new ku(Wm(u),d,f);return Jm(e,c,m)}else return[]}function Cb(e,t,n,r=!1){let o=t._path,s=null,c=!1;e.syncPointTree_.foreachOnPath(o,(v,y)=>{let T=gt(v,o);s=s||To(y,T),c=c||mr(y)});let u=e.syncPointTree_.get(o);u?(c=c||mr(u),s=s||To(u,le())):(u=new Cm,e.syncPointTree_=e.syncPointTree_.set(o,u));let d;s!=null?d=!0:(d=!1,s=q.EMPTY_NODE,e.syncPointTree_.subtree(o).foreachChild((y,T)=>{let N=To(T,le());N&&(s=s.updateImmediateChild(y,N))}));let f=yC(u,t);if(!f&&!t._queryParams.loadsAllData()){let v=Zu(t);D(!e.queryToTagMap.has(v),"View does not exist, but we have a tag");let y=b1();e.queryToTagMap.set(v,y),e.tagToQueryMap.set(y,v)}let m=qm(e.pendingWriteTree_,o),_=d1(u,t,n,m,s,d);if(!f&&!c&&!r){let v=vC(u,t);_=_.concat(C1(e,t,v))}return _}function EC(e,t,n){let o=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,(c,u)=>{let d=gt(c,t),f=To(u,d);if(f)return f});return dC(o,t,s,n,!0)}function Fa(e,t){return IC(t,e.syncPointTree_,null,qm(e.pendingWriteTree_,le()))}function IC(e,t,n,r){if(te(e.path))return wC(e,t,n,r);{let o=t.get(le());n==null&&o!=null&&(n=To(o,le()));let s=[],c=ee(e.path),u=e.operationForChild(c),d=t.children.get(c);if(d&&u){let f=n?n.getImmediateChild(c):null,m=hC(r,c);s=s.concat(IC(u,d,f,m))}return o&&(s=s.concat(Km(o,e,r,n))),s}}function wC(e,t,n,r){let o=t.get(le());n==null&&o!=null&&(n=To(o,le()));let s=[];return t.children.inorderTraversal((c,u)=>{let d=n?n.getImmediateChild(c):null,f=hC(r,c),m=e.operationForChild(c);m&&(s=s.concat(wC(m,u,d,f)))}),o&&(s=s.concat(Km(o,e,r,n))),s}function TC(e,t){let n=t.query,r=Bu(e,n);return{hashFn:()=>(r1(t)||q.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return r?y1(e,n._path,r):v1(e,n._path);{let s=U0(o,n);return Sm(e,n,null,s)}}}}function Bu(e,t){let n=Zu(t);return e.queryToTagMap.get(n)}function Zu(e){return e._path.toString()+"$"+e._queryIdentifier}function Ym(e,t){return e.tagToQueryMap.get(t)}function Qm(e){let t=e.indexOf("$");return D(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new fe(e.substr(0,t))}}function Jm(e,t,n){let r=e.syncPointTree_.get(t);D(r,"Missing sync point for query tag that we're tracking");let o=qm(e.pendingWriteTree_,t);return Km(r,n,o,null)}function w1(e){return e.fold((t,n,r)=>{if(n&&mr(n))return[qu(n)];{let o=[];return n&&(o=_C(n)),mt(r,(s,c)=>{o=o.concat(c)}),o}})}function Sa(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(p1())(e._repo,e._path):e}function T1(e,t){for(let n=0;n<t.length;++n){let r=t[n];if(!r._queryParams.loadsAllData()){let o=Zu(r),s=e.queryToTagMap.get(o);e.queryToTagMap.delete(o),e.tagToQueryMap.delete(s)}}}function b1(){return g1++}function C1(e,t,n){let r=t._path,o=Bu(e,t),s=TC(e,n),c=e.listenProvider_.startListening(Sa(t),o,s.hashFn,s.onComplete),u=e.syncPointTree_.subtree(r);if(o)D(!mr(u.value),"If we're adding a query, it shouldn't be shadowed");else{let d=u.fold((f,m,_)=>{if(!te(f)&&m&&mr(m))return[qu(m).query];{let v=[];return m&&(v=v.concat(_C(m).map(y=>y.query))),mt(_,(y,T)=>{v=v.concat(T)}),v}});for(let f=0;f<d.length;++f){let m=d[f];e.listenProvider_.stopListening(Sa(m),Bu(e,m))}}return c}var Dm=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},Nm=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=Le(this.path_,t);return new e(this.syncTree_,n)}node(){return EC(this.syncTree_,this.path_)}},S1=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},Sb=function(e,t,n){if(!e||typeof e!="object")return e;if(D(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return D1(e[".sv"],t,n);if(typeof e[".sv"]=="object")return N1(e[".sv"],t);D(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},D1=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:D(!1,"Unexpected server value: "+e)}},N1=function(e,t,n){e.hasOwnProperty("increment")||D(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let r=e.increment;typeof r!="number"&&D(!1,"Unexpected increment value: "+r);let o=t.node();if(D(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;let c=o.getValue();return typeof c!="number"?r:c+r},A1=function(e,t,n,r){return Xm(t,new Nm(n,e),r)},R1=function(e,t,n){return Xm(e,new Dm(t),n)};function Xm(e,t,n){let r=e.getPriority().val(),o=Sb(r,t.getImmediateChild(".priority"),n),s;if(e.isLeafNode()){let c=e,u=Sb(c.getValue(),t,n);return u!==c.getValue()||o!==c.getPriority().val()?new So(u,Qe(o)):e}else{let c=e;return s=c,o!==c.getPriority().val()&&(s=s.updatePriority(new So(o))),c.forEachChild(be,(u,d)=>{let f=Xm(d,t.getImmediateChild(u),n);f!==d&&(s=s.updateImmediateChild(u,f))}),s}}var Ma=class{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}};function e_(e,t){let n=t instanceof fe?t:new fe(t),r=e,o=ee(n);for(;o!==null;){let s=Yr(r.node.children,o)||{children:{},childCount:0};r=new Ma(o,r,s),n=Ee(n),o=ee(n)}return r}function Po(e){return e.node.value}function bC(e,t){e.node.value=t,Am(e)}function CC(e){return e.node.childCount>0}function M1(e){return Po(e)===void 0&&!CC(e)}function Ku(e,t){mt(e.node.children,(n,r)=>{t(new Ma(n,e,r))})}function SC(e,t,n,r){n&&!r&&t(e),Ku(e,o=>{SC(o,t,!0,r)}),n&&r&&t(e)}function P1(e,t,n){let r=n?e:e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function ja(e){return new fe(e.parent===null?e.name:ja(e.parent)+"/"+e.name)}function Am(e){e.parent!==null&&x1(e.parent,e.name,e)}function x1(e,t,n){let r=M1(n),o=hn(e.node.children,t);r&&o?(delete e.node.children[t],e.node.childCount--,Am(e)):!r&&!o&&(e.node.children[t]=n.node,e.node.childCount++,Am(e))}var k1=/[\[\].#$\/\u0000-\u001F\u007F]/,O1=/[\[\].#$\u0000-\u001F\u007F]/,Ug=10*1024*1024,DC=function(e){return typeof e=="string"&&e.length!==0&&!k1.test(e)},NC=function(e){return typeof e=="string"&&e.length!==0&&!O1.test(e)},L1=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),NC(e)};var AC=function(e,t,n){let r=n instanceof fe?new Xg(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+si(r));if(typeof t=="function")throw new Error(e+"contains a function "+si(r)+" with contents = "+t.toString());if(xb(t))throw new Error(e+"contains "+t.toString()+" "+si(r));if(typeof t=="string"&&t.length>Ug/3&&sa(t)>Ug)throw new Error(e+"contains a string greater than "+Ug+" utf8 bytes "+si(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let o=!1,s=!1;if(mt(t,(c,u)=>{if(c===".value")o=!0;else if(c!==".priority"&&c!==".sv"&&(s=!0,!DC(c)))throw new Error(e+" contains an invalid key ("+c+") "+si(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);pL(r,c),AC(e,u,r),gL(r)}),o&&s)throw new Error(e+' contains ".value" child '+si(r)+" in addition to actual children.")}};var RC=function(e,t,n,r){if(!(r&&n===void 0)&&!NC(n))throw new Error(Jp(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},F1=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),RC(e,t,n,r)};var j1=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!DC(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!L1(n))throw new Error(Jp(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Rm=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function MC(e,t){let n=null;for(let r=0;r<t.length;r++){let o=t[r],s=o.getPath();n!==null&&!Bm(s,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(o)}n&&e.eventLists_.push(n)}function PC(e,t,n){MC(e,n),xC(e,r=>Bm(r,t))}function hi(e,t,n){MC(e,n),xC(e,r=>Kt(r,t)||Kt(t,r))}function xC(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){let o=e.eventLists_[r];if(o){let s=o.path;t(s)?(U1(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function U1(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let r=n.getEventRunner();ci&&Ye("event: "+n.toString()),Oa(r)}}}var V1="repo_interrupt",B1=25,Mm=class{constructor(t,n,r,o){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Rm,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Pu(),this.transactionQueueTree_=new Ma,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function H1(e,t,n){if(e.stats_=Vm(e.repoInfo_),e.forceRestClient_||$0())e.server_=new um(e.repoInfo_,(r,o,s,c)=>{Db(e,r,o,s,c)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Nb(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Oe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Hm(e.repoInfo_,t,(r,o,s,c)=>{Db(e,r,o,s,c)},r=>{Nb(e,r)},r=>{z1(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=W0(e.repoInfo_,()=>new pm(e.stats_,e.server_)),e.infoData_=new dm,e.infoSyncTree_=new Vu({startListening:(r,o,s,c)=>{let u=[],d=e.infoData_.getNode(r._path);return d.isEmpty()||(u=Gu(e.infoSyncTree_,r._path,d),setTimeout(()=>{c("ok")},0)),u},stopListening:()=>{}}),t_(e,"connected",!1),e.serverSyncTree_=new Vu({startListening:(r,o,s,c)=>(e.server_.listen(r,s,o,(u,d)=>{let f=c(u,d);hi(e.eventQueue_,r._path,f)}),[]),stopListening:(r,o)=>{e.server_.unlisten(r,o)}})}function $1(e){let n=e.infoData_.getNode(new fe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function kC(e){return S1({timestamp:$1(e)})}function Db(e,t,n,r,o){e.dataUpdateCount++;let s=new fe(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let c=[];if(o)if(r){let d=ia(n,f=>Qe(f));c=I1(e.serverSyncTree_,s,d,o)}else{let d=Qe(n);c=E1(e.serverSyncTree_,s,d,o)}else if(r){let d=ia(n,f=>Qe(f));c=_1(e.serverSyncTree_,s,d)}else{let d=Qe(n);c=Gu(e.serverSyncTree_,s,d)}let u=s;c.length>0&&(u=r_(e,s)),hi(e.eventQueue_,u,c)}function Nb(e,t){t_(e,"connected",t),t===!1&&q1(e)}function z1(e,t){mt(t,(n,r)=>{t_(e,n,r)})}function t_(e,t,n){let r=new fe("/.info/"+t),o=Qe(n);e.infoData_.updateSnapshot(r,o);let s=Gu(e.infoSyncTree_,r,o);hi(e.eventQueue_,r,s)}function W1(e){return e.nextWriteId_++}function q1(e){OC(e,"onDisconnectEvents");let t=kC(e),n=Pu();hm(e.onDisconnect_,le(),(o,s)=>{let c=A1(o,s,e.serverSyncTree_,t);sC(n,o,c)});let r=[];hm(n,le(),(o,s)=>{r=r.concat(Gu(e.serverSyncTree_,o,s));let c=Q1(e,o);r_(e,c)}),e.onDisconnect_=Pu(),hi(e.eventQueue_,le(),r)}function G1(e,t,n){let r;ee(t._path)===".info"?r=Cb(e.infoSyncTree_,t,n):r=Cb(e.serverSyncTree_,t,n),PC(e.eventQueue_,t._path,r)}function Ab(e,t,n){let r;ee(t._path)===".info"?r=Sm(e.infoSyncTree_,t,n):r=Sm(e.serverSyncTree_,t,n),PC(e.eventQueue_,t._path,r)}function Z1(e){e.persistentConnection_&&e.persistentConnection_.interrupt(V1)}function OC(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Ye(n,...t)}function LC(e,t,n){return EC(e.serverSyncTree_,t,n)||q.EMPTY_NODE}function n_(e,t=e.transactionQueueTree_){if(t||Yu(e,t),Po(t)){let n=jC(e,t);D(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&K1(e,ja(t),n)}else CC(t)&&Ku(t,n=>{n_(e,n)})}function K1(e,t,n){let r=n.map(f=>f.currentWriteId),o=LC(e,t,r),s=o,c=o.hash();for(let f=0;f<n.length;f++){let m=n[f];D(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;let _=gt(t,m.path);s=s.updateChild(_,m.currentOutputSnapshotRaw)}let u=s.val(!0),d=t;e.server_.put(d.toString(),u,f=>{OC(e,"transaction put response",{path:d.toString(),status:f});let m=[];if(f==="ok"){let _=[];for(let v=0;v<n.length;v++)n[v].status=2,m=m.concat(Eo(e.serverSyncTree_,n[v].currentWriteId)),n[v].onComplete&&_.push(()=>n[v].onComplete(null,!0,n[v].currentOutputSnapshotResolved)),n[v].unwatcher();Yu(e,e_(e.transactionQueueTree_,t)),n_(e,e.transactionQueueTree_),hi(e.eventQueue_,t,m);for(let v=0;v<_.length;v++)Oa(_[v])}else{if(f==="datastale")for(let _=0;_<n.length;_++)n[_].status===3?n[_].status=4:n[_].status=0;else{wt("transaction at "+d.toString()+" failed: "+f);for(let _=0;_<n.length;_++)n[_].status=4,n[_].abortReason=f}r_(e,t)}},c)}function r_(e,t){let n=FC(e,t),r=ja(n),o=jC(e,n);return Y1(e,o,r),r}function Y1(e,t,n){if(t.length===0)return;let r=[],o=[],c=t.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<t.length;u++){let d=t[u],f=gt(n,d.path),m=!1,_;if(D(f!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)m=!0,_=d.abortReason,o=o.concat(Eo(e.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=B1)m=!0,_="maxretry",o=o.concat(Eo(e.serverSyncTree_,d.currentWriteId,!0));else{let v=LC(e,d.path,c);d.currentInputSnapshot=v;let y=t[u].update(v.val());if(y!==void 0){AC("transaction failed: Data returned ",y,d.path);let T=Qe(y);typeof y=="object"&&y!=null&&hn(y,".priority")||(T=T.updatePriority(v.getPriority()));let P=d.currentWriteId,x=kC(e),Fe=R1(T,v,x);d.currentOutputSnapshotRaw=T,d.currentOutputSnapshotResolved=Fe,d.currentWriteId=W1(e),c.splice(c.indexOf(P),1),o=o.concat(m1(e.serverSyncTree_,d.path,Fe,d.currentWriteId,d.applyLocally)),o=o.concat(Eo(e.serverSyncTree_,P,!0))}else m=!0,_="nodata",o=o.concat(Eo(e.serverSyncTree_,d.currentWriteId,!0))}hi(e.eventQueue_,n,o),o=[],m&&(t[u].status=2,(function(v){setTimeout(v,Math.floor(0))})(t[u].unwatcher),t[u].onComplete&&(_==="nodata"?r.push(()=>t[u].onComplete(null,!1,t[u].currentInputSnapshot)):r.push(()=>t[u].onComplete(new Error(_),!1,null))))}Yu(e,e.transactionQueueTree_);for(let u=0;u<r.length;u++)Oa(r[u]);n_(e,e.transactionQueueTree_)}function FC(e,t){let n,r=e.transactionQueueTree_;for(n=ee(t);n!==null&&Po(r)===void 0;)r=e_(r,n),t=Ee(t),n=ee(t);return r}function jC(e,t){let n=[];return UC(e,t,n),n.sort((r,o)=>r.order-o.order),n}function UC(e,t,n){let r=Po(t);if(r)for(let o=0;o<r.length;o++)n.push(r[o]);Ku(t,o=>{UC(e,o,n)})}function Yu(e,t){let n=Po(t);if(n){let r=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[r]=n[o],r++);n.length=r,bC(t,n.length>0?n:void 0)}Ku(t,r=>{Yu(e,r)})}function Q1(e,t){let n=ja(FC(e,t)),r=e_(e.transactionQueueTree_,t);return P1(r,o=>{Vg(e,o)}),Vg(e,r),SC(r,o=>{Vg(e,o)}),n}function Vg(e,t){let n=Po(t);if(n){let r=[],o=[],s=-1;for(let c=0;c<n.length;c++)n[c].status===3||(n[c].status===1?(D(s===c-1,"All SENT items should be at beginning of queue."),s=c,n[c].status=3,n[c].abortReason="set"):(D(n[c].status===0,"Unexpected transaction status in abort"),n[c].unwatcher(),o=o.concat(Eo(e.serverSyncTree_,n[c].currentWriteId,!0)),n[c].onComplete&&r.push(n[c].onComplete.bind(null,new Error("set"),!1,null))));s===-1?bC(t,void 0):n.length=s+1,hi(e.eventQueue_,ja(t),o);for(let c=0;c<r.length;c++)Oa(r[c])}}function J1(e){let t="",n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let o=n[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}t+="/"+o}return t}function X1(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):wt(`Invalid query segment '${n}' in query '${e}'`)}return t}var Rb=function(e,t){let n=eF(e),r=n.namespace;n.domain==="firebase.com"&&jn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&jn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||k0();let o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new bu(n.host,n.secure,r,o,t,"",r!==n.subdomain),path:new fe(n.pathString)}},eF=function(e){let t="",n="",r="",o="",s="",c=!0,u="https",d=443;if(typeof e=="string"){let f=e.indexOf("//");f>=0&&(u=e.substring(0,f-1),e=e.substring(f+2));let m=e.indexOf("/");m===-1&&(m=e.length);let _=e.indexOf("?");_===-1&&(_=e.length),t=e.substring(0,Math.min(m,_)),m<_&&(o=J1(e.substring(m,_)));let v=X1(e.substring(Math.min(e.length,_)));f=t.indexOf(":"),f>=0?(c=u==="https"||u==="wss",d=parseInt(t.substring(f+1),10)):f=t.length;let y=t.slice(0,f);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{let T=t.indexOf(".");r=t.substring(0,T).toLowerCase(),n=t.substring(T+1),s=r}"ns"in v&&(s=v.ns)}return{host:t,port:d,domain:n,subdomain:r,secure:c,scheme:u,pathString:o,namespace:s}};var Hu=class{constructor(t,n,r,o){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=o}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Oe(this.snapshot.exportVal())}},$u=class{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Pm=class{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return D(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var xm=class e{constructor(t,n,r,o){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=o}get key(){return te(this._path)?null:Qb(this._path)}get ref(){return new Vn(this._repo,this._path)}get _queryIdentifier(){let t=pb(this._queryParams),n=Um(t);return n==="{}"?"default":n}get _queryObject(){return pb(this._queryParams)}isEqual(t){if(t=Wt(t),!(t instanceof e))return!1;let n=this._repo===t._repo,r=Bm(this._path,t._path),o=this._queryIdentifier===t._queryIdentifier;return n&&r&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+fL(this._path)}};var Vn=class e extends xm{constructor(t,n){super(t,n,new lm,!1)}get parent(){let t=Xb(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},zu=class e{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let n=new fe(t),r=Pa(this.ref,t);return new e(this._node.getChild(n),r,be)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,o)=>t(new e(o,Pa(this.ref,r),be)))}hasChild(t){let n=new fe(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function VC(e,t){return e=Wt(e),e._checkNotDeleted("ref"),t!==void 0?Pa(e._root,t):e._root}function Pa(e,t){return e=Wt(e),ee(e._path)===null?F1("child","path",t,!1):RC("child","path",t,!1),new Vn(e._repo,Le(e._path,t))}var km=class e{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){let r=n._queryParams.getIndex();return new Hu("value",this,new zu(t.snapshotNode,new Vn(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new $u(this,t,n):null}matches(t){return t instanceof e?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Om=class e{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new $u(this,t,n):null}createEvent(t,n){D(t.childName!=null,"Child events should have a childName.");let r=Pa(new Vn(n._repo,n._path),t.childName),o=n._queryParams.getIndex();return new Hu(t.type,this,new zu(t.snapshotNode,r,o),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof e?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function tF(e,t,n,r,o){let s;if(typeof r=="object"&&(s=void 0,o=r),typeof r=="function"&&(s=r),o&&o.onlyOnce){let d=n,f=(m,_)=>{Ab(e._repo,e,u),d(m,_)};f.userCallback=n.userCallback,f.context=n.context,n=f}let c=new Pm(n,s||void 0),u=t==="value"?new km(c):new Om(t,c);return G1(e._repo,e,u),()=>Ab(e._repo,e,u)}function BC(e,t,n,r){return tF(e,"value",t,n,r)}a1(Vn);f1(Vn);var nF="FIREBASE_DATABASE_EMULATOR_HOST",Lm={},rF=!1;function iF(e,t,n,r){let o=t.lastIndexOf(":"),s=t.substring(0,o),c=Kr(s);e.repoInfo_=new bu(t,c,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(e.authTokenProvider_=r)}function oF(e,t,n,r,o){let s=r||e.options.databaseURL;s===void 0&&(e.options.projectId||jn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ye("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let c=Rb(s,o),u=c.repoInfo,d,f;typeof process<"u"&&process.env&&(f=process.env[nF]),f?(d=!0,s=`http://${f}?ns=${u.namespace}`,c=Rb(s,o),u=c.repoInfo):d=!c.repoInfo.secure;let m=o&&d?new Ta(Ta.OWNER):new qg(e.name,e.options,t);j1("Invalid Firebase Database URL",c),te(c.path)||jn("Database URL must point to the root of a Firebase Database (not including a child path).");let _=aF(u,e,m,new Wg(e,n));return new Fm(_,e)}function sF(e,t){let n=Lm[t];(!n||n[e.key]!==e)&&jn(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Z1(e),delete n[e.key]}function aF(e,t,n,r){let o=Lm[t.name];o||(o={},Lm[t.name]=o);let s=o[e.toURLString()];return s&&jn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Mm(e,rF,n,r),o[e.toURLString()]=s,s}var Fm=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(H1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Vn(this._repo,le())),this._rootInternal}_delete(){return this._rootInternal!==null&&(sF(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&jn("Cannot call "+t+" on a deleted database.")}};function HC(e=go(),t){let n=iu(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let r=Zw("database");r&&$C(n,...r)}return n}function $C(e,t,n,r={}){e=Wt(e),e._checkNotDeleted("useEmulator");let o=`${t}:${n}`,s=e._repoInternal;if(e._instanceStarted){if(o===e._repoInternal.repoInfo_.host&&Qr(r,s.repoInfo_.emulatorOptions))return;jn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&jn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Ta(Ta.OWNER);else if(r.mockUserToken){let u=typeof r.mockUserToken=="string"?r.mockUserToken:Yw(r.mockUserToken,e.app.options.projectId);c=new Ta(u)}Kr(t)&&(Yp(t),Qp("Database",!0)),iF(s,o,r,c)}function cF(e){M0(po),qt(new et("database",(t,{instanceIdentifier:n})=>{let r=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return oF(r,o,s,n)},"PUBLIC").setMultipleInstances(!0)),De(QT,JT,e),De(QT,JT,"esm2017")}Hm.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Hm.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};cF();var fi=class{constructor(t){return t}},zC="database",i_=class{constructor(){return _o(zC)}};var o_=new F("angularfire2.database-instances");function lF(e,t){let n=au(zC,e,t);return n&&new fi(n)}function uF(e){return(t,n)=>{let r=t.runOutsideAngular(()=>e(n));return new fi(r)}}var dF={provide:i_,deps:[[new xn,o_]]},hF={provide:fi,useFactory:lF,deps:[[new xn,o_],ni]};function WC(e,...t){return De("angularfire",ei.full,"rtdb"),ir([hF,dF,{provide:o_,useFactory:uF(e),multi:!0,deps:[ye,Ke,ti,ua,[new xn,Iu],[new xn,lu],...t]}])}var qC=dr(HC,!0);var GC=dr(BC,!0);var ZC=dr(VC,!0,2);var KC={production:!1,firebase:{apiKey:"",authDomain:"",databaseURL:"https://gps-tracker-5b10d-default-rtdb.firebaseio.com",projectId:"",storageBucket:"",messagingSenderId:"",appId:""}};var B="primary",Xa=Symbol("RouteTitle"),u_=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function mi(e){return new u_(e)}function rS(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let o={};for(let s=0;s<r.length;s++){let c=r[s],u=e[s];if(c[0]===":")o[c.substring(1)]=u;else if(c!==u.path)return null}return{consumed:e.slice(0,r.length),posParams:o}}function pF(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!mn(e[n],t[n]))return!1;return!0}function mn(e,t){let n=e?d_(e):void 0,r=t?d_(t):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let s=0;s<n.length;s++)if(o=n[s],!iS(e[o],t[o]))return!1;return!0}function d_(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function iS(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((o,s)=>r[s]===o)}else return e===t}function oS(e){return e.length>0?e[e.length-1]:null}function $n(e){return xh(e)?e:qs(e)?Me(Promise.resolve(e)):U(e)}var gF={exact:aS,subset:cS},sS={exact:mF,subset:_F,ignored:()=>!0};function YC(e,t,n){return gF[n.paths](e.root,t.root,n.matrixParams)&&sS[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function mF(e,t){return mn(e,t)}function aS(e,t,n){if(!pi(e.segments,t.segments)||!Xu(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!aS(e.children[r],t.children[r],n))return!1;return!0}function _F(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>iS(e[n],t[n]))}function cS(e,t,n){return lS(e,t,t.segments,n)}function lS(e,t,n,r){if(e.segments.length>n.length){let o=e.segments.slice(0,n.length);return!(!pi(o,n)||t.hasChildren()||!Xu(o,n,r))}else if(e.segments.length===n.length){if(!pi(e.segments,n)||!Xu(e.segments,n,r))return!1;for(let o in t.children)if(!e.children[o]||!cS(e.children[o],t.children[o],r))return!1;return!0}else{let o=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!pi(e.segments,o)||!Xu(e.segments,o,r)||!e.children[B]?!1:lS(e.children[B],t,s,r)}}function Xu(e,t,n){return t.every((r,o)=>sS[n](e[o].parameters,r.parameters))}var vn=class{root;queryParams;fragment;_queryParamMap;constructor(t=new ue([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=mi(this.queryParams),this._queryParamMap}toString(){return EF.serialize(this)}},ue=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ed(this)}},_r=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=mi(this.parameters),this._parameterMap}toString(){return dS(this)}};function vF(e,t){return pi(e,t)&&e.every((n,r)=>mn(n.parameters,t[r].parameters))}function pi(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function yF(e,t){let n=[];return Object.entries(e.children).forEach(([r,o])=>{r===B&&(n=n.concat(t(o,r)))}),Object.entries(e.children).forEach(([r,o])=>{r!==B&&(n=n.concat(t(o,r)))}),n}var ec=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:()=>new _i,providedIn:"root"})}return e})(),_i=class{parse(t){let n=new f_(t);return new vn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Ua(t.root,!0)}`,r=TF(t.queryParams),o=typeof t.fragment=="string"?`#${IF(t.fragment)}`:"";return`${n}${r}${o}`}},EF=new _i;function ed(e){return e.segments.map(t=>dS(t)).join("/")}function Ua(e,t){if(!e.hasChildren())return ed(e);if(t){let n=e.children[B]?Ua(e.children[B],!1):"",r=[];return Object.entries(e.children).forEach(([o,s])=>{o!==B&&r.push(`${o}:${Ua(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=yF(e,(r,o)=>o===B?[Ua(e.children[B],!1)]:[`${o}:${Ua(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[B]!=null?`${ed(e)}/${n[0]}`:`${ed(e)}/(${n.join("//")})`}}function uS(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qu(e){return uS(e).replace(/%3B/gi,";")}function IF(e){return encodeURI(e)}function h_(e){return uS(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function td(e){return decodeURIComponent(e)}function QC(e){return td(e.replace(/\+/g,"%20"))}function dS(e){return`${h_(e.path)}${wF(e.parameters)}`}function wF(e){return Object.entries(e).map(([t,n])=>`;${h_(t)}=${h_(n)}`).join("")}function TF(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(o=>`${Qu(n)}=${Qu(o)}`).join("&"):`${Qu(n)}=${Qu(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var bF=/^[^\/()?;#]+/;function s_(e){let t=e.match(bF);return t?t[0]:""}var CF=/^[^\/()?;=#]+/;function SF(e){let t=e.match(CF);return t?t[0]:""}var DF=/^[^=?&#]+/;function NF(e){let t=e.match(DF);return t?t[0]:""}var AF=/^[^&#]+/;function RF(e){let t=e.match(AF);return t?t[0]:""}var f_=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ue([],{}):new ue([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[B]=new ue(t,n)),r}parseSegment(){let t=s_(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new k(4009,!1);return this.capture(t),new _r(td(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=SF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=s_(this.remaining);o&&(r=o,this.capture(r))}t[td(n)]=td(r)}parseQueryParam(t){let n=NF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let c=RF(this.remaining);c&&(r=c,this.capture(r))}let o=QC(n),s=QC(r);if(t.hasOwnProperty(o)){let c=t[o];Array.isArray(c)||(c=[c],t[o]=c),c.push(s)}else t[o]=s}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=s_(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new k(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=B);let c=this.parseChildren();n[s??B]=Object.keys(c).length===1&&c[B]?c[B]:new ue([],c),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new k(4011,!1)}};function hS(e){return e.segments.length>0?new ue([],{[B]:e}):e}function fS(e){let t={};for(let[r,o]of Object.entries(e.children)){let s=fS(o);if(r===B&&s.segments.length===0&&s.hasChildren())for(let[c,u]of Object.entries(s.children))t[c]=u;else(s.segments.length>0||s.hasChildren())&&(t[r]=s)}let n=new ue(e.segments,t);return MF(n)}function MF(e){if(e.numberOfChildren===1&&e.children[B]){let t=e.children[B];return new ue(e.segments.concat(t.segments),t.children)}return e}function Fo(e){return e instanceof vn}function pS(e,t,n=null,r=null){let o=gS(e);return mS(o,t,n,r)}function gS(e){let t;function n(s){let c={};for(let d of s.children){let f=n(d);c[d.outlet]=f}let u=new ue(s.url,c);return s===e&&(t=u),u}let r=n(e.root),o=hS(r);return t??o}function mS(e,t,n,r){let o=e;for(;o.parent;)o=o.parent;if(t.length===0)return a_(o,o,o,n,r);let s=PF(t);if(s.toRoot())return a_(o,o,new ue([],{}),n,r);let c=xF(s,o,e),u=c.processChildren?Ba(c.segmentGroup,c.index,s.commands):vS(c.segmentGroup,c.index,s.commands);return a_(o,c.segmentGroup,u,n,r)}function nd(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function za(e){return typeof e=="object"&&e!=null&&e.outlets}function a_(e,t,n,r,o){let s={};r&&Object.entries(r).forEach(([d,f])=>{s[d]=Array.isArray(f)?f.map(m=>`${m}`):`${f}`});let c;e===t?c=n:c=_S(e,t,n);let u=hS(fS(c));return new vn(u,s,o)}function _S(e,t,n){let r={};return Object.entries(e.children).forEach(([o,s])=>{s===t?r[o]=n:r[o]=_S(s,t,n)}),new ue(e.segments,r)}var rd=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&nd(r[0]))throw new k(4003,!1);let o=r.find(za);if(o&&o!==oS(r))throw new k(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function PF(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new rd(!0,0,e);let t=0,n=!1,r=e.reduce((o,s,c)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let u={};return Object.entries(s.outlets).forEach(([d,f])=>{u[d]=typeof f=="string"?f.split("/"):f}),[...o,{outlets:u}]}if(s.segmentPath)return[...o,s.segmentPath]}return typeof s!="string"?[...o,s]:c===0?(s.split("/").forEach((u,d)=>{d==0&&u==="."||(d==0&&u===""?n=!0:u===".."?t++:u!=""&&o.push(u))}),o):[...o,s]},[]);return new rd(n,t,r)}var Oo=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function xF(e,t,n){if(e.isAbsolute)return new Oo(t,!0,0);if(!n)return new Oo(t,!1,NaN);if(n.parent===null)return new Oo(n,!0,0);let r=nd(e.commands[0])?0:1,o=n.segments.length-1+r;return kF(n,o,e.numberOfDoubleDots)}function kF(e,t,n){let r=e,o=t,s=n;for(;s>o;){if(s-=o,r=r.parent,!r)throw new k(4005,!1);o=r.segments.length}return new Oo(r,!1,o-s)}function OF(e){return za(e[0])?e[0].outlets:{[B]:e}}function vS(e,t,n){if(e??=new ue([],{}),e.segments.length===0&&e.hasChildren())return Ba(e,t,n);let r=LF(e,t,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let s=new ue(e.segments.slice(0,r.pathIndex),{});return s.children[B]=new ue(e.segments.slice(r.pathIndex),e.children),Ba(s,0,o)}else return r.match&&o.length===0?new ue(e.segments,{}):r.match&&!e.hasChildren()?p_(e,t,n):r.match?Ba(e,0,o):p_(e,t,n)}function Ba(e,t,n){if(n.length===0)return new ue(e.segments,{});{let r=OF(n),o={};if(Object.keys(r).some(s=>s!==B)&&e.children[B]&&e.numberOfChildren===1&&e.children[B].segments.length===0){let s=Ba(e.children[B],t,n);return new ue(e.segments,s.children)}return Object.entries(r).forEach(([s,c])=>{typeof c=="string"&&(c=[c]),c!==null&&(o[s]=vS(e.children[s],t,c))}),Object.entries(e.children).forEach(([s,c])=>{r[s]===void 0&&(o[s]=c)}),new ue(e.segments,o)}}function LF(e,t,n){let r=0,o=t,s={match:!1,pathIndex:0,commandIndex:0};for(;o<e.segments.length;){if(r>=n.length)return s;let c=e.segments[o],u=n[r];if(za(u))break;let d=`${u}`,f=r<n.length-1?n[r+1]:null;if(o>0&&d===void 0)break;if(d&&f&&typeof f=="object"&&f.outlets===void 0){if(!XC(d,f,c))return s;r+=2}else{if(!XC(d,{},c))return s;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function p_(e,t,n){let r=e.segments.slice(0,t),o=0;for(;o<n.length;){let s=n[o];if(za(s)){let d=FF(s.outlets);return new ue(r,d)}if(o===0&&nd(n[0])){let d=e.segments[t];r.push(new _r(d.path,JC(n[0]))),o++;continue}let c=za(s)?s.outlets[B]:`${s}`,u=o<n.length-1?n[o+1]:null;c&&u&&nd(u)?(r.push(new _r(c,JC(u))),o+=2):(r.push(new _r(c,{})),o++)}return new ue(r,{})}function FF(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=p_(new ue([],{}),0,r))}),t}function JC(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function XC(e,t,n){return e==n.path&&mn(t,n.parameters)}var Ha="imperative",He=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(He||{}),bt=class{id;url;constructor(t,n){this.id=t,this.url=n}},vi=class extends bt{type=He.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",o=null){super(t,n),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Bn=class extends bt{urlAfterRedirects;type=He.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},tt=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(tt||{}),Wa=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(Wa||{}),_n=class extends bt{reason;code;type=He.NavigationCancel;constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Hn=class extends bt{reason;code;type=He.NavigationSkipped;constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o}},jo=class extends bt{error;target;type=He.NavigationError;constructor(t,n,r,o){super(t,n),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},qa=class extends bt{urlAfterRedirects;state;type=He.RoutesRecognized;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},id=class extends bt{urlAfterRedirects;state;type=He.GuardsCheckStart;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},od=class extends bt{urlAfterRedirects;state;shouldActivate;type=He.GuardsCheckEnd;constructor(t,n,r,o,s){super(t,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},sd=class extends bt{urlAfterRedirects;state;type=He.ResolveStart;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ad=class extends bt{urlAfterRedirects;state;type=He.ResolveEnd;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cd=class{route;type=He.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ld=class{route;type=He.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ud=class{snapshot;type=He.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dd=class{snapshot;type=He.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hd=class{snapshot;type=He.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fd=class{snapshot;type=He.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ga=class{},Uo=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function jF(e){return!(e instanceof Ga)&&!(e instanceof Uo)}function UF(e,t){return e.providers&&!e._injector&&(e._injector=Ws(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Qt(e){return e.outlet||B}function VF(e,t){let n=e.filter(r=>Qt(r)===t);return n.push(...e.filter(r=>Qt(r)!==t)),n}function Ho(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var pd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ho(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new $o(this.rootInjector)}},$o=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new pd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(W(xe))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),gd=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=g_(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=g_(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=m_(t,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return m_(t,this._root).map(n=>n.value)}};function g_(e,t){if(e===t.value)return t;for(let n of t.children){let r=g_(e,n);if(r)return r}return null}function m_(e,t){if(e===t.value)return[t];for(let n of t.children){let r=m_(e,n);if(r.length)return r.unshift(t),r}return[]}var Tt=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function ko(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Za=class extends gd{snapshot;constructor(t,n){super(t),this.snapshot=n,b_(this,t)}toString(){return this.snapshot.toString()}};function yS(e){let t=BF(e),n=new We([new _r("",{})]),r=new We({}),o=new We({}),s=new We({}),c=new We(""),u=new vr(n,r,s,c,o,B,e,t.root);return u.snapshot=t.root,new Za(new Tt(u,[]),t)}function BF(e){let t={},n={},r={},s=new gi([],t,r,"",n,B,e,null,{});return new Ka("",new Tt(s,[]))}var vr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,o,s,c,u,d){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=s,this.outlet=c,this.component=u,this._futureSnapshot=d,this.title=this.dataSubject?.pipe(se(f=>f[Xa]))??U(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(t=>mi(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(t=>mi(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function md(e,t,n="emptyOnly"){let r,{routeConfig:o}=e;return t!==null&&(n==="always"||o?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:R(R({},t.params),e.params),data:R(R({},t.data),e.data),resolve:R(R(R(R({},e.data),t.data),o?.data),e._resolvedData)}:r={params:R({},e.params),data:R({},e.data),resolve:R(R({},e.data),e._resolvedData??{})},o&&IS(o)&&(r.resolve[Xa]=o.title),r}var gi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Xa]}constructor(t,n,r,o,s,c,u,d,f){this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=s,this.outlet=c,this.component=u,this.routeConfig=d,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=mi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=mi(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Ka=class extends gd{url;constructor(t,n){super(n),this.url=t,b_(this,n)}toString(){return ES(this._root)}};function b_(e,t){t.value._routerState=e,t.children.forEach(n=>b_(e,n))}function ES(e){let t=e.children.length>0?` { ${e.children.map(ES).join(", ")} } `:"";return`${e.value}${t}`}function c_(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,mn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),mn(t.params,n.params)||e.paramsSubject.next(n.params),pF(t.url,n.url)||e.urlSubject.next(n.url),mn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function __(e,t){let n=mn(e.params,t.params)&&vF(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||__(e.parent,t.parent))}function IS(e){return typeof e.title=="string"||e.title===null}var wS=new F(""),tc=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=B;activateEvents=new Xe;deactivateEvents=new Xe;attachEvents=new Xe;detachEvents=new Xe;routerOutletData=Iw();parentContexts=C($o);location=C(Vl);changeDetector=C(ww);inputBinder=C(Ed,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new k(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new k(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new k(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new k(4013,!1);this._activatedRoute=n;let o=this.location,c=n.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,d=new v_(n,u,o.injector,this.routerOutletData);this.activated=o.createComponent(c,{index:o.length,injector:d,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Ip({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[rp]})}return e})(),v_=class{route;childContexts;parent;outletData;constructor(t,n,r,o){this.route=t,this.childContexts=n,this.parent=r,this.outletData=o}get(t,n){return t===vr?this.route:t===$o?this.childContexts:t===wS?this.outletData:this.parent.get(t,n)}},Ed=new F("");var C_=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Wr({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,o){r&1&&ao(0,"router-outlet")},dependencies:[tc],encapsulation:2})}return e})();function S_(e){let t=e.children&&e.children.map(S_),n=t?ge(R({},e),{children:t}):R({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==B&&(n.component=C_),n}function HF(e,t,n){let r=Ya(e,t._root,n?n._root:void 0);return new Za(r,t)}function Ya(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let o=$F(e,t,n);return new Tt(r,o)}else{if(e.shouldAttach(t.value)){let s=e.retrieve(t.value);if(s!==null){let c=s.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(u=>Ya(e,u)),c}}let r=zF(t.value),o=t.children.map(s=>Ya(e,s));return new Tt(r,o)}}function $F(e,t,n){return t.children.map(r=>{for(let o of n.children)if(e.shouldReuseRoute(r.value,o.value.snapshot))return Ya(e,r,o);return Ya(e,r)})}function zF(e){return new vr(new We(e.url),new We(e.params),new We(e.queryParams),new We(e.fragment),new We(e.data),e.outlet,e.component,e)}var Vo=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},TS="ngNavigationCancelingError";function _d(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Fo(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=bS(!1,tt.Redirect);return o.url=n,o.navigationBehaviorOptions=r,o}function bS(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[TS]=!0,n.cancellationCode=t,n}function WF(e){return CS(e)&&Fo(e.url)}function CS(e){return!!e&&e[TS]}var qF=(e,t,n,r)=>se(o=>(new y_(t,o.targetRouterState,o.currentRouterState,n,r).activate(e),o)),y_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,o,s){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=s}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),c_(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let o=ko(n);t.children.forEach(s=>{let c=s.value.outlet;this.deactivateRoutes(s,o[c],r),delete o[c]}),Object.values(o).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,n,r){let o=t.value,s=n?n.value:null;if(o===s)if(o.component){let c=r.getContext(o.outlet);c&&this.deactivateChildRoutes(t,n,c.children)}else this.deactivateChildRoutes(t,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,s=ko(t);for(let c of Object.values(s))this.deactivateRouteAndItsChildren(c,o);if(r&&r.outlet){let c=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:u})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,s=ko(t);for(let c of Object.values(s))this.deactivateRouteAndItsChildren(c,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let o=ko(n);t.children.forEach(s=>{this.activateRoutes(s,o[s.value.outlet],r),this.forwardEvent(new fd(s.value.snapshot))}),t.children.length&&this.forwardEvent(new dd(t.value.snapshot))}activateRoutes(t,n,r){let o=t.value,s=n?n.value:null;if(c_(o),o===s)if(o.component){let c=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,c.children)}else this.activateChildRoutes(t,n,r);else if(o.component){let c=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let u=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),c.children.onOutletReAttached(u.contexts),c.attachRef=u.componentRef,c.route=u.route.value,c.outlet&&c.outlet.attach(u.componentRef,u.route.value),c_(u.route.value),this.activateChildRoutes(t,null,c.children)}else c.attachRef=null,c.route=o,c.outlet&&c.outlet.activateWith(o,c.injector),this.activateChildRoutes(t,null,c.children)}else this.activateChildRoutes(t,null,r)}},vd=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Lo=class{component;route;constructor(t,n){this.component=t,this.route=n}};function GF(e,t,n){let r=e._root,o=t?t._root:null;return Va(r,o,n,[r.value])}function ZF(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function zo(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Jh(e)?e:t.get(e):r}function Va(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let s=ko(t);return e.children.forEach(c=>{KF(c,s[c.value.outlet],n,r.concat([c.value]),o),delete s[c.value.outlet]}),Object.entries(s).forEach(([c,u])=>$a(u,n.getContext(c),o)),o}function KF(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let s=e.value,c=t?t.value:null,u=n?n.getContext(e.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){let d=YF(c,s,s.routeConfig.runGuardsAndResolvers);d?o.canActivateChecks.push(new vd(r)):(s.data=c.data,s._resolvedData=c._resolvedData),s.component?Va(e,t,u?u.children:null,r,o):Va(e,t,n,r,o),d&&u&&u.outlet&&u.outlet.isActivated&&o.canDeactivateChecks.push(new Lo(u.outlet.component,c))}else c&&$a(t,u,o),o.canActivateChecks.push(new vd(r)),s.component?Va(e,null,u?u.children:null,r,o):Va(e,null,n,r,o);return o}function YF(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!pi(e.url,t.url);case"pathParamsOrQueryParamsChange":return!pi(e.url,t.url)||!mn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!__(e,t)||!mn(e.queryParams,t.queryParams);case"paramsChange":default:return!__(e,t)}}function $a(e,t,n){let r=ko(e),o=e.value;Object.entries(r).forEach(([s,c])=>{o.component?t?$a(c,t.children.getContext(s),n):$a(c,null,n):$a(c,t,n)}),o.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Lo(t.outlet.component,o)):n.canDeactivateChecks.push(new Lo(null,o)):n.canDeactivateChecks.push(new Lo(null,o))}function nc(e){return typeof e=="function"}function QF(e){return typeof e=="boolean"}function JF(e){return e&&nc(e.canLoad)}function XF(e){return e&&nc(e.canActivate)}function ej(e){return e&&nc(e.canActivateChild)}function tj(e){return e&&nc(e.canDeactivate)}function nj(e){return e&&nc(e.canMatch)}function SS(e){return e instanceof Cn||e?.name==="EmptyError"}var Ju=Symbol("INITIAL_VALUE");function Bo(){return lt(e=>Kc(e.map(t=>t.pipe(Sn(1),Lh(Ju)))).pipe(se(t=>{for(let n of t)if(n!==!0){if(n===Ju)return Ju;if(n===!1||rj(n))return n}return!0}),Nt(t=>t!==Ju),Sn(1)))}function rj(e){return Fo(e)||e instanceof Vo}function ij(e,t){return Pe(n=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:s,canDeactivateChecks:c}}=n;return c.length===0&&s.length===0?U(ge(R({},n),{guardsResult:!0})):oj(c,r,o,e).pipe(Pe(u=>u&&QF(u)?sj(r,s,e,t):U(u)),se(u=>ge(R({},n),{guardsResult:u})))})}function oj(e,t,n,r){return Me(e).pipe(Pe(o=>dj(o.component,o.route,n,t,r)),Dn(o=>o!==!0,!0))}function sj(e,t,n,r){return Me(t).pipe(Wi(o=>zi(cj(o.route.parent,r),aj(o.route,r),uj(e,o.path,n),lj(e,o.route,n))),Dn(o=>o!==!0,!0))}function aj(e,t){return e!==null&&t&&t(new hd(e)),U(!0)}function cj(e,t){return e!==null&&t&&t(new ud(e)),U(!0)}function lj(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return U(!0);let o=r.map(s=>ps(()=>{let c=Ho(t)??n,u=zo(s,c),d=XF(u)?u.canActivate(t,e):ke(c,()=>u(t,e));return $n(d).pipe(Dn())}));return U(o).pipe(Bo())}function uj(e,t,n){let r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(c=>ZF(c)).filter(c=>c!==null).map(c=>ps(()=>{let u=c.guards.map(d=>{let f=Ho(c.node)??n,m=zo(d,f),_=ej(m)?m.canActivateChild(r,e):ke(f,()=>m(r,e));return $n(_).pipe(Dn())});return U(u).pipe(Bo())}));return U(s).pipe(Bo())}function dj(e,t,n,r,o){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return U(!0);let c=s.map(u=>{let d=Ho(t)??o,f=zo(u,d),m=tj(f)?f.canDeactivate(e,t,n,r):ke(d,()=>f(e,t,n,r));return $n(m).pipe(Dn())});return U(c).pipe(Bo())}function hj(e,t,n,r){let o=t.canLoad;if(o===void 0||o.length===0)return U(!0);let s=o.map(c=>{let u=zo(c,e),d=JF(u)?u.canLoad(t,n):ke(e,()=>u(t,n));return $n(d)});return U(s).pipe(Bo(),DS(r))}function DS(e){return Ch(Be(t=>{if(typeof t!="boolean")throw _d(e,t)}),se(t=>t===!0))}function fj(e,t,n,r){let o=t.canMatch;if(!o||o.length===0)return U(!0);let s=o.map(c=>{let u=zo(c,e),d=nj(u)?u.canMatch(t,n):ke(e,()=>u(t,n));return $n(d)});return U(s).pipe(Bo(),DS(r))}var Qa=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Ja=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function xo(e){return $i(new Qa(e))}function pj(e){return $i(new k(4e3,!1))}function gj(e){return $i(bS(!1,tt.GuardRejected))}var E_=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return U(r);if(o.numberOfChildren>1||!o.children[B])return pj(`${t.redirectTo}`);o=o.children[B]}}applyRedirectCommands(t,n,r,o,s){return mj(n,o,s).pipe(se(c=>{if(c instanceof vn)throw new Ja(c);let u=this.applyRedirectCreateUrlTree(c,this.urlSerializer.parse(c),t,r);if(c[0]==="/")throw new Ja(u);return u}))}applyRedirectCreateUrlTree(t,n,r,o){let s=this.createSegmentGroup(t,n.root,r,o);return new vn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([o,s])=>{if(typeof s=="string"&&s[0]===":"){let u=s.substring(1);r[o]=n[u]}else r[o]=s}),r}createSegmentGroup(t,n,r,o){let s=this.createSegments(t,n.segments,r,o),c={};return Object.entries(n.children).forEach(([u,d])=>{c[u]=this.createSegmentGroup(t,d,r,o)}),new ue(s,c)}createSegments(t,n,r,o){return n.map(s=>s.path[0]===":"?this.findPosParam(t,s,o):this.findOrReturn(s,r))}findPosParam(t,n,r){let o=r[n.path.substring(1)];if(!o)throw new k(4001,!1);return o}findOrReturn(t,n){let r=0;for(let o of n){if(o.path===t.path)return n.splice(r),o;r++}return t}};function mj(e,t,n){if(typeof e=="string")return U(e);let r=e,{queryParams:o,fragment:s,routeConfig:c,url:u,outlet:d,params:f,data:m,title:_}=t;return $n(ke(n,()=>r({params:f,data:m,queryParams:o,fragment:s,routeConfig:c,url:u,outlet:d,title:_})))}var I_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _j(e,t,n,r,o){let s=NS(e,t,n);return s.matched?(r=UF(t,r),fj(r,t,n,o).pipe(se(c=>c===!0?s:R({},I_)))):U(s)}function NS(e,t,n){if(t.path==="**")return vj(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?R({},I_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let o=(t.matcher||rS)(n,e,t);if(!o)return R({},I_);let s={};Object.entries(o.posParams??{}).forEach(([u,d])=>{s[u]=d.path});let c=o.consumed.length>0?R(R({},s),o.consumed[o.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:c,positionalParamSegments:o.posParams??{}}}function vj(e){return{matched:!0,parameters:e.length>0?oS(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function eS(e,t,n,r){return n.length>0&&Ij(e,n,r)?{segmentGroup:new ue(t,Ej(r,new ue(n,e.children))),slicedSegments:[]}:n.length===0&&wj(e,n,r)?{segmentGroup:new ue(e.segments,yj(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new ue(e.segments,e.children),slicedSegments:n}}function yj(e,t,n,r){let o={};for(let s of n)if(Id(e,t,s)&&!r[Qt(s)]){let c=new ue([],{});o[Qt(s)]=c}return R(R({},r),o)}function Ej(e,t){let n={};n[B]=t;for(let r of e)if(r.path===""&&Qt(r)!==B){let o=new ue([],{});n[Qt(r)]=o}return n}function Ij(e,t,n){return n.some(r=>Id(e,t,r)&&Qt(r)!==B)}function wj(e,t,n){return n.some(r=>Id(e,t,r))}function Id(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Tj(e,t,n){return t.length===0&&!e.children[n]}var w_=class{};function bj(e,t,n,r,o,s,c="emptyOnly"){return new T_(e,t,n,r,o,c,s).recognize()}var Cj=31,T_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,o,s,c,u){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=s,this.paramsInheritanceStrategy=c,this.urlSerializer=u,this.applyRedirects=new E_(this.urlSerializer,this.urlTree)}noMatchError(t){return new k(4002,`'${t.segmentGroup}'`)}recognize(){let t=eS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(se(({children:n,rootSnapshot:r})=>{let o=new Tt(r,n),s=new Ka("",o),c=pS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return c.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(c),{state:s,tree:c}}))}match(t){let n=new gi([],Object.freeze({}),Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),B,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,B,n).pipe(se(r=>({children:r,rootSnapshot:n})),Qn(r=>{if(r instanceof Ja)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Qa?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,o,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,s):this.processSegment(t,n,r,r.segments,o,!0,s).pipe(se(c=>c instanceof Tt?[c]:[]))}processChildren(t,n,r,o){let s=[];for(let c of Object.keys(r.children))c==="primary"?s.unshift(c):s.push(c);return Me(s).pipe(Wi(c=>{let u=r.children[c],d=VF(n,c);return this.processSegmentGroup(t,d,u,c,o)}),Oh((c,u)=>(c.push(...u),c)),Jn(null),kh(),Pe(c=>{if(c===null)return xo(r);let u=AS(c);return Sj(u),U(u)}))}processSegment(t,n,r,o,s,c,u){return Me(n).pipe(Wi(d=>this.processSegmentAgainstRoute(d._injector??t,n,d,r,o,s,c,u).pipe(Qn(f=>{if(f instanceof Qa)return U(null);throw f}))),Dn(d=>!!d),Qn(d=>{if(SS(d))return Tj(r,o,s)?U(new w_):xo(r);throw d}))}processSegmentAgainstRoute(t,n,r,o,s,c,u,d){return Qt(r)!==c&&(c===B||!Id(o,s,r))?xo(o):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,o,r,s,c,d):this.allowRedirects&&u?this.expandSegmentAgainstRouteUsingRedirect(t,o,n,r,s,c,d):xo(o)}expandSegmentAgainstRouteUsingRedirect(t,n,r,o,s,c,u){let{matched:d,parameters:f,consumedSegments:m,positionalParamSegments:_,remainingSegments:v}=NS(n,o,s);if(!d)return xo(n);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Cj&&(this.allowRedirects=!1));let y=new gi(s,f,Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,tS(o),Qt(o),o.component??o._loadedComponent??null,o,nS(o)),T=md(y,u,this.paramsInheritanceStrategy);return y.params=Object.freeze(T.params),y.data=Object.freeze(T.data),this.applyRedirects.applyRedirectCommands(m,o.redirectTo,_,y,t).pipe(lt(P=>this.applyRedirects.lineralizeSegments(o,P)),Pe(P=>this.processSegment(t,r,n,P.concat(v),c,!1,u)))}matchSegmentAgainstRoute(t,n,r,o,s,c){let u=_j(n,r,o,t,this.urlSerializer);return r.path==="**"&&(n.children={}),u.pipe(lt(d=>d.matched?(t=r._injector??t,this.getChildConfig(t,r,o).pipe(lt(({routes:f})=>{let m=r._loadedInjector??t,{parameters:_,consumedSegments:v,remainingSegments:y}=d,T=new gi(v,_,Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,tS(r),Qt(r),r.component??r._loadedComponent??null,r,nS(r)),N=md(T,c,this.paramsInheritanceStrategy);T.params=Object.freeze(N.params),T.data=Object.freeze(N.data);let{segmentGroup:P,slicedSegments:x}=eS(n,v,y,f);if(x.length===0&&P.hasChildren())return this.processChildren(m,f,P,T).pipe(se(Ce=>new Tt(T,Ce)));if(f.length===0&&x.length===0)return U(new Tt(T,[]));let Fe=Qt(r)===s;return this.processSegment(m,f,P,x,Fe?B:s,!0,T).pipe(se(Ce=>new Tt(T,Ce instanceof Tt?[Ce]:[])))}))):xo(n)))}getChildConfig(t,n,r){return n.children?U({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?U({routes:n._loadedRoutes,injector:n._loadedInjector}):hj(t,n,r,this.urlSerializer).pipe(Pe(o=>o?this.configLoader.loadChildren(t,n).pipe(Be(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):gj(n))):U({routes:[],injector:t})}};function Sj(e){e.sort((t,n)=>t.value.outlet===B?-1:n.value.outlet===B?1:t.value.outlet.localeCompare(n.value.outlet))}function Dj(e){let t=e.value.routeConfig;return t&&t.path===""}function AS(e){let t=[],n=new Set;for(let r of e){if(!Dj(r)){t.push(r);continue}let o=t.find(s=>r.value.routeConfig===s.value.routeConfig);o!==void 0?(o.children.push(...r.children),n.add(o)):t.push(r)}for(let r of n){let o=AS(r.children);t.push(new Tt(r.value,o))}return t.filter(r=>!n.has(r))}function tS(e){return e.data||{}}function nS(e){return e.resolve||{}}function Nj(e,t,n,r,o,s){return Pe(c=>bj(e,t,n,r,c.extractedUrl,o,s).pipe(se(({state:u,tree:d})=>ge(R({},c),{targetSnapshot:u,urlAfterRedirects:d}))))}function Aj(e,t){return Pe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return U(n);let s=new Set(o.map(d=>d.route)),c=new Set;for(let d of s)if(!c.has(d))for(let f of RS(d))c.add(f);let u=0;return Me(c).pipe(Wi(d=>s.has(d)?Rj(d,r,e,t):(d.data=md(d,d.parent,e).resolve,U(void 0))),Be(()=>u++),qi(1),Pe(d=>u===c.size?U(n):at))})}function RS(e){let t=e.children.map(n=>RS(n)).flat();return[e,...t]}function Rj(e,t,n,r){let o=e.routeConfig,s=e._resolve;return o?.title!==void 0&&!IS(o)&&(s[Xa]=o.title),ps(()=>(e.data=md(e,e.parent,n).resolve,Mj(s,e,t,r).pipe(se(c=>(e._resolvedData=c,e.data=R(R({},e.data),c),null)))))}function Mj(e,t,n,r){let o=d_(e);if(o.length===0)return U({});let s={};return Me(o).pipe(Pe(c=>Pj(e[c],t,n,r).pipe(Dn(),Be(u=>{if(u instanceof Vo)throw _d(new _i,u);s[c]=u}))),qi(1),se(()=>s),Qn(c=>SS(c)?at:$i(c)))}function Pj(e,t,n,r){let o=Ho(t)??r,s=zo(e,o),c=s.resolve?s.resolve(t,n):ke(o,()=>s(t,n));return $n(c)}function l_(e){return lt(t=>{let n=e(t);return n?Me(n).pipe(se(()=>t)):U(t)})}var D_=(()=>{class e{buildTitle(n){let r,o=n.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===B);return r}getResolvedTitleForRoute(n){return n.data[Xa]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:()=>C(MS),providedIn:"root"})}return e})(),MS=(()=>{class e extends D_{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(W(Uw))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),rc=new F("",{providedIn:"root",factory:()=>({})}),ic=new F(""),PS=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=C(Dp);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return U(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let o=$n(ke(n,()=>r.loadComponent())).pipe(se(kS),lt(OS),Be(c=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=c}),gs(()=>{this.componentLoaders.delete(r)})),s=new Ui(o,()=>new ze).pipe(ji());return this.componentLoaders.set(r,s),s}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return U({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=xS(r,this.compiler,n,this.onLoadEndListener).pipe(gs(()=>{this.childrenLoaders.delete(r)})),c=new Ui(s,()=>new ze).pipe(ji());return this.childrenLoaders.set(r,c),c}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function xS(e,t,n,r){return $n(ke(n,()=>e.loadChildren())).pipe(se(kS),lt(OS),Pe(o=>o instanceof Bl||Array.isArray(o)?U(o):Me(t.compileModuleAsync(o))),se(o=>{r&&r(e);let s,c,u=!1;return Array.isArray(o)?(c=o,u=!0):(s=o.create(n).injector,c=s.get(ic,[],{optional:!0,self:!0}).flat()),{routes:c.map(S_),injector:s}}))}function xj(e){return e&&typeof e=="object"&&"default"in e}function kS(e){return xj(e)?e.default:e}function OS(e){return U(e)}var wd=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:()=>C(kj),providedIn:"root"})}return e})(),kj=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),LS=new F("");var FS=new F(""),jS=(()=>{class e{currentNavigation=eo(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new ze;transitionAbortWithErrorSubject=new ze;configLoader=C(PS);environmentInjector=C(xe);destroyRef=C(Ur);urlSerializer=C(ec);rootContexts=C($o);location=C(lo);inputBindingEnabled=C(Ed,{optional:!0})!==null;titleStrategy=C(D_);options=C(rc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=C(wd);createViewTransition=C(LS,{optional:!0});navigationErrorHandler=C(FS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>U(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=o=>this.events.next(new cd(o)),r=o=>this.events.next(new ld(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;cr(()=>{this.transitions?.next(ge(R({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new We(null),this.transitions.pipe(Nt(r=>r!==null),lt(r=>{let o=!1;return U(r).pipe(lt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",tt.SupersededByNewNavigation),at;this.currentTransition=r,this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?ge(R({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>s.abortController.abort()});let c=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!c&&u!=="reload")return this.events.next(new Hn(s.id,this.urlSerializer.serialize(s.rawUrl),"",Wa.IgnoredSameUrlNavigation)),s.resolve(!1),at;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return U(s).pipe(lt(d=>(this.events.next(new vi(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?at:Promise.resolve(d))),Nj(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Be(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=d.urlAfterRedirects,m));let f=new qa(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:d,extractedUrl:f,source:m,restoredState:_,extras:v}=s,y=new vi(d,this.urlSerializer.serialize(f),m,_);this.events.next(y);let T=yS(this.rootComponentType).snapshot;return this.currentTransition=r=ge(R({},s),{targetSnapshot:T,urlAfterRedirects:f,extras:ge(R({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(N=>(N.finalUrl=f,N)),U(r)}else return this.events.next(new Hn(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Wa.IgnoredByUrlHandlingStrategy)),s.resolve(!1),at}),Be(s=>{let c=new id(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}),se(s=>(this.currentTransition=r=ge(R({},s),{guards:GF(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),ij(this.environmentInjector,s=>this.events.next(s)),Be(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw _d(this.urlSerializer,s.guardsResult);let c=new od(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(c)}),Nt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",tt.GuardRejected),!1)),l_(s=>{if(s.guards.canActivateChecks.length!==0)return U(s).pipe(Be(c=>{let u=new sd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),lt(c=>{let u=!1;return U(c).pipe(Aj(this.paramsInheritanceStrategy,this.environmentInjector),Be({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",tt.NoDataFromResolver)}}))}),Be(c=>{let u=new ad(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),l_(s=>{let c=u=>{let d=[];if(u.routeConfig?.loadComponent){let f=Ho(u)??this.environmentInjector;d.push(this.configLoader.loadComponent(f,u.routeConfig).pipe(Be(m=>{u.component=m}),se(()=>{})))}for(let f of u.children)d.push(...c(f));return d};return Kc(c(s.targetSnapshot.root)).pipe(Jn(null),Sn(1))}),l_(()=>this.afterPreactivation()),lt(()=>{let{currentSnapshot:s,targetSnapshot:c}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,c.root);return u?Me(u).pipe(se(()=>r)):U(r)}),se(s=>{let c=HF(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=ge(R({},s),{targetRouterState:c}),this.currentNavigation.update(u=>(u.targetRouterState=c,u)),r}),Be(()=>{this.events.next(new Ga)}),qF(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Sn(1),Qc(new Z(s=>{let c=r.abortController.signal,u=()=>s.next();return c.addEventListener("abort",u),()=>c.removeEventListener("abort",u)}).pipe(Nt(()=>!o&&!r.targetRouterState),Be(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",tt.Aborted)}))),Be({next:s=>{o=!0,this.lastSuccessfulNavigation=cr(this.currentNavigation),this.events.next(new Bn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{o=!0}}),Qc(this.transitionAbortWithErrorSubject.pipe(Be(s=>{throw s}))),gs(()=>{o||this.cancelNavigationTransition(r,"",tt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Qn(s=>{if(this.destroyed)return r.resolve(!1),at;if(o=!0,CS(s))this.events.next(new _n(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),WF(s)?this.events.next(new Uo(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let c=new jo(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=ke(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof Vo){let{message:d,cancellationCode:f}=_d(this.urlSerializer,u);this.events.next(new _n(r.id,this.urlSerializer.serialize(r.extractedUrl),d,f)),this.events.next(new Uo(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(c),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return at}))}))}cancelNavigationTransition(n,r,o){let s=new _n(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=cr(this.currentNavigation),o=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==o?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Oj(e){return e!==Ha}var US=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:()=>C(Lj),providedIn:"root"})}return e})(),yd=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},Lj=(()=>{class e extends yd{static \u0275fac=(()=>{let n;return function(o){return(n||(n=Pl(e)))(o||e)}})();static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),VS=(()=>{class e{urlSerializer=C(ec);options=C(rc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=C(lo);urlHandlingStrategy=C(wd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new vn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:o}){let s=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,c=o??s;return c instanceof vn?this.urlSerializer.serialize(c):c}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:o}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,o),this.routerState=n):this.rawUrlTree=o}routerState=yS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:()=>C(Fj),providedIn:"root"})}return e})(),Fj=(()=>{class e extends VS{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof vi?this.updateStateMemento():n instanceof Hn?this.commitTransition(r):n instanceof qa?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ga?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof _n&&n.code!==tt.SupersededByNewNavigation&&n.code!==tt.Redirect?this.restoreHistory(r):n instanceof jo?this.restoreHistory(r,!0):n instanceof Bn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:o}){let{replaceUrl:s,state:c}=r;if(this.location.isCurrentPathEqualTo(n)||s){let u=this.browserPageId,d=R(R({},c),this.generateNgRouterState(o,u));this.location.replaceState(n,"",d)}else{let u=R(R({},c),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(n,"",u)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===n.finalUrl&&s===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(o){return(n||(n=Pl(e)))(o||e)}})();static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function N_(e,t){e.events.pipe(Nt(n=>n instanceof Bn||n instanceof _n||n instanceof jo||n instanceof Hn),se(n=>n instanceof Bn||n instanceof Hn?0:(n instanceof _n?n.code===tt.Redirect||n.code===tt.SupersededByNewNavigation:!1)?2:1),Nt(n=>n!==2),Sn(1)).subscribe(()=>{t()})}var jj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Uj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Td=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=C(wp);stateManager=C(VS);options=C(rc,{optional:!0})||{};pendingTasks=C(an);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=C(jS);urlSerializer=C(ec);location=C(lo);urlHandlingStrategy=C(wd);injector=C(xe);_events=new ze;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=C(US);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=C(ic,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!C(Ed,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Te;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=cr(this.navigationTransitions.currentNavigation);if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof _n&&r.code!==tt.Redirect&&r.code!==tt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Bn)this.navigated=!0;else if(r instanceof Uo){let c=r.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),d=R({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Oj(o.source)},c);this.scheduleNavigation(u,Ha,null,d,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}jF(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ha,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,o)=>{this.navigateToSyncWithBrowser(n,o,r)})}navigateToSyncWithBrowser(n,r,o){let s={replaceUrl:!0},c=o?.navigationId?o:null;if(o){let d=R({},o);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(s.state=d)}let u=this.parseUrl(n);this.scheduleNavigation(u,r,c,s).catch(d=>{this.disposed||this.injector.get(xt)(d)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return cr(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(S_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:o,queryParams:s,fragment:c,queryParamsHandling:u,preserveFragment:d}=r,f=d?this.currentUrlTree.fragment:c,m=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":m=R(R({},this.currentUrlTree.queryParams),s);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=s||null}m!==null&&(m=this.removeEmptyProps(m));let _;try{let v=o?o.snapshot:this.routerState.snapshot.root;_=gS(v)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),_=this.currentUrlTree.root}return mS(_,n,m,f??null)}navigateByUrl(n,r={skipLocationChange:!1}){let o=Fo(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Ha,null,r)}navigate(n,r={skipLocationChange:!1}){return Vj(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(ys(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let o;if(r===!0?o=R({},jj):r===!1?o=R({},Uj):o=r,Fo(n))return YC(this.currentUrlTree,n,o);let s=this.parseUrl(n);return YC(this.currentUrlTree,s,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(n,r,o,s,c){if(this.disposed)return Promise.resolve(!1);let u,d,f;c?(u=c.resolve,d=c.reject,f=c.promise):f=new Promise((_,v)=>{u=_,d=v});let m=this.pendingTasks.add();return N_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:u,reject:d,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(_=>Promise.reject(_))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Vj(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new k(4008,!1)}var Hj=new F("");function A_(e,...t){return ir([{provide:ic,multi:!0,useValue:e},[],{provide:vr,useFactory:$j,deps:[Td]},{provide:Hl,multi:!0,useFactory:zj},t.map(n=>n.\u0275providers)])}function $j(e){return e.routerState.root}function zj(){let e=C(Ke);return t=>{let n=e.get(qr);if(t!==n.components[0])return;let r=e.get(Td),o=e.get(Wj);e.get(qj)===1&&r.initialNavigation(),e.get(Gj,null,{optional:!0})?.setUpPreloading(),e.get(Hj,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var Wj=new F("",{factory:()=>new ze}),qj=new F("",{providedIn:"root",factory:()=>1});var Gj=new F("");var bd=class e{title="gps-tracker";static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Wr({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&ao(0,"router-outlet")},dependencies:[tc],encapsulation:2})};var zn=CN(HS());var Sd=class e{constructor(t){this.db=t}getGpsData(){return new Z(t=>{let n=ZC(this.db,"devices/esp32_1");GC(n,r=>t.next(r.val()))})}static \u0275fac=function(n){return new(n||e)(W(fi))};static \u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})};var Dd=class e{constructor(t){this.gps=t}map;marker;ngOnInit(){console.log("MapComponent ngOnInit called"),this.fixLeafletIcons(),this.map=zn.map("map").setView([4.8161,-75.6855],15),zn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(this.map),this.marker=zn.marker([4.8161,-75.6855]).addTo(this.map),this.gps.getGpsData().subscribe({next:t=>{console.log("GPS data:",t),this.marker.setLatLng([t.lat,t.lon])},error:t=>console.error("Firebase error:",t)})}centerOnMarker(){this.map&&this.marker&&this.map.setView(this.marker.getLatLng(),this.map.getZoom(),{animate:!0})}fixLeafletIcons(){delete zn.Icon.Default.prototype._getIconUrl,zn.Icon.Default.mergeOptions({iconRetinaUrl:"assets/marker-icon-2x.png",iconUrl:"assets/marker-icon.png",shadowUrl:"assets/marker-shadow.png"})}static \u0275fac=function(n){return new(n||e)(Ul(Sd))};static \u0275cmp=Wr({type:e,selectors:[["app-map"]],decls:6,vars:0,consts:[[1,"map-wrapper"],["id","map"],[1,"center-button",3,"click"]],template:function(n,r){n&1&&(Gr(0,"h2"),Wl(1,"GPS Tracker en Tiempo Real"),co(),Gr(2,"div",0),$l(3,"div",1),Gr(4,"button",2),zl("click",function(){return r.centerOnMarker()}),Wl(5," Centrar en marcador "),co()())},styles:[".map-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:500px}.map-wrapper[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]{width:100%;height:100%}.map-wrapper[_ngcontent-%COMP%]   .center-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;z-index:1000;padding:8px 12px;background-color:#fff;border:1px solid #ccc;border-radius:4px;cursor:pointer;box-shadow:0 2px 4px #0003}"]})};var $S=[{path:"",component:Dd}];Hp(bd,{providers:[wT(()=>TT(KC.firebase)),WC(()=>qC()),A_($S)]}).catch(e=>console.error(e));
